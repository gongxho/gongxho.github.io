"use strict";(self.webpackChunkmyblog=self.webpackChunkmyblog||[]).push([[554],{51484:(n,s,a)=>{a.r(s),a.d(s,{default:()=>r});var t=a(78e3);const e=(0,t._)("h1",{id:"mixin",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#mixin","aria-hidden":"true"},"#"),(0,t.Uk)(" Mixin")],-1),p=(0,t.Uk)("JavaScript è¯­è¨€çš„è®¾è®¡æ˜¯å•ä¸€ç»§æ‰¿ï¼Œå³å­ç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»ï¼Œä¸å…è®¸ç»§æ‰¿å¤šä¸ªçˆ¶ç±»ã€‚è¿™ç§è®¾è®¡ä¿è¯äº†å¯¹è±¡ç»§æ‰¿çš„å±‚æ¬¡ç»“æ„æ˜¯æ ‘çŠ¶çš„ï¼Œè€Œä¸æ˜¯å¤æ‚çš„"),o={href:"https://en.wikipedia.org/wiki/Multiple_inheritance#The_diamond_problem",target:"_blank",rel:"noopener noreferrer"},c=(0,t.Uk)("ç½‘çŠ¶ç»“æ„"),i=(0,t.Uk)("ã€‚"),l=(0,t.uE)('<p>ä½†æ˜¯ï¼Œè¿™å¤§å¤§é™ä½äº†ç¼–ç¨‹çš„çµæ´»æ€§ã€‚å› ä¸ºå®é™…å¼€å‘ä¸­ï¼Œæœ‰æ—¶ä¸å¯é¿å…ï¼Œå­ç±»éœ€è¦ç»§æ‰¿å¤šä¸ªçˆ¶ç±»ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œâ€œçŒ«â€å¯ä»¥ç»§æ‰¿â€œå“ºä¹³ç±»åŠ¨ç‰©â€ï¼Œä¹Ÿå¯ä»¥ç»§æ‰¿â€œå® ç‰©â€ã€‚</p><p>å„ç§å•ä¸€ç»§æ‰¿çš„ç¼–ç¨‹è¯­è¨€ï¼Œæœ‰ä¸åŒçš„å¤šé‡ç»§æ‰¿è§£å†³æ–¹æ¡ˆã€‚æ¯”å¦‚ï¼ŒJava è¯­è¨€ä¹Ÿæ˜¯å­ç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»ï¼Œä½†æ˜¯è¿˜å…è®¸ç»§æ‰¿å¤šä¸ªç•Œé¢(interface)ï¼Œè¿™æ ·å°±é—´æ¥å®ç°äº†å¤šé‡ç»§æ‰¿ã€‚Interface ä¸çˆ¶ç±»ä¸€æ ·ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªç±»ï¼Œåªä¸è¿‡å®ƒåªå®šä¹‰æ¥å£(method signature)ï¼Œä¸å®šä¹‰å®ç°ï¼Œå› æ­¤åˆè¢«ç§°ä¸ºâ€œæŠ½è±¡ç±»â€ã€‚å‡¡æ˜¯ç»§æ‰¿äº Interface çš„æ–¹æ³•ï¼Œéƒ½å¿…é¡»è‡ªå·±å®šä¹‰å®ç°ï¼Œå¦åˆ™å°±ä¼šæŠ¥é”™ã€‚è¿™æ ·å°±é¿å…äº†å¤šé‡ç»§æ‰¿çš„æœ€å¤§é—®é¢˜: å¤šä¸ªçˆ¶ç±»çš„åŒåæ–¹æ³•çš„ç¢°æ’(naming collision)ã€‚</p><p>JavaScript è¯­è¨€æ²¡æœ‰é‡‡ç”¨ Interface çš„æ–¹æ¡ˆï¼Œè€Œæ˜¯é€šè¿‡ä»£ç†(delegation)å®ç°äº†ä»å…¶ä»–ç±»å¼•å…¥æ–¹æ³•ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">Enumerable_first</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">first</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">var</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bar&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;baz&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token function">Enumerable_first</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// explicit delegation</span>\nlist<span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;foo&quot;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>list</code> æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæœ¬èº«å¹¶æ²¡æœ‰ <code>first</code> æ–¹æ³•ã€‚é€šè¿‡ <code>call</code> æ–¹æ³•ï¼Œå¯ä»¥æŠŠ <code>Enumerable_first</code> é‡Œé¢çš„æ–¹æ³•ï¼Œç»‘å®šåˆ° <code>list</code>ï¼Œä»è€Œ <code>list</code> å°±å…·æœ‰ <code>first</code> æ–¹æ³•ã€‚è¿™å°±å«åšâ€œä»£ç†â€(delegation)ï¼Œ<code>list</code> å¯¹è±¡ä»£ç†äº† <code>Enumerable_first</code> çš„ <code>first</code> æ–¹æ³•ã€‚</p><h2 id="å«ä¹‰" tabindex="-1"><a class="header-anchor" href="#å«ä¹‰" aria-hidden="true">#</a> å«ä¹‰</h2><p>Mixin è¿™ä¸ªåå­—æ¥è‡ªäºå†°æ·‡æ·‹ï¼Œåœ¨åŸºæœ¬å£å‘³çš„å†°æ·‡æ·‹ä¸Šé¢æ··å…¥å…¶ä»–å£å‘³ï¼Œè¿™å°±å«åš Mix-inã€‚</p><p>å®ƒå…è®¸å‘ä¸€ä¸ªç±»é‡Œé¢æ³¨å…¥ä¸€äº›ä»£ç ï¼Œä½¿å¾—ä¸€ä¸ªç±»çš„åŠŸèƒ½èƒ½å¤Ÿâ€œæ··å…¥â€å¦ä¸€ä¸ªç±»ã€‚å®è´¨ä¸Šæ˜¯å¤šé‡ç»§æ‰¿çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œä½†æ˜¯é¿å…äº†å¤šé‡ç»§æ‰¿çš„å¤æ‚æ€§ï¼Œè€Œä¸”æœ‰åˆ©äºä»£ç å¤ç”¨ã€‚</p><p>Mixin å°±æ˜¯ä¸€ä¸ªæ­£å¸¸çš„ç±»ï¼Œä¸ä»…å®šä¹‰äº†æ¥å£ï¼Œè¿˜å®šä¹‰äº†æ¥å£çš„å®ç°ã€‚</p><p>å­ç±»é€šè¿‡åœ¨ <code>this</code> å¯¹è±¡ä¸Šé¢ç»‘å®šæ–¹æ³•ï¼Œè¾¾åˆ°å¤šé‡ç»§æ‰¿çš„ç›®çš„ã€‚</p><p>å¾ˆå¤šåº“æä¾›äº† Mixin åŠŸèƒ½ã€‚ä¸‹é¢ä»¥ Lodash ä¸ºä¾‹ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">vowels</span><span class="token punctuation">(</span><span class="token parameter">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[aeiou]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&quot;hello&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n_<span class="token punctuation">.</span><span class="token function">mixin</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">vowels</span><span class="token operator">:</span> vowels <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nobj<span class="token punctuation">.</span><span class="token function">vowels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢ä»£ç é€šè¿‡ Lodash åº“çš„ <code>_.mixin</code> æ–¹æ³•ï¼Œè®© <code>obj</code> å¯¹è±¡ç»§æ‰¿äº† <code>vowels</code> æ–¹æ³•ã€‚</p><p>Underscore çš„ç±»ä¼¼æ–¹æ³•æ˜¯ <code>_.extend</code>ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">Person</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fName<span class="token punctuation">,</span> lName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>firstName <span class="token operator">=</span> fName<span class="token punctuation">;</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>lastName <span class="token operator">=</span> lName<span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">var</span> sam <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;Sam&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Lowry&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">var</span> NameMixin <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token function-variable function">fullName</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>firstName <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lastName<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token function-variable function">rename</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">first<span class="token punctuation">,</span> last</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>firstName <span class="token operator">=</span> first<span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>lastName <span class="token operator">=</span> last<span class="token punctuation">;</span>\n    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n_<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> NameMixin<span class="token punctuation">)</span><span class="token punctuation">;</span>\nsam<span class="token punctuation">.</span><span class="token function">rename</span><span class="token punctuation">(</span><span class="token string">&quot;Samwise&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Gamgee&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nsam<span class="token punctuation">.</span><span class="token function">fullName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;Samwise Gamgee&quot;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢ä»£ç é€šè¿‡ <code>_.extend</code> æ–¹æ³•ï¼Œåœ¨ <code>sam</code> å¯¹è±¡ä¸Šé¢(å‡†ç¡®è¯´æ˜¯å®ƒçš„åŸå‹å¯¹è±¡ <code>Person.prototype</code> ä¸Šé¢)ï¼Œæ··å…¥äº† <code>NameMixin</code> ç±»ã€‚</p><p><code>extend</code> æ–¹æ³•çš„å®ç°éå¸¸ç®€å•ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">extend</span><span class="token punctuation">(</span><span class="token parameter">destination<span class="token punctuation">,</span> source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> k <span class="token keyword">in</span> source<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>source<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      destination<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> source<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">return</span> destination<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢ä»£ç å°† <code>source</code> å¯¹è±¡çš„æ‰€æœ‰æ–¹æ³•ï¼Œæ·»åŠ åˆ° <code>destination</code> å¯¹è±¡ã€‚</p><h2 id="trait" tabindex="-1"><a class="header-anchor" href="#trait" aria-hidden="true">#</a> Trait</h2><p>Trait æ˜¯å¦å¤–ä¸€ç§å¤šé‡ç»§æ‰¿çš„è§£å†³æ–¹æ¡ˆã€‚å®ƒä¸ Mixin å¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯æœ‰ä¸€äº›ç»†å¾®çš„å·®åˆ«ã€‚</p><ul><li>Mixin å¯ä»¥åŒ…å«çŠ¶æ€(state)ï¼ŒTrait ä¸åŒ…å«ï¼Œå³ Trait é‡Œé¢çš„æ–¹æ³•éƒ½æ˜¯äº’ä¸ç›¸å¹²ï¼Œå¯ä»¥çº¿æ€§åŒ…å«çš„ã€‚æ¯”å¦‚ï¼Œ<code>Trait1</code> åŒ…å«æ–¹æ³• <code>A</code> å’Œ <code>B</code>ï¼Œ<code>Trait2</code> ç»§æ‰¿äº† <code>Trait1</code>ï¼ŒåŒæ—¶è¿˜åŒ…å«ä¸€ä¸ªè‡ªå·±çš„æ–¹æ³• <code>C</code>ï¼Œå®é™…ä¸Šå°±ç­‰åŒäºç›´æ¥åŒ…å«æ–¹æ³• <code>A</code>ã€<code>B</code>ã€<code>C</code>ã€‚</li><li>å¯¹äºåŒåæ–¹æ³•çš„ç¢°æ’ï¼ŒMixin åŒ…å«äº†è§£å†³è§„åˆ™ï¼ŒTrait åˆ™æ˜¯æŠ¥é”™ã€‚</li></ul>',22),u={},r=(0,a(13860).Z)(u,[["render",function(n,s){const a=(0,t.up)("ExternalLinkIcon");return(0,t.wg)(),(0,t.iD)("div",null,[e,(0,t._)("p",null,[p,(0,t._)("a",o,[c,(0,t.Wm)(a)]),i]),l])}]])},13860:(n,s)=>{s.Z=(n,s)=>{const a=n.__vccOpts||n;for(const[n,t]of s)a[n]=t;return a}},26684:(n,s,a)=>{a.r(s),a.d(s,{data:()=>t});const t=JSON.parse('{"key":"v-5244cc12","path":"/code/language/js/es6/mixin.html","title":"Mixin","lang":"zh-CN","frontmatter":{"icon":"merge","author":"é˜®ä¸€å³°","category":["JavaScript"],"copyright":"æ­¤éƒ¨åˆ†åšå®¢é‡‡ç”¨ <a href=\\"http://creativecommons.org/licenses/by-nc/4.0/\\" rel=\\"noopener noreferrer\\" target=\\"_blank\\">â€œä¿æŒç½²åâ€”éå•†ç”¨â€åˆ›æ„å…±äº«4.0è®¸å¯è¯</a>","summary":"Mixin JavaScript è¯­è¨€çš„è®¾è®¡æ˜¯å•ä¸€ç»§æ‰¿ï¼Œå³å­ç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»ï¼Œä¸å…è®¸ç»§æ‰¿å¤šä¸ªçˆ¶ç±»ã€‚è¿™ç§è®¾è®¡ä¿è¯äº†å¯¹è±¡ç»§æ‰¿çš„å±‚æ¬¡ç»“æ„æ˜¯æ ‘çŠ¶çš„ï¼Œè€Œä¸æ˜¯å¤æ‚çš„ç½‘çŠ¶ç»“æ„ã€‚ ä½†æ˜¯ï¼Œè¿™å¤§å¤§é™ä½äº†ç¼–ç¨‹çš„çµæ´»æ€§ã€‚å› ä¸ºå®é™…å¼€å‘ä¸­ï¼Œæœ‰æ—¶ä¸å¯é¿å…ï¼Œå­ç±»éœ€è¦ç»§æ‰¿å¤šä¸ªçˆ¶ç±»ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œâ€œçŒ«â€å¯ä»¥ç»§æ‰¿â€œå“ºä¹³ç±»åŠ¨ç‰©â€ï¼Œä¹Ÿå¯ä»¥ç»§æ‰¿â€œå® ç‰©â€ã€‚ å„ç§å•ä¸€ç»§æ‰¿çš„ç¼–ç¨‹è¯­è¨€ï¼Œæœ‰ä¸åŒçš„å¤šé‡ç»§æ‰¿è§£å†³æ–¹æ¡ˆ","head":[["meta",{"property":"og:url","content":"https://0808200.xyz/code/language/js/es6/mixin.html"}],["meta",{"property":"og:site_name","content":"ğ‘€ğ‘Ÿ.ğºğ‘œğ‘œğ‘”ğ‘¥â„"}],["meta",{"property":"og:title","content":"Mixin"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:updated_time","content":"2022-06-27T09:33:50.000Z"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:author","content":"é˜®ä¸€å³°"}],["meta",{"property":"article:modified_time","content":"2022-06-27T09:33:50.000Z"}]]},"excerpt":"","headers":[{"level":2,"title":"å«ä¹‰","slug":"å«ä¹‰","children":[]},{"level":2,"title":"Trait","slug":"trait","children":[]}],"git":{"createdTime":1656322430000,"updatedTime":1656322430000,"contributors":[{"name":"googxh","email":"gxh522@qq.com","commits":1}]},"readingTime":{"minutes":2.88,"words":865},"filePathRelative":"code/language/js/es6/mixin.md","localizedDate":"2022å¹´6æœˆ27æ—¥"}')}}]);