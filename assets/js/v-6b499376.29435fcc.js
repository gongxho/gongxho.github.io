"use strict";(self.webpackChunkmyblog=self.webpackChunkmyblog||[]).push([[92252],{51996:(n,t,a)=>{a.r(t),a.d(t,{default:()=>x});var s=a(78e3);const e=a.p+"assets/img/interative-model.c04cbfa9.png",o=(0,s._)("div",{class:"custom-container tip"},[(0,s._)("p",{class:"custom-container-title"},"æç¤º"),(0,s._)("p",null,"æ­¤éƒ¨åˆ†åœ¨åˆæ­¥å­¦ä¹ å°ç¨‹åºçš„æ—¶å€™ç›´æ¥ç•¥è¿‡å³å¯ã€‚")],-1),p=(0,s._)("h2",{id:"èƒŒæ™¯",tabindex:"-1"},[(0,s._)("a",{class:"header-anchor",href:"#èƒŒæ™¯","aria-hidden":"true"},"#"),(0,s.Uk)(" èƒŒæ™¯")],-1),c=(0,s.Uk)("æœ‰é¢‘ç¹ç”¨æˆ·äº¤äº’çš„æ•ˆæœåœ¨å°ç¨‹åºä¸Šè¡¨ç°æ˜¯æ¯”è¾ƒå¡é¡¿çš„ï¼Œä¾‹å¦‚é¡µé¢æœ‰ 2 ä¸ªå…ƒç´  A å’Œ Bï¼Œç”¨æˆ·åœ¨ A ä¸Šåš "),l=(0,s._)("code",null,"touchmove",-1),i=(0,s.Uk)(" æ‰‹åŠ¿ï¼Œè¦æ±‚ B ä¹Ÿè·Ÿéšç§»åŠ¨ï¼Œ"),u={href:"https://developers.weixin.qq.com/miniprogram/dev/component/movable-view.html",target:"_blank",rel:"noopener noreferrer"},r=(0,s.Uk)("movable-view"),d=(0,s.Uk)(" å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„ä¾‹å­ã€‚ä¸€æ¬¡ "),k=(0,s._)("code",null,"touchmove",-1),m=(0,s.Uk)(" äº‹ä»¶çš„å“åº”è¿‡ç¨‹ä¸º:"),v=(0,s.uE)('<ol><li><p>touchmove äº‹ä»¶ä»è§†å›¾å±‚(Webview)æŠ›åˆ°é€»è¾‘å±‚(App Service)</p></li><li><p>é€»è¾‘å±‚(App Service)å¤„ç† touchmove äº‹ä»¶ï¼Œå†é€šè¿‡ setData æ¥æ”¹å˜ B çš„ä½ç½®</p></li></ol><p>ä¸€æ¬¡ touchmove çš„å“åº”éœ€è¦ç»è¿‡ 2 æ¬¡çš„é€»è¾‘å±‚å’Œæ¸²æŸ“å±‚çš„é€šä¿¡ä»¥åŠä¸€æ¬¡æ¸²æŸ“ï¼Œé€šä¿¡çš„è€—æ—¶æ¯”è¾ƒå¤§ã€‚æ­¤å¤– <code>setData</code> æ¸²æŸ“ä¹Ÿä¼šé˜»å¡å…¶å®ƒè„šæœ¬æ‰§è¡Œï¼Œå¯¼è‡´äº†æ•´ä¸ªç”¨æˆ·äº¤äº’çš„åŠ¨ç”»è¿‡ç¨‹ä¼šæœ‰å»¶è¿Ÿã€‚</p><h2 id="å®ç°æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#å®ç°æ–¹æ¡ˆ" aria-hidden="true">#</a> å®ç°æ–¹æ¡ˆ</h2><p>æœ¬æ–¹æ¡ˆåŸºæœ¬çš„æ€è·¯æ˜¯å‡å°‘é€šä¿¡çš„æ¬¡æ•°ï¼Œè®©äº‹ä»¶åœ¨è§†å›¾å±‚(Webview)å“åº”ã€‚å°ç¨‹åºçš„æ¡†æ¶åˆ†ä¸ºè§†å›¾å±‚(Webview)å’Œé€»è¾‘å±‚(App Service)ï¼Œè¿™æ ·åˆ†å±‚çš„ç›®çš„æ˜¯ç®¡æ§ï¼Œå¼€å‘è€…çš„ä»£ç åªèƒ½è¿è¡Œåœ¨é€»è¾‘å±‚(App Service)ï¼Œè€Œè¿™ä¸ªæ€è·¯å°±å¿…é¡»è¦è®©å¼€å‘è€…çš„ä»£ç è¿è¡Œåœ¨è§†å›¾å±‚(Webview)ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºçš„æµç¨‹:</p><p><img src="'+e+'" alt="æµç¨‹æ¼”ç¤º"></p><p>ä½¿ç”¨ WXS å‡½æ•°ç”¨æ¥å“åº”å°ç¨‹åºäº‹ä»¶ï¼Œç›®å‰åªèƒ½å“åº”å†…ç½®ç»„ä»¶çš„äº‹ä»¶ï¼Œä¸æ”¯æŒè‡ªå®šä¹‰ç»„ä»¶äº‹ä»¶ã€‚WXS å‡½æ•°çš„é™¤äº†çº¯é€»è¾‘çš„è¿ç®—ï¼Œè¿˜å¯ä»¥é€šè¿‡å°è£…å¥½çš„ <code>ComponentDescriptor</code> å®ä¾‹æ¥è®¿é—®ä»¥åŠè®¾ç½®ç»„ä»¶çš„ class å’Œæ ·å¼ï¼Œå¯¹äºäº¤äº’åŠ¨ç”»ï¼Œè®¾ç½® style å’Œ class è¶³å¤Ÿäº†ã€‚</p><p>WXS å‡½æ•°çš„ä¾‹å­å¦‚ä¸‹:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">wxsFunction</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> ownerInstance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">var</span> instance <span class="token operator">=</span> ownerInstance<span class="token punctuation">.</span><span class="token function">selectComponent</span><span class="token punctuation">(</span><span class="token string">&quot;.classSelector&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿”å›ç»„ä»¶çš„å®ä¾‹</span>\n  instance<span class="token punctuation">.</span><span class="token function">setStyle</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    <span class="token string-property property">&quot;font-size&quot;</span><span class="token operator">:</span> <span class="token string">&quot;14px&quot;</span><span class="token punctuation">,</span> <span class="token comment">// æ”¯æŒ rpx</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  instance<span class="token punctuation">.</span><span class="token function">getDataset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  instance<span class="token punctuation">.</span><span class="token function">setClass</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// ...</span>\n  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// ä¸å¾€ä¸Šå†’æ³¡ï¼Œç›¸å½“äºè°ƒç”¨äº†åŒæ—¶è°ƒç”¨äº† stopPropagation å’Œ preventDefault</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶ä¸­å…¥å‚ <code>event</code> æ˜¯å°ç¨‹åºäº‹ä»¶å¯¹è±¡åŸºç¡€ä¸Šå¤šäº† <code>event.instance</code> æ¥è¡¨ç¤ºè§¦å‘äº‹ä»¶çš„ç»„ä»¶çš„ <code>ComponentDescriptor</code> å®ä¾‹ã€‚<code>ownerInstance</code> è¡¨ç¤ºçš„æ˜¯è§¦å‘äº‹ä»¶çš„ç»„ä»¶æ‰€åœ¨çš„ç»„ä»¶çš„ <code>ComponentDescriptor</code> å®ä¾‹ï¼Œå¦‚æœè§¦å‘äº‹ä»¶çš„ç»„ä»¶æ˜¯åœ¨é¡µé¢å†…çš„ï¼Œ<code>ownerInstance</code> è¡¨ç¤ºçš„æ˜¯é¡µé¢å®ä¾‹ã€‚</p><h2 id="componentdescriptor" tabindex="-1"><a class="header-anchor" href="#componentdescriptor" aria-hidden="true">#</a> ComponentDescriptor</h2><h3 id="å®šä¹‰" tabindex="-1"><a class="header-anchor" href="#å®šä¹‰" aria-hidden="true">#</a> å®šä¹‰</h3><table><thead><tr><th>æ–¹æ³•</th><th>å‚æ•°</th><th>æè¿°</th><th>æœ€ä½ç‰ˆæœ¬</th></tr></thead><tbody><tr><td>selectComponent</td><td>selector å¯¹è±¡</td><td>è¿”å›ç»„ä»¶çš„ ComponentDescriptor å®ä¾‹ã€‚</td><td></td></tr><tr><td>selectAllComponents</td><td>selector å¯¹è±¡æ•°ç»„</td><td>è¿”å›ç»„ä»¶çš„ ComponentDescriptor å®ä¾‹æ•°ç»„ã€‚</td><td></td></tr><tr><td>setStyle</td><td>Object/string</td><td>è®¾ç½®ç»„ä»¶æ ·å¼ï¼Œæ”¯æŒ rpxã€‚è®¾ç½®çš„æ ·å¼ä¼˜å…ˆçº§æ¯”ç»„ä»¶ wxml é‡Œé¢å®šä¹‰çš„æ ·å¼é«˜ã€‚ä¸èƒ½è®¾ç½®æœ€é¡¶å±‚é¡µé¢çš„æ ·å¼ã€‚</td><td></td></tr><tr><td>addClass/removeClass/ hasClass</td><td>string</td><td>è®¾ç½®ç»„ä»¶çš„ classã€‚è®¾ç½®çš„ class ä¼˜å…ˆçº§æ¯”ç»„ä»¶ wxml é‡Œé¢å®šä¹‰çš„ class é«˜ã€‚ä¸èƒ½è®¾ç½®æœ€é¡¶å±‚é¡µé¢çš„ classã€‚</td><td></td></tr><tr><td>getDataset</td><td>æ— </td><td>è¿”å›å½“å‰ç»„ä»¶/é¡µé¢çš„ dataset å¯¹è±¡</td><td></td></tr><tr><td>callMethod</td><td>(funcName:string, args:object)</td><td>è°ƒç”¨å½“å‰ç»„ä»¶/é¡µé¢åœ¨é€»è¾‘å±‚(App Service)å®šä¹‰çš„å‡½æ•°ã€‚funcName è¡¨ç¤ºå‡½æ•°åç§°ï¼Œargs è¡¨ç¤ºå‡½æ•°çš„å‚æ•°ã€‚</td><td></td></tr><tr><td>requestAnimationFrame</td><td>Function</td><td>å’ŒåŸç”Ÿ requestAnimationFrame ä¸€æ ·ã€‚ç”¨äºè®¾ç½®åŠ¨ç”»ã€‚</td><td></td></tr><tr><td>getState</td><td>æ— </td><td>è¿”å›ä¸€ä¸ª object å¯¹è±¡ï¼Œå½“æœ‰å±€éƒ¨å˜é‡éœ€è¦å­˜å‚¨èµ·æ¥åç»­ä½¿ç”¨çš„æ—¶å€™ç”¨è¿™ä¸ªæ–¹æ³•ã€‚</td><td></td></tr><tr><td>triggerEvent</td><td>(eventName, detail)</td><td>å’Œç»„ä»¶çš„ triggerEvent ä¸€è‡´ã€‚</td><td></td></tr><tr><td>getComputedStyle</td><td>string[]</td><td>å‚æ•°ä¸ SelectorQuery çš„ computedStyle ä¸€è‡´ã€‚</td><td>2.11.2</td></tr></tbody></table><h3 id="ä½¿ç”¨æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨æ–¹æ³•" aria-hidden="true">#</a> ä½¿ç”¨æ–¹æ³•</h3><p>WXML å®šä¹‰äº‹ä»¶:</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wxs</span> <span class="token attr-name">module</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./test.wxs<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">change:</span>prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{test.propObserver}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{propValue}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">bindtouchmove</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{test.touchmove}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>movable<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢çš„ <code>change:prop</code>(å±æ€§å‰é¢å¸¦ <code>change:</code> å‰ç¼€)æ˜¯åœ¨ prop å±æ€§è¢«è®¾ç½®çš„æ—¶å€™è§¦å‘ WXS å‡½æ•°ï¼Œå€¼å¿…é¡»ç”¨ <code>{{}}</code> æ‹¬èµ·æ¥ã€‚ç±»ä¼¼ <code>Component</code> å®šä¹‰çš„ <code>properties</code> é‡Œé¢çš„ <code>observer</code> å±æ€§ï¼Œåœ¨ <code>setData({propValue: newValue})</code> è°ƒç”¨ä¹‹åä¼šè§¦å‘ã€‚</p><div class="custom-container warning"><p class="custom-container-title">æ³¨æ„</p><p>WXS å‡½æ•°å¿…é¡»ç”¨ <code>{{}}</code> æ‹¬èµ·æ¥ã€‚å½“ <code>prop</code> çš„å€¼è¢«è®¾ç½® WXS å‡½æ•°å°±ä¼šè§¦å‘ï¼Œè€Œä¸åªæ˜¯å€¼å‘ç”Ÿæ”¹å˜ï¼Œæ‰€ä»¥åœ¨é¡µé¢åˆå§‹åŒ–çš„æ—¶å€™ä¼šè°ƒç”¨ä¸€æ¬¡ WxsPropObserver çš„å‡½æ•°ã€‚</p></div><p>WXS æ–‡ä»¶ test.wxs é‡Œé¢å®šä¹‰å¹¶å¯¼å‡ºäº‹ä»¶å¤„ç†å‡½æ•°å’Œå±æ€§æ”¹å˜è§¦å‘çš„å‡½æ•°:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token function-variable function">touchmove</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;log event&quot;</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token function-variable function">propObserver</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span> oldValue<span class="token punctuation">,</span> ownerInstance<span class="token punctuation">,</span> instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;prop observer&quot;</span><span class="token punctuation">,</span> newValue<span class="token punctuation">,</span> oldValue<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',19),h=(0,s.Uk)("æ›´å¤šç¤ºä¾‹è¯· "),g={href:"https://developers.weixin.qq.com/s/L1G0Dkmc7G8a",target:"_blank",rel:"noopener noreferrer"},b=(0,s.Uk)("åœ¨å¼€å‘è€…å·¥å…·ä¸­é¢„è§ˆæ•ˆæœ"),w=(0,s._)("h2",{id:"tips",tabindex:"-1"},[(0,s._)("a",{class:"header-anchor",href:"#tips","aria-hidden":"true"},"#"),(0,s.Uk)(" Tips")],-1),f=(0,s._)("ol",null,[(0,s._)("li",null,"ç›®å‰è¿˜ä¸æ”¯æŒåŸç”Ÿç»„ä»¶çš„äº‹ä»¶ã€input å’Œ textarea ç»„ä»¶çš„ bindinput äº‹ä»¶"),(0,s._)("li",null,[(0,s.Uk)("ç›®å‰åœ¨ WXS å‡½æ•°é‡Œé¢ä»…æ”¯æŒ "),(0,s._)("code",null,"console.log"),(0,s.Uk)(" æ–¹å¼æ‰“æ—¥å¿—å®šä½é—®é¢˜ï¼Œæ³¨æ„è¿ç»­çš„é‡å¤æ—¥å¿—ä¼šè¢«è¿‡æ»¤æ‰ã€‚")])],-1),q={},x=(0,a(13860).Z)(q,[["render",function(n,t){const a=(0,s.up)("ExternalLinkIcon");return(0,s.wg)(),(0,s.iD)("div",null,[o,p,(0,s._)("p",null,[c,l,i,(0,s._)("a",u,[r,(0,s.Wm)(a)]),d,k,m]),v,(0,s._)("p",null,[h,(0,s._)("a",g,[b,(0,s.Wm)(a)])]),w,f])}]])},13860:(n,t)=>{t.Z=(n,t)=>{const a=n.__vccOpts||n;for(const[n,s]of t)a[n]=s;return a}},31013:(n,t,a)=>{a.r(t),a.d(t,{data:()=>s});const s=JSON.parse('{"key":"v-6b499376","path":"/code/mini-app/guide/view/wxs-event.html","title":"WXS äº‹ä»¶","lang":"zh-CN","frontmatter":{"title":"WXS äº‹ä»¶","icon":"activity","category":["å°ç¨‹åº"],"summary":"æ­¤éƒ¨åˆ†åœ¨åˆæ­¥å­¦ä¹ å°ç¨‹åºçš„æ—¶å€™ç›´æ¥ç•¥è¿‡å³å¯ã€‚ èƒŒæ™¯ æœ‰é¢‘ç¹ç”¨æˆ·äº¤äº’çš„æ•ˆæœåœ¨å°ç¨‹åºä¸Šè¡¨ç°æ˜¯æ¯”è¾ƒå¡é¡¿çš„ï¼Œä¾‹å¦‚é¡µé¢æœ‰ 2 ä¸ªå…ƒç´  A å’Œ Bï¼Œç”¨æˆ·åœ¨ A ä¸Šåš touchmove æ‰‹åŠ¿ï¼Œè¦æ±‚ B ä¹Ÿè·Ÿéšç§»åŠ¨ï¼Œmovable-view å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„ä¾‹å­ã€‚ä¸€æ¬¡ touchmove äº‹ä»¶çš„å“åº”è¿‡ç¨‹ä¸º: 1. touchmove äº‹ä»¶ä»è§†å›¾å±‚(Webview)æŠ›åˆ°é€»è¾‘å±‚(","head":[["meta",{"property":"og:url","content":"https://0808200.xyz/code/mini-app/guide/view/wxs-event.html"}],["meta",{"property":"og:site_name","content":"ğ‘€ğ‘Ÿ.ğºğ‘œğ‘œğ‘”ğ‘¥â„"}],["meta",{"property":"og:title","content":"WXS äº‹ä»¶"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://0808200.xyz/"}],["meta",{"property":"og:updated_time","content":"2022-06-27T09:33:50.000Z"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:alt","content":"WXS äº‹ä»¶"}],["meta",{"property":"article:modified_time","content":"2022-06-27T09:33:50.000Z"}]]},"excerpt":"","headers":[{"level":2,"title":"èƒŒæ™¯","slug":"èƒŒæ™¯","children":[]},{"level":2,"title":"å®ç°æ–¹æ¡ˆ","slug":"å®ç°æ–¹æ¡ˆ","children":[]},{"level":2,"title":"ComponentDescriptor","slug":"componentdescriptor","children":[{"level":3,"title":"å®šä¹‰","slug":"å®šä¹‰","children":[]},{"level":3,"title":"ä½¿ç”¨æ–¹æ³•","slug":"ä½¿ç”¨æ–¹æ³•","children":[]}]},{"level":2,"title":"Tips","slug":"tips","children":[]}],"git":{"createdTime":1656322430000,"updatedTime":1656322430000,"contributors":[{"name":"googxh","email":"gxh522@qq.com","commits":1}]},"readingTime":{"minutes":3.56,"words":1067},"filePathRelative":"code/mini-app/guide/view/wxs-event.md","localizedDate":"2022å¹´6æœˆ27æ—¥"}')}}]);