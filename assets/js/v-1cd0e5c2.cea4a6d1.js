"use strict";(self.webpackChunkmyblog=self.webpackChunkmyblog||[]).push([[29179],{46986:(n,e,a)=>{a.r(e),a.d(e,{default:()=>sn});var s=a(78e3);const o=(0,s._)("h1",{id:"è¯»æ‡‚-ecmascript-è§„æ ¼",tabindex:"-1"},[(0,s._)("a",{class:"header-anchor",href:"#è¯»æ‡‚-ecmascript-è§„æ ¼","aria-hidden":"true"},"#"),(0,s.Uk)(" è¯»æ‡‚ ECMAScript è§„æ ¼")],-1),t=(0,s._)("h2",{id:"æ¦‚è¿°",tabindex:"-1"},[(0,s._)("a",{class:"header-anchor",href:"#æ¦‚è¿°","aria-hidden":"true"},"#"),(0,s.Uk)(" æ¦‚è¿°")],-1),c=(0,s._)("p",null,"è§„æ ¼æ–‡ä»¶æ˜¯è®¡ç®—æœºè¯­è¨€çš„å®˜æ–¹æ ‡å‡†ï¼Œè¯¦ç»†æè¿°è¯­æ³•è§„åˆ™å’Œå®ç°æ–¹æ³•ã€‚",-1),p=(0,s._)("p",null,"ä¸€èˆ¬æ¥è¯´ï¼Œæ²¡æœ‰å¿…è¦é˜…è¯»è§„æ ¼ï¼Œé™¤éæ‚¨è¦å†™ç¼–è¯‘å™¨ã€‚å› ä¸ºè§„æ ¼å†™å¾—éå¸¸æŠ½è±¡å’Œç²¾ç‚¼ï¼Œåˆç¼ºä¹å®ä¾‹ï¼Œä¸å®¹æ˜“ç†è§£ï¼Œè€Œä¸”å¯¹äºè§£å†³å®é™…çš„åº”ç”¨é—®é¢˜ï¼Œå¸®åŠ©ä¸å¤§ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨é‡åˆ°ç–‘éš¾çš„è¯­æ³•é—®é¢˜ï¼Œå®åœ¨æ‰¾ä¸åˆ°ç­”æ¡ˆï¼Œè¿™æ—¶å¯ä»¥å»æŸ¥çœ‹è§„æ ¼æ–‡ä»¶ï¼Œäº†è§£è¯­è¨€æ ‡å‡†æ˜¯æ€ä¹ˆè¯´çš„ã€‚è§„æ ¼æ˜¯è§£å†³é—®é¢˜çš„â€œæœ€åä¸€æ‹›â€ã€‚",-1),l=(0,s._)("p",null,"è¿™å¯¹ JavaScript è¯­è¨€å¾ˆæœ‰å¿…è¦ã€‚å› ä¸ºå®ƒçš„ä½¿ç”¨åœºæ™¯å¤æ‚ï¼Œè¯­æ³•è§„åˆ™ä¸ç»Ÿä¸€ï¼Œä¾‹å¤–å¾ˆå¤šï¼Œå„ç§è¿è¡Œç¯å¢ƒçš„è¡Œä¸ºä¸ä¸€è‡´ï¼Œå¯¼è‡´å¥‡æ€ªçš„è¯­æ³•é—®é¢˜å±‚å‡ºä¸ç©·ï¼Œä»»ä½•è¯­æ³•ä¹¦éƒ½ä¸å¯èƒ½å›Šæ‹¬æ‰€æœ‰æƒ…å†µã€‚æŸ¥çœ‹è§„æ ¼ï¼Œä¸å¤±ä¸ºä¸€ç§è§£å†³è¯­æ³•é—®é¢˜çš„æœ€å¯é ã€æœ€æƒå¨çš„ç»ˆææ–¹æ³•ã€‚",-1),i=(0,s._)("p",null,"æœ¬ç« ä»‹ç»å¦‚ä½•è¯»æ‡‚ ECMAScript 6 çš„è§„æ ¼æ–‡ä»¶ã€‚",-1),d=(0,s.Uk)("ECMAScript 6 çš„è§„æ ¼ï¼Œå¯ä»¥åœ¨ ECMA å›½é™…æ ‡å‡†ç»„ç»‡çš„å®˜æ–¹ç½‘ç«™("),r={href:"https://www.ecma-international.org/ecma-262/6.0/",target:"_blank",rel:"noopener noreferrer"},u=(0,s.Uk)("www.ecma-international.org/ecma-262/6.0/"),k=(0,s.Uk)(")å…è´¹ä¸‹è½½å’Œåœ¨çº¿é˜…è¯»ã€‚"),m=(0,s.uE)('<p>è¿™ä¸ªè§„æ ¼æ–‡ä»¶ç›¸å½“åºå¤§ï¼Œä¸€å…±æœ‰ 26 ç« ï¼ŒA4 æ‰“å°çš„è¯ï¼Œè¶³è¶³æœ‰ 545 é¡µã€‚å®ƒçš„ç‰¹ç‚¹å°±æ˜¯è§„å®šå¾—éå¸¸ç»†è‡´ï¼Œæ¯ä¸€ä¸ªè¯­æ³•è¡Œä¸ºã€æ¯ä¸€ä¸ªå‡½æ•°çš„å®ç°éƒ½åšäº†è¯¦å°½çš„æ¸…æ™°çš„æè¿°ã€‚åŸºæœ¬ä¸Šï¼Œç¼–è¯‘å™¨ä½œè€…åªè¦æŠŠæ¯ä¸€æ­¥ç¿»è¯‘æˆä»£ç å°±å¯ä»¥äº†ã€‚è¿™å¾ˆå¤§ç¨‹åº¦ä¸Šï¼Œä¿è¯äº†æ‰€æœ‰ ES6 å®ç°éƒ½æœ‰ä¸€è‡´çš„è¡Œä¸ºã€‚</p><p>ECMAScript 6 è§„æ ¼çš„ 26 ç« ä¹‹ä¸­ï¼Œç¬¬ 1 ç« åˆ°ç¬¬ 3 ç« æ˜¯å¯¹æ–‡ä»¶æœ¬èº«çš„ä»‹ç»ï¼Œä¸è¯­è¨€å…³ç³»ä¸å¤§ã€‚ç¬¬ 4 ç« æ˜¯å¯¹è¿™é—¨è¯­è¨€æ€»ä½“è®¾è®¡çš„æè¿°ï¼Œæœ‰å…´è¶£çš„è¯»è€…å¯ä»¥è¯»ä¸€ä¸‹ã€‚ç¬¬ 5 ç« åˆ°ç¬¬ 8 ç« æ˜¯è¯­è¨€å®è§‚å±‚é¢çš„æè¿°ã€‚ç¬¬ 5 ç« æ˜¯è§„æ ¼çš„åè¯è§£é‡Šå’Œå†™æ³•çš„ä»‹ç»ï¼Œç¬¬ 6 ç« ä»‹ç»æ•°æ®ç±»å‹ï¼Œç¬¬ 7 ç« ä»‹ç»è¯­è¨€å†…éƒ¨ç”¨åˆ°çš„æŠ½è±¡æ“ä½œï¼Œç¬¬ 8 ç« ä»‹ç»ä»£ç å¦‚ä½•è¿è¡Œã€‚ç¬¬ 9 ç« åˆ°ç¬¬ 26 ç« ä»‹ç»å…·ä½“çš„è¯­æ³•ã€‚</p><p>å¯¹äºä¸€èˆ¬ç”¨æˆ·æ¥è¯´ï¼Œé™¤äº†ç¬¬ 4 ç« ï¼Œå…¶ä»–ç« èŠ‚éƒ½æ¶‰åŠæŸä¸€æ–¹é¢çš„ç»†èŠ‚ï¼Œä¸ç”¨é€šè¯»ï¼Œåªè¦åœ¨ç”¨åˆ°çš„æ—¶å€™ï¼ŒæŸ¥é˜…ç›¸å…³ç« èŠ‚å³å¯ã€‚</p><h2 id="æœ¯è¯­" tabindex="-1"><a class="header-anchor" href="#æœ¯è¯­" aria-hidden="true">#</a> æœ¯è¯­</h2><p>ES6 è§„æ ¼ä½¿ç”¨äº†ä¸€äº›ä¸“é—¨çš„æœ¯è¯­ï¼Œäº†è§£è¿™äº›æœ¯è¯­ï¼Œå¯ä»¥å¸®åŠ©æ‚¨è¯»æ‡‚è§„æ ¼ã€‚æœ¬èŠ‚ä»‹ç»å…¶ä¸­çš„å‡ ä¸ªã€‚</p><h3 id="æŠ½è±¡æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#æŠ½è±¡æ“ä½œ" aria-hidden="true">#</a> æŠ½è±¡æ“ä½œ</h3><p>æ‰€è°“â€æŠ½è±¡æ“ä½œâ€œ(abstract operations)å°±æ˜¯å¼•æ“çš„ä¸€äº›å†…éƒ¨æ–¹æ³•ï¼Œå¤–éƒ¨ä¸èƒ½è°ƒç”¨ã€‚è§„æ ¼å®šä¹‰äº†ä¸€ç³»åˆ—çš„æŠ½è±¡æ“ä½œï¼Œè§„å®šäº†å®ƒä»¬çš„è¡Œä¸ºï¼Œç•™ç»™å„ç§å¼•æ“è‡ªå·±å»å®ç°ã€‚</p><p>ä¸¾ä¾‹æ¥è¯´ï¼Œ<code>Boolean(value)</code> çš„ç®—æ³•ï¼Œç¬¬ä¸€æ­¥æ˜¯è¿™æ ·çš„ã€‚</p><blockquote><ol><li>Let <code>b</code> be <code>ToBoolean(value)</code>.</li></ol></blockquote><p>è¿™é‡Œçš„ <code>ToBoolean</code> å°±æ˜¯ä¸€ä¸ªæŠ½è±¡æ“ä½œï¼Œæ˜¯å¼•æ“å†…éƒ¨æ±‚å‡ºå¸ƒå°”å€¼çš„ç®—æ³•ã€‚</p><p>è®¸å¤šå‡½æ•°çš„ç®—æ³•éƒ½ä¼šå¤šæ¬¡ç”¨åˆ°åŒæ ·çš„æ­¥éª¤ï¼Œæ‰€ä»¥ ES6 è§„æ ¼å°†å®ƒä»¬æŠ½å‡ºæ¥ï¼Œå®šä¹‰æˆâ€æŠ½è±¡æ“ä½œâ€œï¼Œæ–¹ä¾¿æè¿°ã€‚</p><h3 id="record-å’Œ-field" tabindex="-1"><a class="header-anchor" href="#record-å’Œ-field" aria-hidden="true">#</a> Record å’Œ field</h3><p>ES6 è§„æ ¼å°†é”®å€¼å¯¹(key-value map)çš„æ•°æ®ç»“æ„ç§°ä¸º Recordï¼Œå…¶ä¸­çš„æ¯ä¸€ç»„é”®å€¼å¯¹ç§°ä¸º fieldã€‚è¿™å°±æ˜¯è¯´ï¼Œä¸€ä¸ª Record ç”±å¤šä¸ª field ç»„æˆï¼Œè€Œæ¯ä¸ª field éƒ½åŒ…å«ä¸€ä¸ªé”®å(key)å’Œä¸€ä¸ªé”®å€¼(value)ã€‚</p><h3 id="notation" tabindex="-1"><a class="header-anchor" href="#notation" aria-hidden="true">#</a> [[Notation]]</h3><p>ES6 è§„æ ¼å¤§é‡ä½¿ç”¨ <code>[[Notation]]</code> è¿™ç§ä¹¦å†™æ³•ï¼Œæ¯”å¦‚ <code>[[Value]]</code>ã€<code>[[Writable]]</code>ã€<code>[[Get]]</code>ã€<code>[[Set]]</code> ç­‰ç­‰ã€‚å®ƒç”¨æ¥æŒ‡ä»£ field çš„é”®åã€‚</p><p>ä¸¾ä¾‹æ¥è¯´ï¼Œ<code>obj</code> æ˜¯ä¸€ä¸ª Recordï¼Œå®ƒæœ‰ä¸€ä¸ª <code>Prototype</code> å±æ€§ã€‚ES6 è§„æ ¼ä¸ä¼šå†™ <code>obj.Prototype</code>ï¼Œè€Œæ˜¯å†™ <code>obj.[[Prototype]]</code>ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä½¿ç”¨ <code>[[Notation]]</code> è¿™ç§ä¹¦å†™æ³•çš„å±æ€§ï¼Œéƒ½æ˜¯å¯¹è±¡çš„å†…éƒ¨å±æ€§ã€‚</p><p>æ‰€æœ‰çš„ JavaScript å‡½æ•°éƒ½æœ‰ä¸€ä¸ªå†…éƒ¨å±æ€§ <code>[[Call]]</code>ï¼Œç”¨æ¥è¿è¡Œè¯¥å‡½æ•°ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token constant">F</span><span class="token punctuation">[</span><span class="token punctuation">[</span>Call<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token constant">V</span><span class="token punctuation">,</span> argumentsList<span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>F</code> æ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œ<code>[[Call]]</code> æ˜¯å®ƒçš„å†…éƒ¨æ–¹æ³•ï¼Œ<code>F.[[call]]()</code> è¡¨ç¤ºè¿è¡Œè¯¥å‡½æ•°ï¼Œ<code>V</code> è¡¨ç¤º <code>[[Call]]</code> è¿è¡Œæ—¶ <code>this</code> çš„å€¼ï¼Œ<code>argumentsList</code> åˆ™æ˜¯è°ƒç”¨æ—¶ä¼ å…¥å‡½æ•°çš„å‚æ•°ã€‚</p><h3 id="completion-record" tabindex="-1"><a class="header-anchor" href="#completion-record" aria-hidden="true">#</a> Completion Record</h3><p>æ¯ä¸€ä¸ªè¯­å¥éƒ½ä¼šè¿”å›ä¸€ä¸ª Completion Recordï¼Œè¡¨ç¤ºè¿è¡Œç»“æœã€‚æ¯ä¸ª Completion Record æœ‰ä¸€ä¸ª <code>[[Type]]</code> å±æ€§ï¼Œè¡¨ç¤ºè¿è¡Œç»“æœçš„ç±»å‹ã€‚</p><p><code>[[Type]]</code> å±æ€§æœ‰äº”ç§å¯èƒ½çš„å€¼ã€‚</p><ul><li>normal</li><li>return</li><li>throw</li><li>break</li><li>continue</li></ul><p>å¦‚æœ <code>[[Type]]</code> çš„å€¼æ˜¯ <code>normal</code>ï¼Œå°±ç§°ä¸º normal completionï¼Œè¡¨ç¤ºè¿è¡Œæ­£å¸¸ã€‚å…¶ä»–çš„å€¼ï¼Œéƒ½ç§°ä¸º abrupt completionã€‚å…¶ä¸­ï¼Œå¼€å‘è€…åªéœ€è¦å…³æ³¨ <code>[[Type]]</code> ä¸º <code>throw</code> çš„æƒ…å†µï¼Œå³è¿è¡Œå‡ºé”™ï¼›<code>break</code>ã€<code>continue</code>ã€<code>return</code> è¿™ä¸‰ä¸ªå€¼éƒ½åªå‡ºç°åœ¨ç‰¹å®šåœºæ™¯ï¼Œå¯ä»¥ä¸ç”¨è€ƒè™‘ã€‚</p><h2 id="æŠ½è±¡æ“ä½œçš„æ ‡å‡†æµç¨‹" tabindex="-1"><a class="header-anchor" href="#æŠ½è±¡æ“ä½œçš„æ ‡å‡†æµç¨‹" aria-hidden="true">#</a> æŠ½è±¡æ“ä½œçš„æ ‡å‡†æµç¨‹</h2><p>æŠ½è±¡æ“ä½œçš„è¿è¡Œæµç¨‹ï¼Œä¸€èˆ¬æ˜¯ä¸‹é¢è¿™æ ·ã€‚</p><blockquote><ol><li>Let <code>resultCompletionRecord</code> be <code>AbstractOp()</code>.</li><li>If <code>resultCompletionRecord</code> is an abrupt completion, return <code>resultCompletionRecord</code>.</li><li>Let <code>result</code> be <code>resultCompletionRecord.[[Value]]</code>.</li><li>return <code>result</code>.</li></ol></blockquote><p>ä¸Šé¢çš„ç¬¬ä¸€æ­¥æ˜¯è°ƒç”¨æŠ½è±¡æ“ä½œ <code>AbstractOp()</code>ï¼Œå¾—åˆ° <code>resultCompletionRecord</code>ï¼Œè¿™æ˜¯ä¸€ä¸ª Completion Recordã€‚ç¬¬äºŒæ­¥ï¼Œå¦‚æœè¿™ä¸ª Record å±äº abrupt completionï¼Œå°±å°† <code>resultCompletionRecord</code> è¿”å›ç»™ç”¨æˆ·ã€‚å¦‚æœæ­¤å¤„æ²¡æœ‰è¿”å›ï¼Œå°±è¡¨ç¤ºè¿è¡Œç»“æœæ­£å¸¸ï¼Œæ‰€å¾—çš„å€¼å­˜æ”¾åœ¨ <code>resultCompletionRecord.[[Value]]</code> å±æ€§ã€‚ç¬¬ä¸‰æ­¥ï¼Œå°†è¿™ä¸ªå€¼è®°ä¸º <code>result</code>ã€‚ç¬¬å››æ­¥ï¼Œå°† <code>result</code> è¿”å›ç»™ç”¨æˆ·ã€‚</p><p>ES6 è§„æ ¼å°†è¿™ä¸ªæ ‡å‡†æµç¨‹ï¼Œä½¿ç”¨ç®€å†™çš„æ–¹å¼è¡¨è¾¾ã€‚</p><blockquote><ol><li>Let <code>result</code> be <code>AbstractOp()</code>.</li><li><code>ReturnIfAbrupt(result)</code>.</li><li>return <code>result</code>.</li></ol></blockquote><p>è¿™ä¸ªç®€å†™æ–¹å¼é‡Œé¢çš„ <code>ReturnIfAbrupt(result)</code>ï¼Œå°±ä»£è¡¨äº†ä¸Šé¢çš„ç¬¬äºŒæ­¥å’Œç¬¬ä¸‰æ­¥ï¼Œå³å¦‚æœæœ‰æŠ¥é”™ï¼Œå°±è¿”å›é”™è¯¯ï¼Œå¦åˆ™å–å‡ºå€¼ã€‚</p><p>ç”šè‡³è¿˜æœ‰è¿›ä¸€æ­¥çš„ç®€å†™æ ¼å¼ã€‚</p><blockquote><ol><li>Let <code>result</code> be <code>? AbstractOp()</code>.</li><li>return <code>result</code>.</li></ol></blockquote><p>ä¸Šé¢æµç¨‹çš„<code>?</code>ï¼Œå°±ä»£è¡¨ <code>AbstractOp()</code> å¯èƒ½ä¼šæŠ¥é”™ã€‚ä¸€æ—¦æŠ¥é”™ï¼Œå°±è¿”å›é”™è¯¯ï¼Œå¦åˆ™å–å‡ºå€¼ã€‚</p><p>é™¤äº†<code>?</code>ï¼ŒES 6 è§„æ ¼è¿˜ä½¿ç”¨å¦ä¸€ä¸ªç®€å†™ç¬¦å·<code>!</code>ã€‚</p><blockquote><ol><li>Let <code>result</code> be <code>! AbstractOp()</code>.</li><li>return <code>result</code>.</li></ol></blockquote><p>ä¸Šé¢æµç¨‹çš„<code>!</code>ï¼Œä»£è¡¨ <code>AbstractOp()</code> ä¸ä¼šæŠ¥é”™ï¼Œè¿”å›çš„ä¸€å®šæ˜¯ normal completionï¼Œæ€»æ˜¯å¯ä»¥å–å‡ºå€¼ã€‚</p><h2 id="ç›¸ç­‰è¿ç®—ç¬¦" tabindex="-1"><a class="header-anchor" href="#ç›¸ç­‰è¿ç®—ç¬¦" aria-hidden="true">#</a> ç›¸ç­‰è¿ç®—ç¬¦</h2><p>ä¸‹é¢é€šè¿‡ä¸€äº›ä¾‹å­ï¼Œä»‹ç»å¦‚ä½•ä½¿ç”¨è¿™ä»½è§„æ ¼ã€‚</p><p>ç›¸ç­‰è¿ç®—ç¬¦(<code>==</code>)æ˜¯ä¸€ä¸ªå¾ˆè®©äººå¤´ç—›çš„è¿ç®—ç¬¦ï¼Œå®ƒçš„è¯­æ³•è¡Œä¸ºå¤šå˜ï¼Œä¸ç¬¦åˆç›´è§‰ã€‚è¿™ä¸ªå°èŠ‚å°±çœ‹çœ‹è§„æ ¼æ€ä¹ˆè§„å®šå®ƒçš„è¡Œä¸ºã€‚</p><p>è¯·çœ‹ä¸‹é¢è¿™ä¸ªè¡¨è¾¾å¼ï¼Œè¯·é—®å®ƒçš„å€¼æ˜¯å¤šå°‘ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">0</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>',42),b=(0,s.Uk)("å¦‚æœæ‚¨ä¸ç¡®å®šç­”æ¡ˆï¼Œæˆ–è€…æƒ³çŸ¥é“è¯­è¨€å†…éƒ¨æ€ä¹ˆå¤„ç†ï¼Œå°±å¯ä»¥å»æŸ¥çœ‹è§„æ ¼ï¼Œ"),v={href:"https://www.ecma-international.org/ecma-262/6.0/#sec-abstract-equality-comparison",target:"_blank",rel:"noopener noreferrer"},h=(0,s.Uk)("7.2.12 å°èŠ‚"),y=(0,s.Uk)("æ˜¯å¯¹ç›¸ç­‰è¿ç®—ç¬¦("),f=(0,s._)("code",null,"==",-1),g=(0,s.Uk)(")çš„æè¿°ã€‚"),T=(0,s.uE)("<p>è§„æ ¼å¯¹æ¯ä¸€ç§è¯­æ³•è¡Œä¸ºçš„æè¿°ï¼Œéƒ½åˆ†æˆä¸¤éƒ¨åˆ†: å…ˆæ˜¯æ€»ä½“çš„è¡Œä¸ºæè¿°ï¼Œç„¶åæ˜¯å®ç°çš„ç®—æ³•ç»†èŠ‚ã€‚ç›¸ç­‰è¿ç®—ç¬¦çš„æ€»ä½“æè¿°ï¼Œåªæœ‰ä¸€å¥è¯ã€‚</p><blockquote><p>â€œThe comparison <code>x == y</code>, where <code>x</code> and <code>y</code> are values, produces <code>true</code> or <code>false</code>.â€</p></blockquote><p>ä¸Šé¢è¿™å¥è¯çš„æ„æ€æ˜¯ï¼Œç›¸ç­‰è¿ç®—ç¬¦ç”¨äºæ¯”è¾ƒä¸¤ä¸ªå€¼ï¼Œè¿”å› <code>true</code> æˆ– <code>false</code>ã€‚</p><p>ä¸‹é¢æ˜¯ç®—æ³•ç»†èŠ‚ã€‚</p><blockquote><ol><li>ReturnIfAbrupt(x).</li><li>ReturnIfAbrupt(y).</li><li>If <code>Type(x)</code> is the same as <code>Type(y)</code>, then <ol><li>Return the result of performing Strict Equality Comparison <code>x === y</code>.</li></ol></li><li>If <code>x</code> is <code>null</code> and <code>y</code> is <code>undefined</code>, return <code>true</code>.</li><li>If <code>x</code> is <code>undefined</code> and <code>y</code> is <code>null</code>, return <code>true</code>.</li><li>If <code>Type(x)</code> is Number and <code>Type(y)</code> is String, return the result of the comparison <code>x == ToNumber(y)</code>.</li><li>If <code>Type(x)</code> is String and <code>Type(y)</code> is Number, return the result of the comparison <code>ToNumber(x) == y</code>.</li><li>If <code>Type(x)</code> is Boolean, return the result of the comparison <code>ToNumber(x) == y</code>.</li><li>If <code>Type(y)</code> is Boolean, return the result of the comparison <code>x == ToNumber(y)</code>.</li><li>If <code>Type(x)</code> is either String, Number, or Symbol and <code>Type(y)</code> is Object, then return the result of the comparison <code>x == ToPrimitive(y)</code>.</li><li>If <code>Type(x)</code> is Object and <code>Type(y)</code> is either String, Number, or Symbol, then return the result of the comparison <code>ToPrimitive(x) == y</code>.</li><li>Return <code>false</code>.</li></ol></blockquote><p>ä¸Šé¢è¿™æ®µç®—æ³•ï¼Œä¸€å…±æœ‰ 12 æ­¥ï¼Œç¿»è¯‘å¦‚ä¸‹ã€‚</p><blockquote><ol><li>å¦‚æœ <code>x</code> ä¸æ˜¯æ­£å¸¸å€¼(æ¯”å¦‚æŠ›å‡ºä¸€ä¸ªé”™è¯¯)ï¼Œä¸­æ–­æ‰§è¡Œã€‚</li><li>å¦‚æœ <code>y</code> ä¸æ˜¯æ­£å¸¸å€¼ï¼Œä¸­æ–­æ‰§è¡Œã€‚</li><li>å¦‚æœ <code>Type(x)</code> ä¸ <code>Type(y)</code> ç›¸åŒï¼Œæ‰§è¡Œä¸¥æ ¼ç›¸ç­‰è¿ç®— <code>x === y</code>ã€‚</li><li>å¦‚æœ <code>x</code> æ˜¯ <code>null</code>ï¼Œ<code>y</code> æ˜¯ <code>undefined</code>ï¼Œè¿”å› <code>true</code>ã€‚</li><li>å¦‚æœ <code>x</code> æ˜¯ <code>undefined</code>ï¼Œ<code>y</code> æ˜¯ <code>null</code>ï¼Œè¿”å› <code>true</code>ã€‚</li><li>å¦‚æœ <code>Type(x)</code> æ˜¯æ•°å€¼ï¼Œ<code>Type(y)</code> æ˜¯å­—ç¬¦ä¸²ï¼Œè¿”å› <code>x == ToNumber(y)</code> çš„ç»“æœã€‚</li><li>å¦‚æœ <code>Type(x)</code> æ˜¯å­—ç¬¦ä¸²ï¼Œ<code>Type(y)</code> æ˜¯æ•°å€¼ï¼Œè¿”å› <code>ToNumber(x) == y</code> çš„ç»“æœã€‚</li><li>å¦‚æœ <code>Type(x)</code> æ˜¯å¸ƒå°”å€¼ï¼Œè¿”å› <code>ToNumber(x) == y</code> çš„ç»“æœã€‚</li><li>å¦‚æœ <code>Type(y)</code> æ˜¯å¸ƒå°”å€¼ï¼Œè¿”å› <code>x == ToNumber(y)</code> çš„ç»“æœã€‚</li><li>å¦‚æœ <code>Type(x)</code> æ˜¯å­—ç¬¦ä¸²æˆ–æ•°å€¼æˆ– <code>Symbol</code> å€¼ï¼Œ<code>Type(y)</code> æ˜¯å¯¹è±¡ï¼Œè¿”å› <code>x == ToPrimitive(y)</code> çš„ç»“æœã€‚</li><li>å¦‚æœ <code>Type(x)</code> æ˜¯å¯¹è±¡ï¼Œ<code>Type(y)</code> æ˜¯å­—ç¬¦ä¸²æˆ–æ•°å€¼æˆ– <code>Symbol</code> å€¼ï¼Œè¿”å› <code>ToPrimitive(x) == y</code> çš„ç»“æœã€‚</li><li>è¿”å› <code>false</code>ã€‚</li></ol></blockquote>",7),w=(0,s.Uk)("ç”±äº "),x=(0,s._)("code",null,"0",-1),_=(0,s.Uk)(" çš„ç±»å‹æ˜¯æ•°å€¼ï¼Œ"),A=(0,s._)("code",null,"null",-1),C=(0,s.Uk)(" çš„ç±»å‹æ˜¯ Null(è¿™æ˜¯è§„æ ¼"),I={href:"https://www.ecma-international.org/ecma-262/6.0/#sec-terms-and-definitions-null-type",target:"_blank",rel:"noopener noreferrer"},S=(0,s.Uk)("4.3.13 å°èŠ‚"),q=(0,s.Uk)("çš„è§„å®šï¼Œæ˜¯å†…éƒ¨ Type è¿ç®—çš„ç»“æœï¼Œè·Ÿ "),E=(0,s._)("code",null,"typeof",-1),O=(0,s.Uk)(" è¿ç®—ç¬¦æ— å…³)ã€‚å› æ­¤ä¸Šé¢çš„å‰ 11 æ­¥éƒ½å¾—ä¸åˆ°ç»“æœï¼Œè¦åˆ°ç¬¬ 12 æ­¥æ‰èƒ½å¾—åˆ° "),R=(0,s._)("code",null,"false",-1),j=(0,s.Uk)("ã€‚"),P=(0,s.uE)('<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">0</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// false</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="æ•°ç»„çš„ç©ºä½" tabindex="-1"><a class="header-anchor" href="#æ•°ç»„çš„ç©ºä½" aria-hidden="true">#</a> æ•°ç»„çš„ç©ºä½</h2><p>ä¸‹é¢å†çœ‹å¦ä¸€ä¸ªä¾‹å­ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> a1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> a2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token punctuation">,</span> <span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\na1<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token comment">// 3</span>\na2<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token comment">// 3</span>\n\na1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>\na2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>\n\na1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> a2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// true</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ•°ç»„ <code>a1</code> çš„æˆå‘˜æ˜¯ä¸‰ä¸ª <code>undefined</code>ï¼Œæ•°ç»„ <code>a2</code> çš„æˆå‘˜æ˜¯ä¸‰ä¸ªç©ºä½ã€‚è¿™ä¸¤ä¸ªæ•°ç»„å¾ˆç›¸ä¼¼ï¼Œé•¿åº¦éƒ½æ˜¯ 3ï¼Œæ¯ä¸ªä½ç½®çš„æˆå‘˜è¯»å–å‡ºæ¥éƒ½æ˜¯ <code>undefined</code>ã€‚</p><p>ä½†æ˜¯ï¼Œå®ƒä»¬å®é™…ä¸Šå­˜åœ¨é‡å¤§å·®å¼‚ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">0</span> <span class="token keyword">in</span> a1<span class="token punctuation">;</span> <span class="token comment">// true</span>\n<span class="token number">0</span> <span class="token keyword">in</span> a2<span class="token punctuation">;</span> <span class="token comment">// false</span>\n\na1<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>\na2<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>\n\nObject<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;0&quot;, &quot;1&quot;, &quot;2&quot;]</span>\nObject<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>a2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// []</span>\n\na1<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 1, 1]</span>\na2<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [, , ,]</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢ä»£ç ä¸€å…±åˆ—å‡ºäº†å››ç§è¿ç®—ï¼Œæ•°ç»„ <code>a1</code> å’Œ <code>a2</code> çš„ç»“æœéƒ½ä¸ä¸€æ ·ã€‚å‰ä¸‰ç§è¿ç®—(<code>in</code> è¿ç®—ç¬¦ã€æ•°ç»„çš„ <code>hasOwnProperty</code> æ–¹æ³•ã€<code>Object.keys</code> æ–¹æ³•)éƒ½è¯´æ˜ï¼Œæ•°ç»„ <code>a2</code> å–ä¸åˆ°å±æ€§åã€‚æœ€åä¸€ç§è¿ç®—(æ•°ç»„çš„ <code>map</code> æ–¹æ³•)è¯´æ˜ï¼Œæ•°ç»„ <code>a2</code> æ²¡æœ‰å‘ç”Ÿéå†ã€‚</p><p>ä¸ºä»€ä¹ˆ <code>a1</code> ä¸ <code>a2</code> æˆå‘˜çš„è¡Œä¸ºä¸ä¸€è‡´? æ•°ç»„çš„æˆå‘˜æ˜¯ <code>undefined</code> æˆ–ç©ºä½ï¼Œåˆ°åº•æœ‰ä»€ä¹ˆä¸åŒ?</p>',9),U=(0,s.Uk)("è§„æ ¼çš„"),L={href:"https://www.ecma-international.org/ecma-262/6.0/#sec-array-initializer",target:"_blank",rel:"noopener noreferrer"},N=(0,s.Uk)("12.2.5 å°èŠ‚ã€Šæ•°ç»„çš„åˆå§‹åŒ–ã€‹"),V=(0,s.Uk)("ç»™å‡ºäº†ç­”æ¡ˆã€‚"),M=(0,s.uE)('<blockquote><p>â€œArray elements may be elided at the beginning, middle or end of the element list. Whenever a comma in the element list is not preceded by an AssignmentExpression (i.e., a comma at the beginning or after another comma), the missing array element contributes to the length of the Array and increases the index of subsequent elements. Elided array elements are not defined. If an element is elided at the end of an array, that element does not contribute to the length of the Array.â€</p></blockquote><p>ç¿»è¯‘å¦‚ä¸‹ã€‚</p><blockquote><p>â€œæ•°ç»„æˆå‘˜å¯ä»¥çœç•¥ã€‚åªè¦é€—å·å‰é¢æ²¡æœ‰ä»»ä½•è¡¨è¾¾å¼ï¼Œæ•°ç»„çš„ <code>length</code> å±æ€§å°±ä¼šåŠ  1ï¼Œå¹¶ä¸”ç›¸åº”å¢åŠ å…¶åæˆå‘˜çš„ä½ç½®ç´¢å¼•ã€‚è¢«çœç•¥çš„æˆå‘˜ä¸ä¼šè¢«å®šä¹‰ã€‚å¦‚æœè¢«çœç•¥çš„æˆå‘˜æ˜¯æ•°ç»„æœ€åä¸€ä¸ªæˆå‘˜ï¼Œåˆ™ä¸ä¼šå¯¼è‡´æ•°ç»„ <code>length</code> å±æ€§å¢åŠ ã€‚â€</p></blockquote><p>ä¸Šé¢çš„è§„æ ¼è¯´å¾—å¾ˆæ¸…æ¥šï¼Œæ•°ç»„çš„ç©ºä½ä¼šåæ˜ åœ¨ <code>length</code> å±æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´ç©ºä½æœ‰è‡ªå·±çš„ä½ç½®ï¼Œä½†æ˜¯è¿™ä¸ªä½ç½®çš„å€¼æ˜¯æœªå®šä¹‰ï¼Œå³è¿™ä¸ªå€¼æ˜¯ä¸å­˜åœ¨çš„ã€‚å¦‚æœä¸€å®šè¦è¯»å–ï¼Œç»“æœå°±æ˜¯ <code>undefined</code>(å› ä¸º <code>undefined</code> åœ¨ JavaScript è¯­è¨€ä¸­è¡¨ç¤ºä¸å­˜åœ¨)ã€‚</p><p>è¿™å°±è§£é‡Šäº†ä¸ºä»€ä¹ˆ <code>in</code> è¿ç®—ç¬¦ã€æ•°ç»„çš„ <code>hasOwnProperty</code> æ–¹æ³•ã€<code>Object.keys</code> æ–¹æ³•ï¼Œéƒ½å–ä¸åˆ°ç©ºä½çš„å±æ€§åã€‚å› ä¸ºè¿™ä¸ªå±æ€§åæ ¹æœ¬å°±ä¸å­˜åœ¨ï¼Œè§„æ ¼é‡Œé¢æ²¡è¯´è¦ä¸ºç©ºä½åˆ†é…å±æ€§å(ä½ç½®ç´¢å¼•)ï¼Œåªè¯´è¦ä¸ºä¸‹ä¸€ä¸ªå…ƒç´ çš„ä½ç½®ç´¢å¼•åŠ  1ã€‚</p><p>è‡³äºä¸ºä»€ä¹ˆæ•°ç»„çš„ <code>map</code> æ–¹æ³•ä¼šè·³è¿‡ç©ºä½ï¼Œè¯·çœ‹ä¸‹ä¸€èŠ‚ã€‚</p><h2 id="æ•°ç»„çš„-map-æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#æ•°ç»„çš„-map-æ–¹æ³•" aria-hidden="true">#</a> æ•°ç»„çš„ map æ–¹æ³•</h2>',7),B=(0,s.Uk)("è§„æ ¼çš„"),G={href:"https://www.ecma-international.org/ecma-262/6.0/#sec-array.prototype.map",target:"_blank",rel:"noopener noreferrer"},W=(0,s.Uk)("22.1.3.15 å°èŠ‚"),D=(0,s.Uk)("å®šä¹‰äº†æ•°ç»„çš„ "),J=(0,s._)("code",null,"map",-1),Z=(0,s.Uk)(" æ–¹æ³•ã€‚è¯¥å°èŠ‚å…ˆæ˜¯æ€»ä½“æè¿° "),z=(0,s._)("code",null,"map",-1),H=(0,s.Uk)(" æ–¹æ³•çš„è¡Œä¸ºï¼Œé‡Œé¢æ²¡æœ‰æåˆ°æ•°ç»„ç©ºä½ã€‚"),F=(0,s.uE)('<p>åé¢çš„ç®—æ³•æè¿°æ˜¯è¿™æ ·çš„ã€‚</p><blockquote><ol><li>Let <code>O</code> be <code>ToObject(this value)</code>.</li><li><code>ReturnIfAbrupt(O)</code>.</li><li>Let <code>len</code> be <code>ToLength(Get(O, &quot;length&quot;))</code>.</li><li><code>ReturnIfAbrupt(len)</code>.</li><li>If <code>IsCallable(callbackfn)</code> is <code>false</code>, throw a TypeError exception.</li><li>If <code>thisArg</code> was supplied, let <code>T</code> be <code>thisArg</code>; else let <code>T</code> be <code>undefined</code>.</li><li>Let <code>A</code> be <code>ArraySpeciesCreate(O, len)</code>.</li><li><code>ReturnIfAbrupt(A)</code>.</li><li>Let <code>k</code> be 0.</li><li>Repeat, while <code>k</code> &lt; <code>len</code><ol><li>Let <code>Pk</code> be <code>ToString(k)</code>.</li><li>Let <code>kPresent</code> be <code>HasProperty(O, Pk)</code>.</li><li><code>ReturnIfAbrupt(kPresent)</code>.</li><li>If <code>kPresent</code> is <code>true</code>, then <ol><li>Let <code>kValue</code> be <code>Get(O, Pk)</code>.</li><li><code>ReturnIfAbrupt(kValue)</code>.</li><li>Let <code>mappedValue</code> be <code>Call(callbackfn, T, Â«kValue, k, OÂ»)</code>.</li><li><code>ReturnIfAbrupt(mappedValue)</code>.</li><li>Let <code>status</code> be <code>CreateDataPropertyOrThrow (A, Pk, mappedValue)</code>.</li><li><code>ReturnIfAbrupt(status)</code>.</li></ol></li><li>Increase <code>k</code> by 1.</li></ol></li><li>Return <code>A</code>.</li></ol></blockquote><p>ç¿»è¯‘å¦‚ä¸‹ã€‚</p><blockquote><ol><li>å¾—åˆ°å½“å‰æ•°ç»„çš„ <code>this</code> å¯¹è±¡</li><li>å¦‚æœæŠ¥é”™å°±è¿”å›</li><li>æ±‚å‡ºå½“å‰æ•°ç»„çš„ <code>length</code> å±æ€§</li><li>å¦‚æœæŠ¥é”™å°±è¿”å›</li><li>å¦‚æœ map æ–¹æ³•çš„å‚æ•° <code>callbackfn</code> ä¸å¯æ‰§è¡Œï¼Œå°±æŠ¥é”™</li><li>å¦‚æœ map æ–¹æ³•çš„å‚æ•°ä¹‹ä¸­ï¼ŒæŒ‡å®šäº† <code>this</code>ï¼Œå°±è®© <code>T</code> ç­‰äºè¯¥å‚æ•°ï¼Œå¦åˆ™ <code>T</code> ä¸º <code>undefined</code></li><li>ç”Ÿæˆä¸€ä¸ªæ–°çš„æ•°ç»„ <code>A</code>ï¼Œè·Ÿå½“å‰æ•°ç»„çš„ <code>length</code> å±æ€§ä¿æŒä¸€è‡´</li><li>å¦‚æœæŠ¥é”™å°±è¿”å›</li><li>è®¾å®š <code>k</code> ç­‰äº 0</li><li>åªè¦ <code>k</code> å°äºå½“å‰æ•°ç»„çš„ <code>length</code> å±æ€§ï¼Œå°±é‡å¤ä¸‹é¢æ­¥éª¤ <ol><li>è®¾å®š <code>Pk</code> ç­‰äº <code>ToString(k)</code>ï¼Œå³å°† <code>K</code> è½¬ä¸ºå­—ç¬¦ä¸²</li><li>è®¾å®š <code>kPresent</code> ç­‰äº <code>HasProperty(O, Pk)</code>ï¼Œå³æ±‚å½“å‰æ•°ç»„æœ‰æ²¡æœ‰æŒ‡å®šå±æ€§</li><li>å¦‚æœæŠ¥é”™å°±è¿”å›</li><li>å¦‚æœ <code>kPresent</code> ç­‰äº <code>true</code>ï¼Œåˆ™è¿›è¡Œä¸‹é¢æ­¥éª¤ <ol><li>è®¾å®š <code>kValue</code> ç­‰äº <code>Get(O, Pk)</code>ï¼Œå–å‡ºå½“å‰æ•°ç»„çš„æŒ‡å®šå±æ€§</li><li>å¦‚æœæŠ¥é”™å°±è¿”å›</li><li>è®¾å®š <code>mappedValue</code> ç­‰äº <code>Call(callbackfn, T, Â«kValue, k, OÂ»)</code>ï¼Œå³æ‰§è¡Œå›è°ƒå‡½æ•°</li><li>å¦‚æœæŠ¥é”™å°±è¿”å›</li><li>è®¾å®š <code>status</code> ç­‰äº <code>CreateDataPropertyOrThrow (A, Pk, mappedValue)</code>ï¼Œå³å°†å›è°ƒå‡½æ•°çš„å€¼æ”¾å…¥ <code>A</code> æ•°ç»„çš„æŒ‡å®šä½ç½®</li><li>å¦‚æœæŠ¥é”™å°±è¿”å›</li></ol></li><li><code>k</code> å¢åŠ  1</li></ol></li><li>è¿”å› <code>A</code></li></ol></blockquote><p>ä»”ç»†æŸ¥çœ‹ä¸Šé¢çš„ç®—æ³•ï¼Œå¯ä»¥å‘ç°ï¼Œå½“å¤„ç†ä¸€ä¸ªå…¨æ˜¯ç©ºä½çš„æ•°ç»„æ—¶ï¼Œå‰é¢æ­¥éª¤éƒ½æ²¡æœ‰é—®é¢˜ã€‚è¿›å…¥ç¬¬ 10 æ­¥ä¸­ç¬¬ 2 æ­¥æ—¶ï¼Œ<code>kPresent</code> ä¼šæŠ¥é”™ï¼Œå› ä¸ºç©ºä½å¯¹åº”çš„å±æ€§åï¼Œå¯¹äºæ•°ç»„æ¥è¯´æ˜¯ä¸å­˜åœ¨çš„ï¼Œå› æ­¤å°±ä¼šè¿”å›ï¼Œä¸ä¼šè¿›è¡Œåé¢çš„æ­¥éª¤ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token punctuation">,</span> <span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\narr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [, , ,]</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>arr</code> æ˜¯ä¸€ä¸ªå…¨æ˜¯ç©ºä½çš„æ•°ç»„ï¼Œ<code>map</code> æ–¹æ³•éå†æˆå‘˜æ—¶ï¼Œå‘ç°æ˜¯ç©ºä½ï¼Œå°±ç›´æ¥è·³è¿‡ï¼Œä¸ä¼šè¿›å…¥å›è°ƒå‡½æ•°ã€‚å› æ­¤ï¼Œå›è°ƒå‡½æ•°é‡Œé¢çš„ <code>console.log</code> è¯­å¥æ ¹æœ¬ä¸ä¼šæ‰§è¡Œï¼Œæ•´ä¸ª <code>map</code> æ–¹æ³•è¿”å›ä¸€ä¸ªå…¨æ˜¯ç©ºä½çš„æ–°æ•°ç»„ã€‚</p>',7),K=(0,s.Uk)("V8 å¼•æ“å¯¹ "),X=(0,s._)("code",null,"map",-1),Y=(0,s.Uk)(" æ–¹æ³•çš„"),Q={href:"https://github.com/v8/v8/blob/44c44521ae11859478b42004f57ea93df52526ee/src/js/array.js#L1347",target:"_blank",rel:"noopener noreferrer"},$=(0,s.Uk)("å®ç°"),nn=(0,s.Uk)("å¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°è·Ÿè§„æ ¼çš„ç®—æ³•æè¿°å®Œå…¨ä¸€è‡´ã€‚"),en=(0,s.uE)('<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">ArrayMap</span><span class="token punctuation">(</span><span class="token parameter">f<span class="token punctuation">,</span> receiver</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token constant">CHECK_OBJECT_COERCIBLE</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">&quot;Array.prototype.map&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// Pull out the length so that modifications to the length in the</span>\n  <span class="token comment">// loop will not affect the looping and side effects are visible.</span>\n  <span class="token keyword">var</span> array <span class="token operator">=</span> <span class="token constant">TO_OBJECT</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">var</span> length <span class="token operator">=</span> <span class="token constant">TO_LENGTH_OR_UINT32</span><span class="token punctuation">(</span>array<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> <span class="token function">InnerArrayMap</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> receiver<span class="token punctuation">,</span> array<span class="token punctuation">,</span> length<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">function</span> <span class="token function">InnerArrayMap</span><span class="token punctuation">(</span><span class="token parameter">f<span class="token punctuation">,</span> receiver<span class="token punctuation">,</span> array<span class="token punctuation">,</span> length</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token constant">IS_CALLABLE</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token function">MakeTypeError</span><span class="token punctuation">(</span>kCalledNonCallable<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">var</span> accumulator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InternalArray</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">var</span> is_array <span class="token operator">=</span> <span class="token constant">IS_ARRAY</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">var</span> stepping <span class="token operator">=</span> <span class="token constant">DEBUG_IS_STEPPING</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">HAS_INDEX</span><span class="token punctuation">(</span>array<span class="token punctuation">,</span> i<span class="token punctuation">,</span> is_array<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">var</span> element <span class="token operator">=</span> array<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>\n      <span class="token comment">// Prepare break slots for debugger step in.</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>stepping<span class="token punctuation">)</span> <span class="token operator">%</span><span class="token function">DebugPrepareStepInIfStepping</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>\n      accumulator<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">%</span><span class="token function">_Call</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> receiver<span class="token punctuation">,</span> element<span class="token punctuation">,</span> i<span class="token punctuation">,</span> array<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GlobalArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token operator">%</span><span class="token function">MoveArrayContents</span><span class="token punctuation">(</span>accumulator<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> result<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',1),an={},sn=(0,a(13860).Z)(an,[["render",function(n,e){const a=(0,s.up)("ExternalLinkIcon");return(0,s.wg)(),(0,s.iD)("div",null,[o,t,c,p,l,i,(0,s._)("p",null,[d,(0,s._)("a",r,[u,(0,s.Wm)(a)]),k]),m,(0,s._)("p",null,[b,(0,s._)("a",v,[h,(0,s.Wm)(a)]),y,f,g]),T,(0,s._)("p",null,[w,x,_,A,C,(0,s._)("a",I,[S,(0,s.Wm)(a)]),q,E,O,R,j]),P,(0,s._)("p",null,[U,(0,s._)("a",L,[N,(0,s.Wm)(a)]),V]),M,(0,s._)("p",null,[B,(0,s._)("a",G,[W,(0,s.Wm)(a)]),D,J,Z,z,H]),F,(0,s._)("p",null,[K,X,Y,(0,s._)("a",Q,[$,(0,s.Wm)(a)]),nn]),en])}]])},13860:(n,e)=>{e.Z=(n,e)=>{const a=n.__vccOpts||n;for(const[n,s]of e)a[n]=s;return a}},35351:(n,e,a)=>{a.r(e),a.d(e,{data:()=>s});const s=JSON.parse('{"key":"v-1cd0e5c2","path":"/code/language/js/es6/spec.html","title":"è¯»æ‡‚ ECMAScript è§„æ ¼","lang":"zh-CN","frontmatter":{"icon":"creative","author":"é˜®ä¸€å³°","date":"2019-10-25T00:00:00.000Z","category":["JavaScript"],"copyright":"æ­¤éƒ¨åˆ†åšå®¢é‡‡ç”¨ <a href=\\"http://creativecommons.org/licenses/by-nc/4.0/\\" rel=\\"noopener noreferrer\\" target=\\"_blank\\">â€œä¿æŒç½²åâ€”éå•†ç”¨â€åˆ›æ„å…±äº«4.0è®¸å¯è¯</a>","summary":"è¯»æ‡‚ ECMAScript è§„æ ¼ æ¦‚è¿° è§„æ ¼æ–‡ä»¶æ˜¯è®¡ç®—æœºè¯­è¨€çš„å®˜æ–¹æ ‡å‡†ï¼Œè¯¦ç»†æè¿°è¯­æ³•è§„åˆ™å’Œå®ç°æ–¹æ³•ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œæ²¡æœ‰å¿…è¦é˜…è¯»è§„æ ¼ï¼Œé™¤éæ‚¨è¦å†™ç¼–è¯‘å™¨ã€‚å› ä¸ºè§„æ ¼å†™å¾—éå¸¸æŠ½è±¡å’Œç²¾ç‚¼ï¼Œåˆç¼ºä¹å®ä¾‹ï¼Œä¸å®¹æ˜“ç†è§£ï¼Œè€Œä¸”å¯¹äºè§£å†³å®é™…çš„åº”ç”¨é—®é¢˜ï¼Œå¸®åŠ©ä¸å¤§ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨é‡åˆ°ç–‘éš¾çš„è¯­æ³•é—®é¢˜ï¼Œå®åœ¨æ‰¾ä¸åˆ°ç­”æ¡ˆï¼Œè¿™æ—¶å¯ä»¥å»æŸ¥çœ‹è§„æ ¼æ–‡ä»¶ï¼Œäº†è§£è¯­è¨€æ ‡å‡†æ˜¯æ€ä¹ˆè¯´çš„ã€‚è§„æ ¼æ˜¯è§£å†³é—®é¢˜çš„â€œæœ€åä¸€æ‹›","head":[["meta",{"property":"og:url","content":"https://0808200.xyz/code/language/js/es6/spec.html"}],["meta",{"property":"og:site_name","content":"ğ‘€ğ‘Ÿ.ğºğ‘œğ‘œğ‘”ğ‘¥â„"}],["meta",{"property":"og:title","content":"è¯»æ‡‚ ECMAScript è§„æ ¼"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:updated_time","content":"2022-06-27T09:33:50.000Z"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:author","content":"é˜®ä¸€å³°"}],["meta",{"property":"article:published_time","content":"2019-10-25T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2022-06-27T09:33:50.000Z"}]]},"excerpt":"","headers":[{"level":2,"title":"æ¦‚è¿°","slug":"æ¦‚è¿°","children":[]},{"level":2,"title":"æœ¯è¯­","slug":"æœ¯è¯­","children":[{"level":3,"title":"æŠ½è±¡æ“ä½œ","slug":"æŠ½è±¡æ“ä½œ","children":[]},{"level":3,"title":"Record å’Œ field","slug":"record-å’Œ-field","children":[]},{"level":3,"title":"[[Notation]]","slug":"notation","children":[]},{"level":3,"title":"Completion Record","slug":"completion-record","children":[]}]},{"level":2,"title":"æŠ½è±¡æ“ä½œçš„æ ‡å‡†æµç¨‹","slug":"æŠ½è±¡æ“ä½œçš„æ ‡å‡†æµç¨‹","children":[]},{"level":2,"title":"ç›¸ç­‰è¿ç®—ç¬¦","slug":"ç›¸ç­‰è¿ç®—ç¬¦","children":[]},{"level":2,"title":"æ•°ç»„çš„ç©ºä½","slug":"æ•°ç»„çš„ç©ºä½","children":[]},{"level":2,"title":"æ•°ç»„çš„ map æ–¹æ³•","slug":"æ•°ç»„çš„-map-æ–¹æ³•","children":[]}],"git":{"createdTime":1656322430000,"updatedTime":1656322430000,"contributors":[{"name":"googxh","email":"gxh522@qq.com","commits":1}]},"readingTime":{"minutes":12.28,"words":3685},"filePathRelative":"code/language/js/es6/spec.md","localizedDate":"2019å¹´10æœˆ25æ—¥"}')}}]);