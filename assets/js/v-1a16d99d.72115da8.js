"use strict";(self.webpackChunkmyblog=self.webpackChunkmyblog||[]).push([[61149],{4302:(n,s,a)=>{a.r(s),a.d(s,{default:()=>N});var p=a(78e3);const e=(0,p._)("h1",{id:"vue-js-æºç æ„å»º",tabindex:"-1"},[(0,p._)("a",{class:"header-anchor",href:"#vue-js-æºç æ„å»º","aria-hidden":"true"},"#"),(0,p.Uk)(" Vue.js æºç æ„å»º")],-1),t=(0,p.Uk)("Vue.js æºç æ˜¯åŸºäº "),o={href:"https://github.com/rollup/rollup",target:"_blank",rel:"noopener noreferrer"},c=(0,p.Uk)("Rollup"),l=(0,p.Uk)(" æ„å»ºçš„ï¼Œå®ƒçš„æ„å»ºç›¸å…³é…ç½®éƒ½åœ¨ scripts ç›®å½•ä¸‹ã€‚"),i=(0,p.uE)('<h2 id="æ„å»ºè„šæœ¬" tabindex="-1"><a class="header-anchor" href="#æ„å»ºè„šæœ¬" aria-hidden="true">#</a> æ„å»ºè„šæœ¬</h2><p>é€šå¸¸ä¸€ä¸ªåŸºäº NPM æ‰˜ç®¡çš„é¡¹ç›®éƒ½ä¼šæœ‰ä¸€ä¸ª package.json æ–‡ä»¶ï¼Œå®ƒæ˜¯å¯¹é¡¹ç›®çš„æè¿°æ–‡ä»¶ï¼Œå®ƒçš„å†…å®¹å®é™…ä¸Šæ˜¯ä¸€ä¸ªæ ‡å‡†çš„ JSON å¯¹è±¡ã€‚</p><p>æˆ‘ä»¬é€šå¸¸ä¼šé…ç½® <code>script</code> å­—æ®µä½œä¸º NPM çš„æ‰§è¡Œè„šæœ¬ï¼ŒVue.js æºç æ„å»ºçš„è„šæœ¬å¦‚ä¸‹ï¼š</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>\n  <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node scripts/build.js&quot;</span><span class="token punctuation">,</span>\n    <span class="token property">&quot;build:ssr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm run build -- web-runtime-cjs,web-server-renderer&quot;</span><span class="token punctuation">,</span>\n    <span class="token property">&quot;build:weex&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm run build -- weex&quot;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n \n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œæ€»å…±æœ‰ 3 æ¡å‘½ä»¤ï¼Œä½œç”¨éƒ½æ˜¯æ„å»º Vue.jsï¼Œåé¢ 2 æ¡æ˜¯åœ¨ç¬¬ä¸€æ¡å‘½ä»¤çš„åŸºç¡€ä¸Šï¼Œæ·»åŠ ä¸€äº›ç¯å¢ƒå‚æ•°ã€‚</p><p>å½“åœ¨å‘½ä»¤è¡Œè¿è¡Œ <code>npm run build</code> çš„æ—¶å€™ï¼Œå®é™…ä¸Šå°±ä¼šæ‰§è¡Œ <code>node scripts/build.js</code>ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹å®ƒå®é™…æ˜¯æ€ä¹ˆæ„å»ºçš„ã€‚</p><h2 id="æ„å»ºè¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#æ„å»ºè¿‡ç¨‹" aria-hidden="true">#</a> æ„å»ºè¿‡ç¨‹</h2><p>æˆ‘ä»¬å¯¹äºæ„å»ºè¿‡ç¨‹åˆ†ææ˜¯åŸºäºæºç çš„ï¼Œå…ˆæ‰“å¼€æ„å»ºçš„å…¥å£ JS æ–‡ä»¶ï¼Œåœ¨ <code>scripts/build.js</code> ä¸­ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> builds <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./config&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAllBuilds</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n\n<span class="token comment">// filter builds via command line arg</span>\n<span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> filters <span class="token operator">=</span> process<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;,&#39;</span><span class="token punctuation">)</span>\n  builds <span class="token operator">=</span> builds<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">b</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> filters<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token parameter">f</span> <span class="token operator">=&gt;</span> b<span class="token punctuation">.</span>output<span class="token punctuation">.</span>file<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">||</span> b<span class="token punctuation">.</span>_name<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n  <span class="token comment">// filter out weex builds by default</span>\n  builds <span class="token operator">=</span> builds<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">b</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> b<span class="token punctuation">.</span>output<span class="token punctuation">.</span>file<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&#39;weex&#39;</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token function">build</span><span class="token punctuation">(</span>builds<span class="token punctuation">)</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ®µä»£ç é€»è¾‘éå¸¸ç®€å•ï¼Œå…ˆä»é…ç½®æ–‡ä»¶è¯»å–é…ç½®ï¼Œå†é€šè¿‡å‘½ä»¤è¡Œå‚æ•°å¯¹æ„å»ºé…ç½®åšè¿‡æ»¤ï¼Œè¿™æ ·å°±å¯ä»¥æ„å»ºå‡ºä¸åŒç”¨é€”çš„ Vue.js äº†ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸‹é…ç½®æ–‡ä»¶ï¼Œåœ¨ <code>scripts/config.js</code> ä¸­ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> builds <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">// Runtime only (CommonJS). Used by bundlers e.g. Webpack &amp; Browserify</span>\n  <span class="token string-property property">&#39;web-runtime-cjs&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;web/entry-runtime.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">dest</span><span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;dist/vue.runtime.common.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&#39;cjs&#39;</span><span class="token punctuation">,</span>\n    banner\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token comment">// Runtime+compiler CommonJS build (CommonJS)</span>\n  <span class="token string-property property">&#39;web-full-cjs&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;web/entry-runtime-with-compiler.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">dest</span><span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;dist/vue.common.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&#39;cjs&#39;</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">he</span><span class="token operator">:</span> <span class="token string">&#39;./entity-decoder&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    banner\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token comment">// Runtime only (ES Modules). Used by bundlers that support ES Modules,</span>\n  <span class="token comment">// e.g. Rollup &amp; Webpack 2</span>\n  <span class="token string-property property">&#39;web-runtime-esm&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;web/entry-runtime.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">dest</span><span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;dist/vue.runtime.esm.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&#39;es&#39;</span><span class="token punctuation">,</span>\n    banner\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token comment">// Runtime+compiler CommonJS build (ES Modules)</span>\n  <span class="token string-property property">&#39;web-full-esm&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;web/entry-runtime-with-compiler.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">dest</span><span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;dist/vue.esm.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&#39;es&#39;</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">he</span><span class="token operator">:</span> <span class="token string">&#39;./entity-decoder&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    banner\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token comment">// runtime-only build (Browser)</span>\n  <span class="token string-property property">&#39;web-runtime-dev&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;web/entry-runtime.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">dest</span><span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;dist/vue.runtime.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&#39;umd&#39;</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">env</span><span class="token operator">:</span> <span class="token string">&#39;development&#39;</span><span class="token punctuation">,</span>\n    banner\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token comment">// runtime-only production build (Browser)</span>\n  <span class="token string-property property">&#39;web-runtime-prod&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;web/entry-runtime.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">dest</span><span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;dist/vue.runtime.min.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&#39;umd&#39;</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">env</span><span class="token operator">:</span> <span class="token string">&#39;production&#39;</span><span class="token punctuation">,</span>\n    banner\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token comment">// Runtime+compiler development build (Browser)</span>\n  <span class="token string-property property">&#39;web-full-dev&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;web/entry-runtime-with-compiler.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">dest</span><span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;dist/vue.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&#39;umd&#39;</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">env</span><span class="token operator">:</span> <span class="token string">&#39;development&#39;</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">he</span><span class="token operator">:</span> <span class="token string">&#39;./entity-decoder&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    banner\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token comment">// Runtime+compiler production build  (Browser)</span>\n  <span class="token string-property property">&#39;web-full-prod&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;web/entry-runtime-with-compiler.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">dest</span><span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;dist/vue.min.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&#39;umd&#39;</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">env</span><span class="token operator">:</span> <span class="token string">&#39;production&#39;</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">he</span><span class="token operator">:</span> <span class="token string">&#39;./entity-decoder&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    banner\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token comment">// ...</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œåˆ—ä¸¾äº†ä¸€äº› Vue.js æ„å»ºçš„é…ç½®ï¼Œå…³äºè¿˜æœ‰ä¸€äº›æœåŠ¡ç«¯æ¸²æŸ“ webpack æ’ä»¶ä»¥åŠ weex çš„æ‰“åŒ…é…ç½®å°±ä¸åˆ—ä¸¾äº†ã€‚</p>',12),r=(0,p.Uk)("å¯¹äºå•ä¸ªé…ç½®ï¼Œå®ƒæ˜¯éµå¾ª Rollup çš„æ„å»ºè§„åˆ™çš„ã€‚å…¶ä¸­ "),u=(0,p._)("code",null,"entry",-1),k=(0,p.Uk)(" å±æ€§è¡¨ç¤ºæ„å»ºçš„å…¥å£ JS æ–‡ä»¶åœ°å€ï¼Œ"),d=(0,p._)("code",null,"dest",-1),v=(0,p.Uk)(" å±æ€§è¡¨ç¤ºæ„å»ºåçš„ JS æ–‡ä»¶åœ°å€ã€‚"),m=(0,p._)("code",null,"format",-1),b=(0,p.Uk)(" å±æ€§è¡¨ç¤ºæ„å»ºçš„æ ¼å¼ï¼Œ"),y=(0,p._)("code",null,"cjs",-1),g=(0,p.Uk)(" è¡¨ç¤ºæ„å»ºå‡ºæ¥çš„æ–‡ä»¶éµå¾ª "),f={href:"http://wiki.commonjs.org/wiki/Modules/1.1",target:"_blank",rel:"noopener noreferrer"},h=(0,p.Uk)("CommonJS"),j=(0,p.Uk)(" è§„èŒƒï¼Œ"),w=(0,p._)("code",null,"es",-1),_=(0,p.Uk)(" è¡¨ç¤ºæ„å»ºå‡ºæ¥çš„æ–‡ä»¶éµå¾ª "),x={href:"http://exploringjs.com/es6/ch_modules.html",target:"_blank",rel:"noopener noreferrer"},V=(0,p.Uk)("ES Module"),R=(0,p.Uk)(" è§„èŒƒã€‚ "),U=(0,p._)("code",null,"umd",-1),q=(0,p.Uk)(" è¡¨ç¤ºæ„å»ºå‡ºæ¥çš„æ–‡ä»¶éµå¾ª "),S={href:"https://github.com/umdjs/umd",target:"_blank",rel:"noopener noreferrer"},C=(0,p.Uk)("UMD"),O=(0,p.Uk)(" è§„èŒƒã€‚"),J=(0,p.uE)('<p>ä»¥ <code>web-runtime-cjs</code> é…ç½®ä¸ºä¾‹ï¼Œå®ƒçš„ <code>entry</code> æ˜¯ <code>resolve(&#39;web/entry-runtime.js&#39;)</code>ï¼Œå…ˆæ¥çœ‹ä¸€ä¸‹ <code>resolve</code> å‡½æ•°çš„å®šä¹‰ã€‚</p><p>æºç ç›®å½•ï¼š<code>scripts/config.js</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> aliases <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./alias&#39;</span><span class="token punctuation">)</span>\n<span class="token keyword">const</span> <span class="token function-variable function">resolve</span> <span class="token operator">=</span> <span class="token parameter">p</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> base <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>aliases<span class="token punctuation">[</span>base<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>aliases<span class="token punctuation">[</span>base<span class="token punctuation">]</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>base<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;../&#39;</span><span class="token punctuation">,</span> p<span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œçš„ <code>resolve</code> å‡½æ•°å®ç°éå¸¸ç®€å•ï¼Œå®ƒå…ˆæŠŠ <code>resolve</code> å‡½æ•°ä¼ å…¥çš„å‚æ•° <code>p</code> é€šè¿‡ <code>/</code> åšäº†åˆ†å‰²æˆæ•°ç»„ï¼Œç„¶åå–æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ è®¾ç½®ä¸º <code>base</code>ã€‚åœ¨æˆ‘ä»¬è¿™ä¸ªä¾‹å­ä¸­ï¼Œå‚æ•° <code>p</code> æ˜¯ <code>web/entry-runtime.js</code>ï¼Œé‚£ä¹ˆ <code>base</code> åˆ™ä¸º <code>web</code>ã€‚<code>base</code> å¹¶ä¸æ˜¯å®é™…çš„è·¯å¾„ï¼Œå®ƒçš„çœŸå®è·¯å¾„å€ŸåŠ©äº†åˆ«åçš„é…ç½®ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹åˆ«åé…ç½®çš„ä»£ç ï¼Œåœ¨ <code>scripts/alias</code> ä¸­ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token literal-property property">vue</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;../src/platforms/web/entry-runtime-with-compiler&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token literal-property property">compiler</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;../src/compiler&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token literal-property property">core</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;../src/core&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token literal-property property">shared</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;../src/shared&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token literal-property property">web</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;../src/platforms/web&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token literal-property property">weex</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;../src/platforms/weex&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token literal-property property">server</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;../src/server&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token literal-property property">entries</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;../src/entries&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token literal-property property">sfc</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;../src/sfc&#39;</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¾ˆæ˜¾ç„¶ï¼Œè¿™é‡Œ <code>web</code> å¯¹åº”çš„çœŸå®çš„è·¯å¾„æ˜¯ <code>path.resolve(__dirname, &#39;../src/platforms/web&#39;)</code>ï¼Œè¿™ä¸ªè·¯å¾„å°±æ‰¾åˆ°äº† Vue.js æºç çš„ web ç›®å½•ã€‚ç„¶å <code>resolve</code> å‡½æ•°é€šè¿‡ <code>path.resolve(aliases[base], p.slice(base.length + 1))</code> æ‰¾åˆ°äº†æœ€ç»ˆè·¯å¾„ï¼Œå®ƒå°±æ˜¯ Vue.js æºç  web ç›®å½•ä¸‹çš„ <code>entry-runtime.js</code>ã€‚å› æ­¤ï¼Œ<code>web-runtime-cjs</code> é…ç½®å¯¹åº”çš„å…¥å£æ–‡ä»¶å°±æ‰¾åˆ°äº†ã€‚</p><p>å®ƒç»è¿‡ Rollup çš„æ„å»ºæ‰“åŒ…åï¼Œæœ€ç»ˆä¼šåœ¨ dist ç›®å½•ä¸‹ç”Ÿæˆ <code>vue.runtime.common.js</code>ã€‚</p><h2 id="runtime-only-vs-runtime-compiler" tabindex="-1"><a class="header-anchor" href="#runtime-only-vs-runtime-compiler" aria-hidden="true">#</a> Runtime Only VS Runtime + Compiler</h2><p>é€šå¸¸æˆ‘ä»¬åˆ©ç”¨ vue-cli å»åˆå§‹åŒ–æˆ‘ä»¬çš„ Vue.js é¡¹ç›®çš„æ—¶å€™ä¼šè¯¢é—®æˆ‘ä»¬ç”¨ Runtime Only ç‰ˆæœ¬çš„è¿˜æ˜¯ Runtime + Compiler ç‰ˆæœ¬ã€‚ä¸‹é¢æˆ‘ä»¬æ¥å¯¹æ¯”è¿™ä¸¤ä¸ªç‰ˆæœ¬ã€‚</p><ul><li>Runtime Only</li></ul><p>æˆ‘ä»¬åœ¨ä½¿ç”¨ Runtime Only ç‰ˆæœ¬çš„ Vue.js çš„æ—¶å€™ï¼Œé€šå¸¸éœ€è¦å€ŸåŠ©å¦‚ webpack çš„ vue-loader å·¥å…·æŠŠ .vue æ–‡ä»¶ç¼–è¯‘æˆ JavaScriptï¼Œå› ä¸ºæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µåšçš„ï¼Œæ‰€ä»¥å®ƒåªåŒ…å«è¿è¡Œæ—¶çš„ Vue.js ä»£ç ï¼Œå› æ­¤ä»£ç ä½“ç§¯ä¹Ÿä¼šæ›´è½»é‡ã€‚</p><ul><li>Runtime + Compiler</li></ul><p>æˆ‘ä»¬å¦‚æœæ²¡æœ‰å¯¹ä»£ç åšé¢„ç¼–è¯‘ï¼Œä½†åˆä½¿ç”¨äº† Vue çš„ template å±æ€§å¹¶ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåˆ™éœ€è¦åœ¨å®¢æˆ·ç«¯ç¼–è¯‘æ¨¡æ¿ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// éœ€è¦ç¼–è¯‘å™¨çš„ç‰ˆæœ¬</span>\n<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">&#39;&lt;div&gt;{{ hi }}&lt;/div&gt;&#39;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n<span class="token comment">// è¿™ç§æƒ…å†µä¸éœ€è¦</span>\n<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token parameter">h</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>hi<span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å› ä¸ºåœ¨ Vue.js 2.0 ä¸­ï¼Œæœ€ç»ˆæ¸²æŸ“éƒ½æ˜¯é€šè¿‡ <code>render</code> å‡½æ•°ï¼Œå¦‚æœå†™ <code>template</code> å±æ€§ï¼Œåˆ™éœ€è¦ç¼–è¯‘æˆ <code>render</code> å‡½æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªç¼–è¯‘è¿‡ç¨‹ä¼šå‘ç”Ÿè¿è¡Œæ—¶ï¼Œæ‰€ä»¥éœ€è¦å¸¦æœ‰ç¼–è¯‘å™¨çš„ç‰ˆæœ¬ã€‚</p><p>å¾ˆæ˜¾ç„¶ï¼Œè¿™ä¸ªç¼–è¯‘è¿‡ç¨‹å¯¹æ€§èƒ½ä¼šæœ‰ä¸€å®šæŸè€—ï¼Œæ‰€ä»¥é€šå¸¸æˆ‘ä»¬æ›´æ¨èä½¿ç”¨ Runtime-Only çš„ Vue.jsã€‚</p><h2 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“" aria-hidden="true">#</a> æ€»ç»“</h2><p>é€šè¿‡è¿™ä¸€èŠ‚çš„åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£åˆ° Vue.js çš„æ„å»ºæ‰“åŒ…è¿‡ç¨‹ï¼Œä¹ŸçŸ¥é“äº†ä¸åŒä½œç”¨å’ŒåŠŸèƒ½çš„ Vue.js å®ƒä»¬å¯¹åº”çš„å…¥å£ä»¥åŠæœ€ç»ˆç¼–è¯‘ç”Ÿæˆçš„ JS æ–‡ä»¶ã€‚å°½ç®¡åœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­æˆ‘ä»¬ä¼šç”¨ Runtime Only ç‰ˆæœ¬å¼€å‘æ¯”è¾ƒå¤šï¼Œä½†ä¸ºäº†åˆ†æ Vue çš„ç¼–è¯‘è¿‡ç¨‹ï¼Œæˆ‘ä»¬è¿™é—¨è¯¾é‡ç‚¹åˆ†æçš„æºç æ˜¯ Runtime + Compiler çš„ Vue.jsã€‚</p>',18),M={},N=(0,a(13860).Z)(M,[["render",function(n,s){const a=(0,p.up)("ExternalLinkIcon");return(0,p.wg)(),(0,p.iD)("div",null,[e,(0,p._)("p",null,[t,(0,p._)("a",o,[c,(0,p.Wm)(a)]),l]),i,(0,p._)("p",null,[r,u,k,d,v,m,b,y,g,(0,p._)("a",f,[h,(0,p.Wm)(a)]),j,w,_,(0,p._)("a",x,[V,(0,p.Wm)(a)]),R,U,q,(0,p._)("a",S,[C,(0,p.Wm)(a)]),O]),J])}]])},13860:(n,s)=>{s.Z=(n,s)=>{const a=n.__vccOpts||n;for(const[n,p]of s)a[n]=p;return a}},11021:(n,s,a)=>{a.r(s),a.d(s,{data:()=>p});const p=JSON.parse('{"key":"v-1a16d99d","path":"/vue2/prepare/build.html","title":"Vue.js æºç æ„å»º","lang":"zh-CN","frontmatter":{"author":"ustbhuangyi","summary":"Vue.js æºç æ„å»º Vue.js æºç æ˜¯åŸºäº Rollup æ„å»ºçš„ï¼Œå®ƒçš„æ„å»ºç›¸å…³é…ç½®éƒ½åœ¨ scripts ç›®å½•ä¸‹ã€‚ æ„å»ºè„šæœ¬ é€šå¸¸ä¸€ä¸ªåŸºäº NPM æ‰˜ç®¡çš„é¡¹ç›®éƒ½ä¼šæœ‰ä¸€ä¸ª package.json æ–‡ä»¶ï¼Œå®ƒæ˜¯å¯¹é¡¹ç›®çš„æè¿°æ–‡ä»¶ï¼Œå®ƒçš„å†…å®¹å®é™…ä¸Šæ˜¯ä¸€ä¸ªæ ‡å‡†çš„ JSON å¯¹è±¡ã€‚ æˆ‘ä»¬é€šå¸¸ä¼šé…ç½® script å­—æ®µä½œä¸º NPM çš„æ‰§è¡Œè„šæœ¬ï¼ŒVue.js æºç æ„å»ºçš„è„š","head":[["meta",{"property":"og:url","content":"https://0808200.xyz/vue2/prepare/build.html"}],["meta",{"property":"og:site_name","content":"ğ‘€ğ‘Ÿ.ğºğ‘œğ‘œğ‘”ğ‘¥â„"}],["meta",{"property":"og:title","content":"Vue.js æºç æ„å»º"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:updated_time","content":"2022-08-29T09:14:21.000Z"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:author","content":"ustbhuangyi"}],["meta",{"property":"article:modified_time","content":"2022-08-29T09:14:21.000Z"}]]},"excerpt":"","headers":[{"level":2,"title":"æ„å»ºè„šæœ¬","slug":"æ„å»ºè„šæœ¬","children":[]},{"level":2,"title":"æ„å»ºè¿‡ç¨‹","slug":"æ„å»ºè¿‡ç¨‹","children":[]},{"level":2,"title":"Runtime Only VS Runtime + Compiler","slug":"runtime-only-vs-runtime-compiler","children":[]},{"level":2,"title":"æ€»ç»“","slug":"æ€»ç»“","children":[]}],"git":{"createdTime":1661764461000,"updatedTime":1661764461000,"contributors":[{"name":"googxh","email":"gxh522@qq.com","commits":1}]},"readingTime":{"minutes":5.13,"words":1539},"filePathRelative":"vue2/prepare/build.md","localizedDate":"2022å¹´8æœˆ29æ—¥"}')}}]);