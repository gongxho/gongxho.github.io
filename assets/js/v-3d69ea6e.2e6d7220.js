"use strict";(self.webpackChunkmyblog=self.webpackChunkmyblog||[]).push([[73926],{58368:(e,n,a)=>{a.r(n),a.d(n,{default:()=>ye});var t=a(78e3);const r=(0,t.uE)('<p>ä¸Šä¸€èŠ‚æˆ‘ä»¬èŠåˆ°React15æ¶æ„ä¸èƒ½æ”¯æ’‘å¼‚æ­¥æ›´æ–°ä»¥è‡³äºéœ€è¦é‡æ„ã€‚é‚£ä¹ˆè¿™ä¸€èŠ‚æˆ‘ä»¬æ¥å­¦ä¹ é‡æ„åçš„React16æ˜¯å¦‚ä½•æ”¯æŒå¼‚æ­¥æ›´æ–°çš„ã€‚</p><h2 id="react16æ¶æ„" tabindex="-1"><a class="header-anchor" href="#react16æ¶æ„" aria-hidden="true">#</a> React16æ¶æ„</h2><p>React16æ¶æ„å¯ä»¥åˆ†ä¸ºä¸‰å±‚ï¼š</p><ul><li>Schedulerï¼ˆè°ƒåº¦å™¨ï¼‰â€”â€” è°ƒåº¦ä»»åŠ¡çš„ä¼˜å…ˆçº§ï¼Œé«˜ä¼˜ä»»åŠ¡ä¼˜å…ˆè¿›å…¥<strong>Reconciler</strong></li><li>Reconcilerï¼ˆåè°ƒå™¨ï¼‰â€”â€” è´Ÿè´£æ‰¾å‡ºå˜åŒ–çš„ç»„ä»¶</li><li>Rendererï¼ˆæ¸²æŸ“å™¨ï¼‰â€”â€” è´Ÿè´£å°†å˜åŒ–çš„ç»„ä»¶æ¸²æŸ“åˆ°é¡µé¢ä¸Š</li></ul><p>å¯ä»¥çœ‹åˆ°ï¼Œç›¸è¾ƒäºReact15ï¼ŒReact16ä¸­æ–°å¢äº†<strong>Schedulerï¼ˆè°ƒåº¦å™¨ï¼‰</strong>ï¼Œè®©æˆ‘ä»¬æ¥äº†è§£ä¸‹ä»–ã€‚</p><h3 id="scheduler-è°ƒåº¦å™¨" tabindex="-1"><a class="header-anchor" href="#scheduler-è°ƒåº¦å™¨" aria-hidden="true">#</a> Schedulerï¼ˆè°ƒåº¦å™¨ï¼‰</h3><p>æ—¢ç„¶æˆ‘ä»¬ä»¥æµè§ˆå™¨æ˜¯å¦æœ‰å‰©ä½™æ—¶é—´ä½œä¸ºä»»åŠ¡ä¸­æ–­çš„æ ‡å‡†ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ä¸€ç§æœºåˆ¶ï¼Œå½“æµè§ˆå™¨æœ‰å‰©ä½™æ—¶é—´æ—¶é€šçŸ¥æˆ‘ä»¬ã€‚</p>',7),s=(0,t.Uk)("å…¶å®éƒ¨åˆ†æµè§ˆå™¨å·²ç»å®ç°äº†è¿™ä¸ªAPIï¼Œè¿™å°±æ˜¯"),l={href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Window/requestIdleCallback",target:"_blank",rel:"noopener noreferrer"},o=(0,t.Uk)("requestIdleCallback"),c=(0,t.Uk)("ã€‚ä½†æ˜¯ç”±äºä»¥ä¸‹å› ç´ ï¼Œ"),p=(0,t._)("code",null,"React",-1),i=(0,t.Uk)("æ”¾å¼ƒä½¿ç”¨ï¼š"),u=(0,t.uE)("<ul><li>æµè§ˆå™¨å…¼å®¹æ€§</li><li>è§¦å‘é¢‘ç‡ä¸ç¨³å®šï¼Œå—å¾ˆå¤šå› ç´ å½±å“ã€‚æ¯”å¦‚å½“æˆ‘ä»¬çš„æµè§ˆå™¨åˆ‡æ¢tabåï¼Œä¹‹å‰tabæ³¨å†Œçš„<code>requestIdleCallback</code>è§¦å‘çš„é¢‘ç‡ä¼šå˜å¾—å¾ˆä½</li></ul><p>åŸºäºä»¥ä¸ŠåŸå› ï¼Œ<code>React</code>å®ç°äº†åŠŸèƒ½æ›´å®Œå¤‡çš„<code>requestIdleCallback</code>polyfillï¼Œè¿™å°±æ˜¯<strong>Scheduler</strong>ã€‚é™¤äº†åœ¨ç©ºé—²æ—¶è§¦å‘å›è°ƒçš„åŠŸèƒ½å¤–ï¼Œ<strong>Scheduler</strong>è¿˜æä¾›äº†å¤šç§è°ƒåº¦ä¼˜å…ˆçº§ä¾›ä»»åŠ¡è®¾ç½®ã€‚</p>",2),d={href:"https://github.com/facebook/react/blob/1fb18e22ae66fdb1dc127347e169e73948778e5a/packages/scheduler/README.md",target:"_blank",rel:"noopener noreferrer"},k=(0,t.Uk)("Scheduler"),m=(0,t.Uk)("æ˜¯ç‹¬ç«‹äº"),h=(0,t._)("code",null,"React",-1),g=(0,t.Uk)("çš„åº“"),b=(0,t._)("h3",{id:"reconciler-åè°ƒå™¨",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#reconciler-åè°ƒå™¨","aria-hidden":"true"},"#"),(0,t.Uk)(" Reconcilerï¼ˆåè°ƒå™¨ï¼‰")],-1),_=(0,t.Uk)("æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨React15ä¸­"),R=(0,t._)("strong",null,"Reconciler",-1),f=(0,t.Uk)("æ˜¯é€’å½’å¤„ç†è™šæ‹ŸDOMçš„ã€‚è®©æˆ‘ä»¬çœ‹çœ‹"),v={href:"https://github.com/facebook/react/blob/1fb18e22ae66fdb1dc127347e169e73948778e5a/packages/react-reconciler/src/ReactFiberWorkLoop.new.js#L1673",target:"_blank",rel:"noopener noreferrer"},U=(0,t.Uk)("React16çš„Reconciler"),w=(0,t.Uk)("ã€‚"),y=(0,t.uE)('<p>æˆ‘ä»¬å¯ä»¥çœ‹è§ï¼Œæ›´æ–°å·¥ä½œä»é€’å½’å˜æˆäº†å¯ä»¥ä¸­æ–­çš„å¾ªç¯è¿‡ç¨‹ã€‚æ¯æ¬¡å¾ªç¯éƒ½ä¼šè°ƒç”¨<code>shouldYield</code>åˆ¤æ–­å½“å‰æ˜¯å¦æœ‰å‰©ä½™æ—¶é—´ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token doc-comment comment">/** <span class="token keyword">@noinline</span> */</span>\n<span class="token keyword">function</span> <span class="token function">workLoopConcurrent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// Perform work until Scheduler asks us to yield</span>\n  <span class="token keyword">while</span> <span class="token punctuation">(</span>workInProgress <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">shouldYield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    workInProgress <span class="token operator">=</span> <span class="token function">performUnitOfWork</span><span class="token punctuation">(</span>workInProgress<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‚£ä¹ˆReact16æ˜¯å¦‚ä½•è§£å†³ä¸­æ–­æ›´æ–°æ—¶DOMæ¸²æŸ“ä¸å®Œå…¨çš„é—®é¢˜å‘¢ï¼Ÿ</p><p>åœ¨React16ä¸­ï¼Œ<strong>Reconciler</strong>ä¸<strong>Renderer</strong>ä¸å†æ˜¯äº¤æ›¿å·¥ä½œã€‚å½“<strong>Scheduler</strong>å°†ä»»åŠ¡äº¤ç»™<strong>Reconciler</strong>åï¼Œ<strong>Reconciler</strong>ä¼šä¸ºå˜åŒ–çš„è™šæ‹ŸDOMæ‰“ä¸Šä»£è¡¨å¢/åˆ /æ›´æ–°çš„æ ‡è®°ï¼Œç±»ä¼¼è¿™æ ·ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> Placement <span class="token operator">=</span> <span class="token comment">/*             */</span> <span class="token number">0b0000000000010</span><span class="token punctuation">;</span>\n<span class="token keyword">export</span> <span class="token keyword">const</span> Update <span class="token operator">=</span> <span class="token comment">/*                */</span> <span class="token number">0b0000000000100</span><span class="token punctuation">;</span>\n<span class="token keyword">export</span> <span class="token keyword">const</span> PlacementAndUpdate <span class="token operator">=</span> <span class="token comment">/*    */</span> <span class="token number">0b0000000000110</span><span class="token punctuation">;</span>\n<span class="token keyword">export</span> <span class="token keyword">const</span> Deletion <span class="token operator">=</span> <span class="token comment">/*              */</span> <span class="token number">0b0000000001000</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',5),x=(0,t.Uk)("å…¨éƒ¨çš„æ ‡è®°è§"),D={href:"https://github.com/facebook/react/blob/1fb18e22ae66fdb1dc127347e169e73948778e5a/packages/react-reconciler/src/ReactSideEffectTags.js",target:"_blank",rel:"noopener noreferrer"},S=(0,t.Uk)("è¿™é‡Œ"),C=(0,t._)("p",null,[(0,t.Uk)("æ•´ä¸ª"),(0,t._)("strong",null,"Scheduler"),(0,t.Uk)("ä¸"),(0,t._)("strong",null,"Reconciler"),(0,t.Uk)("çš„å·¥ä½œéƒ½åœ¨å†…å­˜ä¸­è¿›è¡Œã€‚åªæœ‰å½“æ‰€æœ‰ç»„ä»¶éƒ½å®Œæˆ"),(0,t._)("strong",null,"Reconciler"),(0,t.Uk)("çš„å·¥ä½œï¼Œæ‰ä¼šç»Ÿä¸€äº¤ç»™"),(0,t._)("strong",null,"Renderer"),(0,t.Uk)("ã€‚")],-1),W=(0,t.Uk)("ä½ å¯ä»¥åœ¨"),P={href:"https://zh-hans.reactjs.org/docs/codebase-overview.html#fiber-reconciler",target:"_blank",rel:"noopener noreferrer"},j=(0,t.Uk)("è¿™é‡Œ"),q=(0,t.Uk)("çœ‹åˆ°"),O=(0,t._)("code",null,"React",-1),I=(0,t.Uk)("å®˜æ–¹å¯¹React16æ–°"),M=(0,t._)("strong",null,"Reconciler",-1),E=(0,t.Uk)("çš„è§£é‡Š"),T=(0,t._)("h3",{id:"renderer-æ¸²æŸ“å™¨",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#renderer-æ¸²æŸ“å™¨","aria-hidden":"true"},"#"),(0,t.Uk)(" Rendererï¼ˆæ¸²æŸ“å™¨ï¼‰")],-1),z=(0,t._)("p",null,[(0,t._)("strong",null,"Renderer"),(0,t.Uk)("æ ¹æ®"),(0,t._)("strong",null,"Reconciler"),(0,t.Uk)("ä¸ºè™šæ‹ŸDOMæ‰“çš„æ ‡è®°ï¼ŒåŒæ­¥æ‰§è¡Œå¯¹åº”çš„DOMæ“ä½œã€‚")],-1),L=(0,t._)("p",null,"æ‰€ä»¥ï¼Œå¯¹äºæˆ‘ä»¬åœ¨ä¸Šä¸€èŠ‚ä½¿ç”¨è¿‡çš„Demo",-1),A={class:"custom-container details"},N=(0,t._)("summary",null,"ä¹˜æ³•å°Demo",-1),Z=(0,t.Uk)("å…³æ³¨å…¬ä¼—å·"),B=(0,t.Uk)("ï¼Œåå°å›å¤"),F=(0,t._)("strong",null,"222",-1),G=(0,t.Uk)("è·å¾—åœ¨çº¿Demoåœ°å€"),H=(0,t._)("p",null,[(0,t._)("code",null,"state.count = 1"),(0,t.Uk)("ï¼Œæ¯æ¬¡ç‚¹å‡»æŒ‰é’®"),(0,t._)("code",null,"state.count++")],-1),J=(0,t._)("p",null,[(0,t.Uk)("åˆ—è¡¨ä¸­3ä¸ªå…ƒç´ çš„å€¼åˆ†åˆ«ä¸º1ï¼Œ2ï¼Œ3ä¹˜ä»¥"),(0,t._)("code",null,"state.count"),(0,t.Uk)("çš„ç»“æœ")],-1),Y=(0,t._)("p",null,"åœ¨React16æ¶æ„ä¸­æ•´ä¸ªæ›´æ–°æµç¨‹ä¸ºï¼š",-1),V=["src"],$=(0,t._)("p",null,"å…¶ä¸­çº¢æ¡†ä¸­çš„æ­¥éª¤éšæ—¶å¯èƒ½ç”±äºä»¥ä¸‹åŸå› è¢«ä¸­æ–­ï¼š",-1),K=(0,t._)("ul",null,[(0,t._)("li",null,"æœ‰å…¶ä»–æ›´é«˜ä¼˜ä»»åŠ¡éœ€è¦å…ˆæ›´æ–°"),(0,t._)("li",null,"å½“å‰å¸§æ²¡æœ‰å‰©ä½™æ—¶é—´")],-1),Q=(0,t._)("p",null,"ç”±äºçº¢æ¡†ä¸­çš„å·¥ä½œéƒ½åœ¨å†…å­˜ä¸­è¿›è¡Œï¼Œä¸ä¼šæ›´æ–°é¡µé¢ä¸Šçš„DOMï¼Œæ‰€ä»¥å³ä½¿åå¤ä¸­æ–­ï¼Œç”¨æˆ·ä¹Ÿä¸ä¼šçœ‹è§æ›´æ–°ä¸å®Œå…¨çš„DOMï¼ˆå³ä¸Šä¸€èŠ‚æ¼”ç¤ºçš„æƒ…å†µï¼‰ã€‚",-1),X=(0,t.Uk)("å®é™…ä¸Šï¼Œç”±äº"),ee=(0,t._)("strong",null,"Scheduler",-1),ne=(0,t.Uk)("å’Œ"),ae=(0,t._)("strong",null,"Reconciler",-1),te=(0,t.Uk)("éƒ½æ˜¯å¹³å°æ— å…³çš„ï¼Œæ‰€ä»¥"),re=(0,t._)("code",null,"React",-1),se=(0,t.Uk)("ä¸ºä»–ä»¬å•ç‹¬å‘äº†ä¸€ä¸ªåŒ…"),le={href:"https://www.npmjs.com/package/react-reconciler",target:"_blank",rel:"noopener noreferrer"},oe=(0,t.Uk)("react-Reconciler"),ce=(0,t.Uk)("ã€‚ä½ å¯ä»¥ç”¨è¿™ä¸ªåŒ…è‡ªå·±å®ç°ä¸€ä¸ª"),pe=(0,t._)("code",null,"ReactDOM",-1),ie=(0,t.Uk)("ï¼Œå…·ä½“è§"),ue=(0,t._)("strong",null,"å‚è€ƒèµ„æ–™",-1),de=(0,t.uE)('<h2 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“" aria-hidden="true">#</a> æ€»ç»“</h2><p>é€šè¿‡æœ¬èŠ‚æˆ‘ä»¬çŸ¥é“äº†<code>React16</code>é‡‡ç”¨æ–°çš„<code>Reconciler</code>ã€‚</p><p><code>Reconciler</code>å†…éƒ¨é‡‡ç”¨äº†<code>Fiber</code>çš„æ¶æ„ã€‚</p><p><code>Fiber</code>æ˜¯ä»€ä¹ˆï¼Ÿä»–å’Œ<code>Reconciler</code>æˆ–è€…è¯´å’Œ<code>React</code>ä¹‹é—´æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿæˆ‘ä»¬ä¼šåœ¨æ¥ä¸‹æ¥ä¸‰èŠ‚è§£ç­”ã€‚</p><h2 id="å‚è€ƒèµ„æ–™" tabindex="-1"><a class="header-anchor" href="#å‚è€ƒèµ„æ–™" aria-hidden="true">#</a> å‚è€ƒèµ„æ–™</h2>',5),ke={href:"https://www.youtube.com/watch?v=CGpMlWVcHok&list=PLPxbbTqCLbGHPxZpw4xj_Wwg8-fdNxJRh&index=7",target:"_blank",rel:"noopener noreferrer"},me=(0,t.Uk)("ã€Œè‹±æ–‡ å¤–ç½‘ã€Building a Custom React Renderer | Reactå‰ç»ç†Sophie Alpert"),he={href:"https://agent-hunt.medium.com/hello-world-custom-react-renderer-9a95b7cd04bc",target:"_blank",rel:"noopener noreferrer"},ge=(0,t.Uk)("hello-world-custom-react-renderer"),be={class:"custom-container details"},_e=(0,t._)("summary",null,"åŒæ­¥/Debounce/Throttle/å¹¶å‘ æƒ…å†µä¸‹æ€§èƒ½å¯¹æ¯”Demo",-1),Re=(0,t.Uk)("å…³æ³¨å…¬ä¼—å·"),fe=(0,t.Uk)("ï¼Œåå°å›å¤"),ve=(0,t._)("strong",null,"323",-1),Ue=(0,t.Uk)("è·å¾—åœ¨çº¿Demoåœ°å€"),we={},ye=(0,a(13860).Z)(we,[["render",function(e,n){const a=(0,t.up)("ExternalLinkIcon"),we=(0,t.up)("RouterLink");return(0,t.wg)(),(0,t.iD)("div",null,[r,(0,t._)("p",null,[s,(0,t._)("a",l,[o,(0,t.Wm)(a)]),c,p,i]),u,(0,t._)("blockquote",null,[(0,t._)("p",null,[(0,t._)("a",d,[k,(0,t.Wm)(a)]),m,h,g])]),b,(0,t._)("p",null,[_,R,f,(0,t._)("a",v,[U,(0,t.Wm)(a)]),w]),y,(0,t._)("blockquote",null,[(0,t._)("p",null,[x,(0,t._)("a",D,[S,(0,t.Wm)(a)])])]),C,(0,t._)("blockquote",null,[(0,t._)("p",null,[W,(0,t._)("a",P,[j,(0,t.Wm)(a)]),q,O,I,M,E])]),T,z,L,(0,t._)("details",A,[N,(0,t._)("p",null,[(0,t.Wm)(we,{to:"/react/me.html"},{default:(0,t.w5)((()=>[Z])),_:1}),B,F,G]),H,J]),Y,(0,t._)("img",{src:e.$withBase("/img/process.png"),alt:"æ›´æ–°æµç¨‹"},null,8,V),$,K,Q,(0,t._)("blockquote",null,[(0,t._)("p",null,[X,ee,ne,ae,te,re,se,(0,t._)("a",le,[oe,(0,t.Wm)(a)]),ce,pe,ie,ue])]),de,(0,t._)("p",null,[(0,t._)("a",ke,[me,(0,t.Wm)(a)]),(0,t._)("a",he,[ge,(0,t.Wm)(a)])]),(0,t._)("details",be,[_e,(0,t._)("p",null,[(0,t.Wm)(we,{to:"/react/me.html"},{default:(0,t.w5)((()=>[Re])),_:1}),fe,ve,Ue])])])}]])},13860:(e,n)=>{n.Z=(e,n)=>{const a=e.__vccOpts||e;for(const[e,t]of n)a[e]=t;return a}},71858:(e,n,a)=>{a.r(n),a.d(n,{data:()=>t});const t=JSON.parse('{"key":"v-3d69ea6e","path":"/react/preparation/newConstructure.html","title":"æ–°çš„Reactæ¶æ„","lang":"zh-CN","frontmatter":{"title":"æ–°çš„Reactæ¶æ„","author":"BetaSu","tag":["React"],"summary":"ä¸Šä¸€èŠ‚æˆ‘ä»¬èŠåˆ°React15æ¶æ„ä¸èƒ½æ”¯æ’‘å¼‚æ­¥æ›´æ–°ä»¥è‡³äºéœ€è¦é‡æ„ã€‚é‚£ä¹ˆè¿™ä¸€èŠ‚æˆ‘ä»¬æ¥å­¦ä¹ é‡æ„åçš„React16æ˜¯å¦‚ä½•æ”¯æŒå¼‚æ­¥æ›´æ–°çš„ã€‚ React16æ¶æ„ React16æ¶æ„å¯ä»¥åˆ†ä¸ºä¸‰å±‚ï¼š Schedulerï¼ˆè°ƒåº¦å™¨ï¼‰â€”â€” è°ƒåº¦ä»»åŠ¡çš„ä¼˜å…ˆçº§ï¼Œé«˜ä¼˜ä»»åŠ¡ä¼˜å…ˆè¿›å…¥Reconciler; Reconcilerï¼ˆåè°ƒå™¨ï¼‰â€”â€” è´Ÿè´£æ‰¾å‡ºå˜åŒ–çš„ç»„ä»¶; Rendererï¼ˆæ¸²æŸ“å™¨ï¼‰","head":[["meta",{"property":"og:url","content":"https://0808200.xyz/react/preparation/newConstructure.html"}],["meta",{"property":"og:site_name","content":"ğ‘€ğ‘Ÿ.ğºğ‘œğ‘œğ‘”ğ‘¥â„"}],["meta",{"property":"og:title","content":"æ–°çš„Reactæ¶æ„"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:updated_time","content":"2022-08-29T09:14:21.000Z"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:author","content":"BetaSu"}],["meta",{"property":"article:tag","content":"React"}],["meta",{"property":"article:modified_time","content":"2022-08-29T09:14:21.000Z"}]]},"excerpt":"","headers":[{"level":2,"title":"React16æ¶æ„","slug":"react16æ¶æ„","children":[{"level":3,"title":"Schedulerï¼ˆè°ƒåº¦å™¨ï¼‰","slug":"scheduler-è°ƒåº¦å™¨","children":[]},{"level":3,"title":"Reconcilerï¼ˆåè°ƒå™¨ï¼‰","slug":"reconciler-åè°ƒå™¨","children":[]},{"level":3,"title":"Rendererï¼ˆæ¸²æŸ“å™¨ï¼‰","slug":"renderer-æ¸²æŸ“å™¨","children":[]}]},{"level":2,"title":"æ€»ç»“","slug":"æ€»ç»“","children":[]},{"level":2,"title":"å‚è€ƒèµ„æ–™","slug":"å‚è€ƒèµ„æ–™","children":[]}],"git":{"createdTime":1661764461000,"updatedTime":1661764461000,"contributors":[{"name":"googxh","email":"gxh522@qq.com","commits":1}]},"readingTime":{"minutes":3.43,"words":1029},"filePathRelative":"react/preparation/newConstructure.md","localizedDate":"2022å¹´8æœˆ29æ—¥"}')}}]);