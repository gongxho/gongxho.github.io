"use strict";(self.webpackChunkmyblog=self.webpackChunkmyblog||[]).push([[84945],{27584:(n,s,a)=>{a.r(s),a.d(s,{default:()=>o});var e=a(60329);const p=[(0,e.uE)('<h2 id="å‡½æ•°ä½œä¸ºè¿”å›å€¼" tabindex="-1"><a class="header-anchor" href="#å‡½æ•°ä½œä¸ºè¿”å›å€¼" aria-hidden="true">#</a> å‡½æ•°ä½œä¸ºè¿”å›å€¼</h2><p>é«˜é˜¶å‡½æ•°é™¤äº†å¯ä»¥æ¥å—å‡½æ•°ä½œä¸ºå‚æ•°å¤–ï¼Œè¿˜å¯ä»¥æŠŠå‡½æ•°ä½œä¸ºç»“æœå€¼è¿”å›ã€‚</p><p>æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªå¯å˜å‚æ•°çš„æ±‚å’Œã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæ±‚å’Œçš„å‡½æ•°æ˜¯è¿™æ ·å®šä¹‰çš„:</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">calc_sum</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">)</span><span class="token punctuation">:</span>\n    ax <span class="token operator">=</span> <span class="token number">0</span>\n    <span class="token keyword">for</span> n <span class="token keyword">in</span> args<span class="token punctuation">:</span>\n        ax <span class="token operator">=</span> ax <span class="token operator">+</span> n\n    <span class="token keyword">return</span> ax\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½†æ˜¯ï¼Œå¦‚æœä¸éœ€è¦ç«‹åˆ»æ±‚å’Œï¼Œè€Œæ˜¯åœ¨åé¢çš„ä»£ç ä¸­ï¼Œæ ¹æ®éœ€è¦å†è®¡ç®—æ€ä¹ˆåŠ? å¯ä»¥ä¸è¿”å›æ±‚å’Œçš„ç»“æœï¼Œè€Œæ˜¯è¿”å›æ±‚å’Œçš„å‡½æ•°:</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">lazy_sum</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">)</span><span class="token punctuation">:</span>\n    <span class="token keyword">def</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>\n        ax <span class="token operator">=</span> <span class="token number">0</span>\n        <span class="token keyword">for</span> n <span class="token keyword">in</span> args<span class="token punctuation">:</span>\n            ax <span class="token operator">=</span> ax <span class="token operator">+</span> n\n        <span class="token keyword">return</span> ax\n    <span class="token keyword">return</span> <span class="token builtin">sum</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“æˆ‘ä»¬è°ƒç”¨ <code>lazy_sum()</code> æ—¶ï¼Œè¿”å›çš„å¹¶ä¸æ˜¯æ±‚å’Œç»“æœï¼Œè€Œæ˜¯æ±‚å’Œå‡½æ•°:</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f <span class="token operator">=</span> lazy_sum<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>\n<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f\n<span class="token operator">&lt;</span>function lazy_sum<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token builtin">locals</span><span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token builtin">sum</span> at <span class="token number">0x101c6ed90</span><span class="token operator">&gt;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è°ƒç”¨å‡½æ•° <code>f</code> æ—¶ï¼Œæ‰çœŸæ­£è®¡ç®—æ±‚å’Œçš„ç»“æœ:</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f<span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token number">25</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åœ¨å‡½æ•° <code>lazy_sum</code> ä¸­åˆå®šä¹‰äº†å‡½æ•° <code>sum</code>ï¼Œå¹¶ä¸”ï¼Œå†…éƒ¨å‡½æ•° <code>sum</code> å¯ä»¥å¼•ç”¨å¤–éƒ¨å‡½æ•° <code>lazy_sum</code> çš„å‚æ•°å’Œå±€éƒ¨å˜é‡ï¼Œå½“ <code>lazy_sum</code> è¿”å›å‡½æ•° sum æ—¶ï¼Œç›¸å…³å‚æ•°å’Œå˜é‡éƒ½ä¿å­˜åœ¨è¿”å›çš„å‡½æ•°ä¸­ï¼Œè¿™ç§ç§°ä¸ºâ€œé—­åŒ…(Closure)â€çš„ç¨‹åºç»“æ„æ‹¥æœ‰æå¤§çš„å¨åŠ›ã€‚</p><p>è¯·å†æ³¨æ„ä¸€ç‚¹ï¼Œå½“æˆ‘ä»¬è°ƒç”¨ <code>lazy_sum()</code> æ—¶ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå³ä½¿ä¼ å…¥ç›¸åŒçš„å‚æ•°:</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f1 <span class="token operator">=</span> lazy_sum<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>\n<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f2 <span class="token operator">=</span> lazy_sum<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>\n<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f1<span class="token operator">==</span>f2\n<span class="token boolean">False</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>f1()</code> å’Œ <code>f2()</code> çš„è°ƒç”¨ç»“æœäº’ä¸å½±å“ã€‚</p><h2 id="é—­åŒ…" tabindex="-1"><a class="header-anchor" href="#é—­åŒ…" aria-hidden="true">#</a> é—­åŒ…</h2><p>æ³¨æ„åˆ°è¿”å›çš„å‡½æ•°åœ¨å…¶å®šä¹‰å†…éƒ¨å¼•ç”¨äº†å±€éƒ¨å˜é‡ <code>args</code>ï¼Œæ‰€ä»¥ï¼Œå½“ä¸€ä¸ªå‡½æ•°è¿”å›äº†ä¸€ä¸ªå‡½æ•°åï¼Œå…¶å†…éƒ¨çš„å±€éƒ¨å˜é‡è¿˜è¢«æ–°å‡½æ•°å¼•ç”¨ï¼Œæ‰€ä»¥ï¼Œé—­åŒ…ç”¨èµ·æ¥ç®€å•ï¼Œå®ç°èµ·æ¥å¯ä¸å®¹æ˜“ã€‚</p><p>å¦ä¸€ä¸ªéœ€è¦æ³¨æ„çš„é—®é¢˜æ˜¯ï¼Œè¿”å›çš„å‡½æ•°å¹¶æ²¡æœ‰ç«‹åˆ»æ‰§è¡Œï¼Œè€Œæ˜¯ç›´åˆ°è°ƒç”¨äº† <code>f()</code> æ‰æ‰§è¡Œã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­:</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>\n    fs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>\n    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">:</span>\n        <span class="token keyword">def</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>\n             <span class="token keyword">return</span> i<span class="token operator">*</span>i\n        fs<span class="token punctuation">.</span>append<span class="token punctuation">(</span>f<span class="token punctuation">)</span>\n    <span class="token keyword">return</span> fs\n\nf1<span class="token punctuation">,</span> f2<span class="token punctuation">,</span> f3 <span class="token operator">=</span> count<span class="token punctuation">(</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæ¯æ¬¡å¾ªç¯ï¼Œéƒ½åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œç„¶åï¼ŒæŠŠåˆ›å»ºçš„ 3 ä¸ªå‡½æ•°éƒ½è¿”å›äº†ã€‚</p><p>æ‚¨å¯èƒ½è®¤ä¸ºè°ƒç”¨ <code>f1()</code>ï¼Œ<code>f2()</code> å’Œ <code>f3()</code> ç»“æœåº”è¯¥æ˜¯ <code>1</code>ï¼Œ<code>4</code>ï¼Œ<code>9</code>ï¼Œä½†å®é™…ç»“æœæ˜¯:</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f1<span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token number">9</span>\n<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f2<span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token number">9</span>\n<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f3<span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token number">9</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¨éƒ¨éƒ½æ˜¯ <code>9</code>! åŸå› å°±åœ¨äºè¿”å›çš„å‡½æ•°å¼•ç”¨äº†å˜é‡ <code>i</code>ï¼Œä½†å®ƒå¹¶éç«‹åˆ»æ‰§è¡Œã€‚ç­‰åˆ° 3 ä¸ªå‡½æ•°éƒ½è¿”å›æ—¶ï¼Œå®ƒä»¬æ‰€å¼•ç”¨çš„å˜é‡ <code>i</code> å·²ç»å˜æˆäº† <code>3</code>ï¼Œå› æ­¤æœ€ç»ˆç»“æœä¸º <code>9</code>ã€‚</p><div class="custom-container warning"><p class="custom-container-title">æ³¨æ„</p><p>è¿”å›é—­åŒ…æ—¶ç‰¢è®°ä¸€ç‚¹:è¿”å›å‡½æ•°ä¸è¦å¼•ç”¨ä»»ä½•å¾ªç¯å˜é‡ï¼Œæˆ–è€…åç»­ä¼šå‘ç”Ÿå˜åŒ–çš„å˜é‡ã€‚</p></div><p>å¦‚æœä¸€å®šè¦å¼•ç”¨å¾ªç¯å˜é‡æ€ä¹ˆåŠ? æ–¹æ³•æ˜¯å†åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œç”¨è¯¥å‡½æ•°çš„å‚æ•°ç»‘å®šå¾ªç¯å˜é‡å½“å‰çš„å€¼ï¼Œæ— è®ºè¯¥å¾ªç¯å˜é‡åç»­å¦‚ä½•æ›´æ”¹ï¼Œå·²ç»‘å®šåˆ°å‡½æ•°å‚æ•°çš„å€¼ä¸å˜:</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>\n    <span class="token keyword">def</span> <span class="token function">f</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">:</span>\n        <span class="token keyword">def</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>\n            <span class="token keyword">return</span> j<span class="token operator">*</span>j\n        <span class="token keyword">return</span> g\n    fs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>\n    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">:</span>\n        fs<span class="token punctuation">.</span>append<span class="token punctuation">(</span>f<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># f(i)ç«‹åˆ»è¢«æ‰§è¡Œï¼Œå› æ­¤içš„å½“å‰å€¼è¢«ä¼ å…¥f()</span>\n    <span class="token keyword">return</span> fs\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†çœ‹çœ‹ç»“æœ:</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f1<span class="token punctuation">,</span> f2<span class="token punctuation">,</span> f3 <span class="token operator">=</span> count<span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f1<span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token number">1</span>\n<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f2<span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token number">4</span>\n<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f3<span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token number">9</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¼ºç‚¹æ˜¯ä»£ç è¾ƒé•¿ï¼Œå¯åˆ©ç”¨ lambda å‡½æ•°ç¼©çŸ­ä»£ç ã€‚</p><h2 id="å°ç»“" tabindex="-1"><a class="header-anchor" href="#å°ç»“" aria-hidden="true">#</a> å°ç»“</h2><p>ä¸€ä¸ªå‡½æ•°å¯ä»¥è¿”å›ä¸€ä¸ªè®¡ç®—ç»“æœï¼Œä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ªå‡½æ•°ã€‚</p><p>è¿”å›ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œç‰¢è®°è¯¥å‡½æ•°å¹¶æœªæ‰§è¡Œï¼Œè¿”å›å‡½æ•°ä¸­ä¸è¦å¼•ç”¨ä»»ä½•å¯èƒ½ä¼šå˜åŒ–çš„å˜é‡ã€‚</p>',31)],t={},o=(0,a(13860).Z)(t,[["render",function(n,s){return(0,e.wg)(),(0,e.iD)("div",null,p)}]])},13860:(n,s)=>{s.Z=(n,s)=>{const a=n.__vccOpts||n;for(const[n,e]of s)a[n]=e;return a}},49303:(n,s,a)=>{a.r(s),a.d(s,{data:()=>e});const e=JSON.parse('{"key":"v-7b8e695f","path":"/code/language/python/functional-programming/return-function.html","title":"è¿”å›å‡½æ•°","lang":"zh-CN","frontmatter":{"title":"è¿”å›å‡½æ•°","icon":"return","author":"å»–é›ªå³°","date":"2020-06-02T00:00:00.000Z","category":["Python"],"summary":"å‡½æ•°ä½œä¸ºè¿”å›å€¼ é«˜é˜¶å‡½æ•°é™¤äº†å¯ä»¥æ¥å—å‡½æ•°ä½œä¸ºå‚æ•°å¤–ï¼Œè¿˜å¯ä»¥æŠŠå‡½æ•°ä½œä¸ºç»“æœå€¼è¿”å›ã€‚ æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªå¯å˜å‚æ•°çš„æ±‚å’Œã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæ±‚å’Œçš„å‡½æ•°æ˜¯è¿™æ ·å®šä¹‰çš„: ä½†æ˜¯ï¼Œå¦‚æœä¸éœ€è¦ç«‹åˆ»æ±‚å’Œï¼Œè€Œæ˜¯åœ¨åé¢çš„ä»£ç ä¸­ï¼Œæ ¹æ®éœ€è¦å†è®¡ç®—æ€ä¹ˆåŠ? å¯ä»¥ä¸è¿”å›æ±‚å’Œçš„ç»“æœï¼Œè€Œæ˜¯è¿”å›æ±‚å’Œçš„å‡½æ•°: å½“æˆ‘ä»¬è°ƒç”¨ lazy_sum() æ—¶ï¼Œè¿”å›çš„å¹¶ä¸æ˜¯æ±‚å’Œç»“æœï¼Œè€Œæ˜¯æ±‚å’Œå‡½æ•°: è°ƒç”¨å‡½æ•° f æ—¶ï¼Œæ‰","head":[["meta",{"property":"og:url","content":"https://0808200.xyz/code/language/python/functional-programming/return-function.html"}],["meta",{"property":"og:site_name","content":"ğ‘€ğ‘Ÿ.ğ‘”ğ‘œğ‘œğ‘”ğ‘¥â„"}],["meta",{"property":"og:title","content":"è¿”å›å‡½æ•°"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:updated_time","content":"2022-06-27T09:33:50.000Z"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:author","content":"å»–é›ªå³°"}],["meta",{"property":"article:published_time","content":"2020-06-02T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2022-06-27T09:33:50.000Z"}]]},"excerpt":"","headers":[{"level":2,"title":"å‡½æ•°ä½œä¸ºè¿”å›å€¼","slug":"å‡½æ•°ä½œä¸ºè¿”å›å€¼","children":[]},{"level":2,"title":"é—­åŒ…","slug":"é—­åŒ…","children":[]},{"level":2,"title":"å°ç»“","slug":"å°ç»“","children":[]}],"git":{"createdTime":1656322430000,"updatedTime":1656322430000,"contributors":[{"name":"googxh","email":"gxh522@qq.com","commits":1}]},"readingTime":{"minutes":2.88,"words":864},"filePathRelative":"code/language/python/functional-programming/return-function.md","localizedDate":"2020å¹´6æœˆ2æ—¥"}')}}]);