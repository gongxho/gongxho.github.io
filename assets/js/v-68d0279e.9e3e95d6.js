"use strict";(self.webpackChunkmyblog=self.webpackChunkmyblog||[]).push([[55677],{97290:(n,s,a)=>{a.r(s),a.d(s,{default:()=>c});var e=a(60329);const t=[(0,e.uE)('<h3 id="å¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜" aria-hidden="true">#</a> å¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜</h3><hr><p><strong>JSONPï¼š</strong></p><ul><li>åŸç†æ˜¯ï¼šåŠ¨æ€æ’å…¥<code>script</code>æ ‡ç­¾ï¼Œé€šè¿‡<code>script</code>æ ‡ç­¾å¼•å…¥ä¸€ä¸ª<code>js</code>æ–‡ä»¶ï¼Œè¿™ä¸ª<code>js</code>æ–‡ä»¶è½½å…¥æˆåŠŸåä¼šæ‰§è¡Œæˆ‘ä»¬åœ¨<code>url</code>å‚æ•°ä¸­æŒ‡å®šçš„å‡½æ•°ï¼Œå¹¶ä¸”ä¼šæŠŠæˆ‘ä»¬éœ€è¦çš„<code>json</code>æ•°æ®ä½œä¸ºå‚æ•°ä¼ å…¥</li><li>ç”±äºåŒæºç­–ç•¥çš„é™åˆ¶ï¼Œ<code>XmlHttpRequest</code>åªå…è®¸è¯·æ±‚å½“å‰æºï¼ˆåŸŸåã€åè®®ã€ç«¯å£ï¼‰çš„èµ„æºï¼Œä¸ºäº†å®ç°è·¨åŸŸè¯·æ±‚ï¼Œå¯ä»¥é€šè¿‡<code>script</code>æ ‡ç­¾å®ç°è·¨åŸŸè¯·æ±‚ï¼Œç„¶ååœ¨æœåŠ¡ç«¯è¾“å‡º<code>JSON</code>æ•°æ®å¹¶æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œä»è€Œè§£å†³äº†è·¨åŸŸçš„æ•°æ®è¯·æ±‚</li><li>ä¼˜ç‚¹æ˜¯å…¼å®¹æ€§å¥½ï¼Œç®€å•æ˜“ç”¨ï¼Œæ”¯æŒæµè§ˆå™¨ä¸æœåŠ¡å™¨åŒå‘é€šä¿¡ã€‚ç¼ºç‚¹æ˜¯åªæ”¯æŒGETè¯·æ±‚</li><li><code>JSONP</code>ï¼š<code>json+padding</code>ï¼ˆå†…å¡«å……ï¼‰ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯æŠŠ<code>JSON</code>å¡«å……åˆ°ä¸€ä¸ªç›’å­é‡Œ</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  <span class="token keyword">function</span> <span class="token function">createJs</span><span class="token punctuation">(</span><span class="token parameter">sUrl</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n\n      <span class="token keyword">var</span> oScript <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;script&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      oScript<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">&#39;text/javascript&#39;</span><span class="token punctuation">;</span>\n      oScript<span class="token punctuation">.</span>src <span class="token operator">=</span> sUrl<span class="token punctuation">;</span>\n      document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&#39;head&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>oScript<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">createJs</span><span class="token punctuation">(</span><span class="token string">&#39;jsonp.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token function">box</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n     <span class="token string-property property">&#39;name&#39;</span><span class="token operator">:</span> <span class="token string">&#39;test&#39;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">function</span> <span class="token function">box</span><span class="token punctuation">(</span><span class="token parameter">json</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n      <span class="token function">alert</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>CORS</strong></p><ul><li>æœåŠ¡å™¨ç«¯å¯¹äº<code>CORS</code>çš„æ”¯æŒï¼Œä¸»è¦å°±æ˜¯é€šè¿‡è®¾ç½®<code>Access-Control-Allow-Origin</code>æ¥è¿›è¡Œçš„ã€‚å¦‚æœæµè§ˆå™¨æ£€æµ‹åˆ°ç›¸åº”çš„è®¾ç½®ï¼Œå°±å¯ä»¥å…è®¸<code>Ajax</code>è¿›è¡Œè·¨åŸŸçš„è®¿é—®</li></ul><p><strong>é€šè¿‡ä¿®æ”¹document.domainæ¥è·¨å­åŸŸ</strong></p><ul><li>å°†å­åŸŸå’Œä¸»åŸŸçš„<code>document.domain</code>è®¾ä¸ºåŒä¸€ä¸ªä¸»åŸŸ.å‰ææ¡ä»¶ï¼šè¿™ä¸¤ä¸ªåŸŸåå¿…é¡»å±äºåŒä¸€ä¸ªåŸºç¡€åŸŸå!è€Œä¸”æ‰€ç”¨çš„åè®®ï¼Œç«¯å£éƒ½è¦ä¸€è‡´ï¼Œå¦åˆ™æ— æ³•åˆ©ç”¨<code>document.domain</code>è¿›è¡Œè·¨åŸŸã€‚ä¸»åŸŸç›¸åŒçš„ä½¿ç”¨<code>document.domain</code></li></ul><p><strong>ä½¿ç”¨window.nameæ¥è¿›è¡Œè·¨åŸŸ</strong></p><ul><li><code>window</code>å¯¹è±¡æœ‰ä¸ªnameå±æ€§ï¼Œè¯¥å±æ€§æœ‰ä¸ªç‰¹å¾ï¼šå³åœ¨ä¸€ä¸ªçª—å£(<code>window</code>)çš„ç”Ÿå‘½å‘¨æœŸå†…,çª—å£è½½å…¥çš„æ‰€æœ‰çš„é¡µé¢éƒ½æ˜¯å…±äº«ä¸€ä¸ª<code>window.name</code>çš„ï¼Œæ¯ä¸ªé¡µé¢å¯¹window.nameéƒ½æœ‰è¯»å†™çš„æƒé™ï¼Œ<code>window.name</code>æ˜¯æŒä¹…å­˜åœ¨ä¸€ä¸ªçª—å£è½½å…¥è¿‡çš„æ‰€æœ‰é¡µé¢ä¸­çš„</li></ul><p><strong>ä½¿ç”¨HTML5ä¸­æ–°å¼•è¿›çš„window.postMessageæ–¹æ³•æ¥è·¨åŸŸä¼ é€æ•°æ®</strong></p><ul><li>è¿˜æœ‰<code>flash</code>ã€åœ¨æœåŠ¡å™¨ä¸Šè®¾ç½®ä»£ç†é¡µé¢ç­‰è·¨åŸŸæ–¹å¼ã€‚ä¸ªäººè®¤ä¸º<code>window.name</code>çš„æ–¹æ³•æ—¢ä¸å¤æ‚ï¼Œä¹Ÿèƒ½å…¼å®¹åˆ°å‡ ä¹æ‰€æœ‰æµè§ˆå™¨ï¼Œè¿™çœŸæ˜¯æå¥½çš„ä¸€ç§è·¨åŸŸæ–¹æ³•</li></ul><p><strong>å¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜?</strong></p><ul><li><p><code>jsonp</code>ã€ <code>iframe</code>ã€<code>window.name</code>ã€<code>window.postMessage</code>ã€æœåŠ¡å™¨ä¸Šè®¾ç½®ä»£ç†é¡µé¢</p></li><li><p>å¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜?</p><ul><li><code>document.domain + iframe</code>ï¼šè¦æ±‚ä¸»åŸŸåç›¸åŒ //åªèƒ½è·¨å­åŸŸ</li><li><code>JSONP(JSON with Padding)``ï¼š</code>response: callback(data)`` //åªæ”¯æŒ GET è¯·æ±‚</li><li>è·¨åŸŸèµ„æºå…±äº«<code>CORS(XHR2)``ï¼š</code>Access-Control-Allow` //å…¼å®¹æ€§ IE10+</li><li>è·¨æ–‡æ¡£æ¶ˆæ¯ä¼ è¾“(HTML5)ï¼š<code>postMessage + onmessage</code> //å…¼å®¹æ€§ IE8+</li><li><code>WebSocket(HTML5)ï¼šnew WebSocket(url) + onmessage</code> //å…¼å®¹æ€§ IE10+</li><li>æœåŠ¡å™¨ç«¯è®¾ç½®ä»£ç†è¯·æ±‚ï¼šæœåŠ¡å™¨ç«¯ä¸å—åŒæºç­–ç•¥é™åˆ¶</li></ul></li></ul>',15)],o={},c=(0,a(13860).Z)(o,[["render",function(n,s){return(0,e.wg)(),(0,e.iD)("div",null,t)}]])},13860:(n,s)=>{s.Z=(n,s)=>{const a=n.__vccOpts||n;for(const[n,e]of s)a[n]=e;return a}},30250:(n,s,a)=>{a.r(s),a.d(s,{data:()=>e});const e=JSON.parse('{"key":"v-68d0279e","path":"/Interview/base/cross-domain.html","title":"å¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜ï¼Ÿ","lang":"zh-CN","frontmatter":{"title":"å¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜ï¼Ÿ","icon":null,"date":"2022-12-15T00:00:00.000Z","category":["Interview"],"summary":"å¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜ --- JSONPï¼š åŸç†æ˜¯ï¼šåŠ¨æ€æ’å…¥scriptæ ‡ç­¾ï¼Œé€šè¿‡scriptæ ‡ç­¾å¼•å…¥ä¸€ä¸ªjsæ–‡ä»¶ï¼Œè¿™ä¸ªjsæ–‡ä»¶è½½å…¥æˆåŠŸåä¼šæ‰§è¡Œæˆ‘ä»¬åœ¨urlå‚æ•°ä¸­æŒ‡å®šçš„å‡½æ•°ï¼Œå¹¶ä¸”ä¼šæŠŠæˆ‘ä»¬éœ€è¦çš„jsonæ•°æ®ä½œä¸ºå‚æ•°ä¼ å…¥; ç”±äºåŒæºç­–ç•¥çš„é™åˆ¶ï¼ŒXmlHttpRequeståªå…è®¸è¯·æ±‚å½“å‰æºï¼ˆåŸŸåã€åè®®ã€ç«¯å£ï¼‰çš„èµ„æºï¼Œä¸ºäº†å®ç°è·¨åŸŸè¯·æ±‚ï¼Œå¯ä»¥é€šè¿‡scriptæ ‡ç­¾å®ç°è·¨åŸŸè¯·","head":[["meta",{"property":"og:url","content":"https://0808200.xyz/Interview/base/cross-domain.html"}],["meta",{"property":"og:site_name","content":"ğ‘€ğ‘Ÿ.ğ‘”ğ‘œğ‘œğ‘”ğ‘¥â„"}],["meta",{"property":"og:title","content":"å¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜ï¼Ÿ"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:updated_time","content":"2023-01-17T08:24:10.000Z"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:published_time","content":"2022-12-15T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-01-17T08:24:10.000Z"}]]},"excerpt":"","headers":[{"level":3,"title":"å¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜","slug":"å¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜","children":[]}],"git":{"createdTime":1673943850000,"updatedTime":1673943850000,"contributors":[{"name":"googxh","email":"gxh522@qq.com","commits":1}]},"readingTime":{"minutes":2.15,"words":644},"filePathRelative":"Interview/base/cross-domain.md","localizedDate":"2022å¹´12æœˆ15æ—¥"}')}}]);