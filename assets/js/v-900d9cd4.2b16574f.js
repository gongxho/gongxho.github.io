"use strict";(self.webpackChunkmyblog=self.webpackChunkmyblog||[]).push([[35247],{38876:(n,s,a)=>{a.r(s),a.d(s,{default:()=>nn});var e=a(78e3);const t=(0,e.Uk)("åœ¨"),p=(0,e.Uk)("æ–°çš„Reactæ¶æ„ä¸€èŠ‚"),o=(0,e.Uk)("ä¸­ï¼Œæˆ‘ä»¬æåˆ°çš„"),c=(0,e._)("strong",null,"è™šæ‹ŸDOM",-1),l=(0,e.Uk)("åœ¨"),i=(0,e._)("code",null,"React",-1),r=(0,e.Uk)("ä¸­æœ‰ä¸ªæ­£å¼çš„ç§°å‘¼â€”â€”"),d=(0,e._)("code",null,"Fiber",-1),u=(0,e.Uk)("ã€‚åœ¨ä¹‹åçš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬ä¼šé€æ¸ç”¨"),k=(0,e._)("code",null,"Fiber",-1),v=(0,e.Uk)("æ¥å–ä»£"),m=(0,e._)("strong",null,"React16è™šæ‹ŸDOM",-1),b=(0,e.Uk)("è¿™ä¸€ç§°å‘¼ã€‚"),h=(0,e._)("p",null,[(0,e.Uk)("æ¥ä¸‹æ¥è®©æˆ‘ä»¬äº†è§£ä¸‹"),(0,e._)("code",null,"Fiber"),(0,e.Uk)("å› ä½•è€Œæ¥ï¼Ÿä»–çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ")],-1),y=(0,e._)("h2",{id:"fiberçš„èµ·æº",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#fiberçš„èµ·æº","aria-hidden":"true"},"#"),(0,e.Uk)(" Fiberçš„èµ·æº")],-1),g=(0,e.Uk)("æœ€æ—©çš„"),w=(0,e._)("code",null,"Fiber",-1),f=(0,e.Uk)("å®˜æ–¹è§£é‡Šæ¥æºäº"),F={href:"https://github.com/acdlite/react-fiber-architecture",target:"_blank",rel:"noopener noreferrer"},_=(0,e.Uk)("2016å¹´Reactå›¢é˜Ÿæˆå‘˜Acdliteçš„ä¸€ç¯‡ä»‹ç»"),U=(0,e.Uk)("ã€‚"),R=(0,e.uE)('<p>ä»ä¸Šä¸€ç« çš„å­¦ä¹ æˆ‘ä»¬çŸ¥é“ï¼š</p><p>åœ¨<code>React15</code>åŠä»¥å‰ï¼Œ<code>Reconciler</code>é‡‡ç”¨é€’å½’çš„æ–¹å¼åˆ›å»ºè™šæ‹ŸDOMï¼Œé€’å½’è¿‡ç¨‹æ˜¯ä¸èƒ½ä¸­æ–­çš„ã€‚å¦‚æœç»„ä»¶æ ‘çš„å±‚çº§å¾ˆæ·±ï¼Œé€’å½’ä¼šå ç”¨çº¿ç¨‹å¾ˆå¤šæ—¶é—´ï¼Œé€ æˆå¡é¡¿ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ<code>React16</code>å°†<strong>é€’å½’çš„æ— æ³•ä¸­æ–­çš„æ›´æ–°</strong>é‡æ„ä¸º<strong>å¼‚æ­¥çš„å¯ä¸­æ–­æ›´æ–°</strong>ï¼Œç”±äºæ›¾ç»ç”¨äºé€’å½’çš„<strong>è™šæ‹ŸDOM</strong>æ•°æ®ç»“æ„å·²ç»æ— æ³•æ»¡è¶³éœ€è¦ã€‚äºæ˜¯ï¼Œå…¨æ–°çš„<code>Fiber</code>æ¶æ„åº”è¿è€Œç”Ÿã€‚</p><h2 id="fiberçš„å«ä¹‰" tabindex="-1"><a class="header-anchor" href="#fiberçš„å«ä¹‰" aria-hidden="true">#</a> Fiberçš„å«ä¹‰</h2><p><code>Fiber</code>åŒ…å«ä¸‰å±‚å«ä¹‰ï¼š</p><ol><li><p>ä½œä¸ºæ¶æ„æ¥è¯´ï¼Œä¹‹å‰<code>React15</code>çš„<code>Reconciler</code>é‡‡ç”¨é€’å½’çš„æ–¹å¼æ‰§è¡Œï¼Œæ•°æ®ä¿å­˜åœ¨é€’å½’è°ƒç”¨æ ˆä¸­ï¼Œæ‰€ä»¥è¢«ç§°ä¸º<code>stack Reconciler</code>ã€‚<code>React16</code>çš„<code>Reconciler</code>åŸºäº<code>FiberèŠ‚ç‚¹</code>å®ç°ï¼Œè¢«ç§°ä¸º<code>Fiber Reconciler</code>ã€‚</p></li><li><p>ä½œä¸ºé™æ€çš„æ•°æ®ç»“æ„æ¥è¯´ï¼Œæ¯ä¸ª<code>FiberèŠ‚ç‚¹</code>å¯¹åº”ä¸€ä¸ª<code>React element</code>ï¼Œä¿å­˜äº†è¯¥ç»„ä»¶çš„ç±»å‹ï¼ˆå‡½æ•°ç»„ä»¶/ç±»ç»„ä»¶/åŸç”Ÿç»„ä»¶...ï¼‰ã€å¯¹åº”çš„DOMèŠ‚ç‚¹ç­‰ä¿¡æ¯ã€‚</p></li><li><p>ä½œä¸ºåŠ¨æ€çš„å·¥ä½œå•å…ƒæ¥è¯´ï¼Œæ¯ä¸ª<code>FiberèŠ‚ç‚¹</code>ä¿å­˜äº†æœ¬æ¬¡æ›´æ–°ä¸­è¯¥ç»„ä»¶æ”¹å˜çš„çŠ¶æ€ã€è¦æ‰§è¡Œçš„å·¥ä½œï¼ˆéœ€è¦è¢«åˆ é™¤/è¢«æ’å…¥é¡µé¢ä¸­/è¢«æ›´æ–°...ï¼‰ã€‚</p></li></ol><h2 id="fiberçš„ç»“æ„" tabindex="-1"><a class="header-anchor" href="#fiberçš„ç»“æ„" aria-hidden="true">#</a> Fiberçš„ç»“æ„</h2>',7),x=(0,e.Uk)("ä½ å¯ä»¥ä»è¿™é‡Œçœ‹åˆ°"),j={href:"https://github.com/facebook/react/blob/1fb18e22ae66fdb1dc127347e169e73948778e5a/packages/react-reconciler/src/ReactFiber.new.js#L117",target:"_blank",rel:"noopener noreferrer"},O=(0,e.Uk)("FiberèŠ‚ç‚¹çš„å±æ€§å®šä¹‰"),C=(0,e.Uk)("ã€‚è™½ç„¶å±æ€§å¾ˆå¤šï¼Œä½†æˆ‘ä»¬å¯ä»¥æŒ‰ä¸‰å±‚å«ä¹‰å°†ä»–ä»¬åˆ†ç±»æ¥çœ‹"),D=(0,e.uE)('<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">FiberNode</span><span class="token punctuation">(</span>\n  <span class="token parameter"><span class="token literal-property property">tag</span><span class="token operator">:</span> WorkTag<span class="token punctuation">,</span>\n  <span class="token literal-property property">pendingProps</span><span class="token operator">:</span> mixed<span class="token punctuation">,</span>\n  <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token keyword">null</span> <span class="token operator">|</span> string<span class="token punctuation">,</span>\n  <span class="token literal-property property">mode</span><span class="token operator">:</span> TypeOfMode<span class="token punctuation">,</span></span>\n<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// ä½œä¸ºé™æ€æ•°æ®ç»“æ„çš„å±æ€§</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>tag <span class="token operator">=</span> tag<span class="token punctuation">;</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>key <span class="token operator">=</span> key<span class="token punctuation">;</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>elementType <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>stateNode <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// ç”¨äºè¿æ¥å…¶ä»–FiberèŠ‚ç‚¹å½¢æˆFiberæ ‘</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>return <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>child <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>sibling <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">this</span><span class="token punctuation">.</span>ref <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// ä½œä¸ºåŠ¨æ€çš„å·¥ä½œå•å…ƒçš„å±æ€§</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>pendingProps <span class="token operator">=</span> pendingProps<span class="token punctuation">;</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>memoizedProps <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>updateQueue <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>memoizedState <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>dependencies <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">this</span><span class="token punctuation">.</span>mode <span class="token operator">=</span> mode<span class="token punctuation">;</span>\n\n  <span class="token keyword">this</span><span class="token punctuation">.</span>effectTag <span class="token operator">=</span> NoEffect<span class="token punctuation">;</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>nextEffect <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">this</span><span class="token punctuation">.</span>firstEffect <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>lastEffect <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// è°ƒåº¦ä¼˜å…ˆçº§ç›¸å…³</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>lanes <span class="token operator">=</span> NoLanes<span class="token punctuation">;</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>childLanes <span class="token operator">=</span> NoLanes<span class="token punctuation">;</span>\n\n  <span class="token comment">// æŒ‡å‘è¯¥fiberåœ¨å¦ä¸€æ¬¡æ›´æ–°æ—¶å¯¹åº”çš„fiber</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>alternate <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ä½œä¸ºæ¶æ„æ¥è¯´" tabindex="-1"><a class="header-anchor" href="#ä½œä¸ºæ¶æ„æ¥è¯´" aria-hidden="true">#</a> ä½œä¸ºæ¶æ„æ¥è¯´</h3><p>æ¯ä¸ªFiberèŠ‚ç‚¹æœ‰ä¸ªå¯¹åº”çš„<code>React element</code>ï¼Œå¤šä¸ª<code>FiberèŠ‚ç‚¹</code>æ˜¯å¦‚ä½•è¿æ¥å½¢æˆæ ‘å‘¢ï¼Ÿé å¦‚ä¸‹ä¸‰ä¸ªå±æ€§ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// æŒ‡å‘çˆ¶çº§FiberèŠ‚ç‚¹</span>\n<span class="token keyword">this</span><span class="token punctuation">.</span>return <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n<span class="token comment">// æŒ‡å‘å­FiberèŠ‚ç‚¹</span>\n<span class="token keyword">this</span><span class="token punctuation">.</span>child <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n<span class="token comment">// æŒ‡å‘å³è¾¹ç¬¬ä¸€ä¸ªå…„å¼ŸFiberèŠ‚ç‚¹</span>\n<span class="token keyword">this</span><span class="token punctuation">.</span>sibling <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚ä¸‹çš„ç»„ä»¶ç»“æ„ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>\n      i am\n      <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>KaSong<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>\n    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>\n  <span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',6),E=(0,e.Uk)("å¯¹åº”çš„"),M=(0,e._)("code",null,"Fiberæ ‘",-1),N=(0,e.Uk)("ç»“æ„ï¼š "),T=["src"],L=(0,e.uE)('<blockquote><p>è¿™é‡Œéœ€è¦æä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆçˆ¶çº§æŒ‡é’ˆå«åš<code>return</code>è€Œä¸æ˜¯<code>parent</code>æˆ–è€…<code>father</code>å‘¢ï¼Ÿå› ä¸ºä½œä¸ºä¸€ä¸ªå·¥ä½œå•å…ƒï¼Œ<code>return</code>æŒ‡èŠ‚ç‚¹æ‰§è¡Œå®Œ<code>completeWork</code>ï¼ˆæœ¬ç« åé¢ä¼šä»‹ç»ï¼‰åä¼šè¿”å›çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚å­<code>FiberèŠ‚ç‚¹</code>åŠå…¶å…„å¼ŸèŠ‚ç‚¹å®Œæˆå·¥ä½œåä¼šè¿”å›å…¶çˆ¶çº§èŠ‚ç‚¹ï¼Œæ‰€ä»¥ç”¨<code>return</code>æŒ‡ä»£çˆ¶çº§èŠ‚ç‚¹ã€‚</p></blockquote><h3 id="ä½œä¸ºé™æ€çš„æ•°æ®ç»“æ„" tabindex="-1"><a class="header-anchor" href="#ä½œä¸ºé™æ€çš„æ•°æ®ç»“æ„" aria-hidden="true">#</a> ä½œä¸ºé™æ€çš„æ•°æ®ç»“æ„</h3><p>ä½œä¸ºä¸€ç§é™æ€çš„æ•°æ®ç»“æ„ï¼Œä¿å­˜äº†ç»„ä»¶ç›¸å…³çš„ä¿¡æ¯ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// Fiberå¯¹åº”ç»„ä»¶çš„ç±»å‹ Function/Class/Host...</span>\n<span class="token keyword">this</span><span class="token punctuation">.</span>tag <span class="token operator">=</span> tag<span class="token punctuation">;</span>\n<span class="token comment">// keyå±æ€§</span>\n<span class="token keyword">this</span><span class="token punctuation">.</span>key <span class="token operator">=</span> key<span class="token punctuation">;</span>\n<span class="token comment">// å¤§éƒ¨åˆ†æƒ…å†µåŒtypeï¼ŒæŸäº›æƒ…å†µä¸åŒï¼Œæ¯”å¦‚FunctionComponentä½¿ç”¨React.memoåŒ…è£¹</span>\n<span class="token keyword">this</span><span class="token punctuation">.</span>elementType <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n<span class="token comment">// å¯¹äº FunctionComponentï¼ŒæŒ‡å‡½æ•°æœ¬èº«ï¼Œå¯¹äºClassComponentï¼ŒæŒ‡classï¼Œå¯¹äºHostComponentï¼ŒæŒ‡DOMèŠ‚ç‚¹tagName</span>\n<span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n<span class="token comment">// Fiberå¯¹åº”çš„çœŸå®DOMèŠ‚ç‚¹</span>\n<span class="token keyword">this</span><span class="token punctuation">.</span>stateNode <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ä½œä¸ºåŠ¨æ€çš„å·¥ä½œå•å…ƒ" tabindex="-1"><a class="header-anchor" href="#ä½œä¸ºåŠ¨æ€çš„å·¥ä½œå•å…ƒ" aria-hidden="true">#</a> ä½œä¸ºåŠ¨æ€çš„å·¥ä½œå•å…ƒ</h3><p>ä½œä¸ºåŠ¨æ€çš„å·¥ä½œå•å…ƒï¼Œ<code>Fiber</code>ä¸­å¦‚ä¸‹å‚æ•°ä¿å­˜äº†æœ¬æ¬¡æ›´æ–°ç›¸å…³çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬ä¼šåœ¨åç»­çš„æ›´æ–°æµç¨‹ä¸­ä½¿ç”¨åˆ°å…·ä½“å±æ€§æ—¶å†è¯¦ç»†ä»‹ç»</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>\n<span class="token comment">// ä¿å­˜æœ¬æ¬¡æ›´æ–°é€ æˆçš„çŠ¶æ€æ”¹å˜ç›¸å…³ä¿¡æ¯</span>\n<span class="token keyword">this</span><span class="token punctuation">.</span>pendingProps <span class="token operator">=</span> pendingProps<span class="token punctuation">;</span>\n<span class="token keyword">this</span><span class="token punctuation">.</span>memoizedProps <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n<span class="token keyword">this</span><span class="token punctuation">.</span>updateQueue <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n<span class="token keyword">this</span><span class="token punctuation">.</span>memoizedState <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n<span class="token keyword">this</span><span class="token punctuation">.</span>dependencies <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n\n<span class="token keyword">this</span><span class="token punctuation">.</span>mode <span class="token operator">=</span> mode<span class="token punctuation">;</span>\n\n<span class="token comment">// ä¿å­˜æœ¬æ¬¡æ›´æ–°ä¼šé€ æˆçš„DOMæ“ä½œ</span>\n<span class="token keyword">this</span><span class="token punctuation">.</span>effectTag <span class="token operator">=</span> NoEffect<span class="token punctuation">;</span>\n<span class="token keyword">this</span><span class="token punctuation">.</span>nextEffect <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n\n<span class="token keyword">this</span><span class="token punctuation">.</span>firstEffect <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n<span class="token keyword">this</span><span class="token punctuation">.</span>lastEffect <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚ä¸‹ä¸¤ä¸ªå­—æ®µä¿å­˜è°ƒåº¦ä¼˜å…ˆçº§ç›¸å…³çš„ä¿¡æ¯ï¼Œä¼šåœ¨è®²è§£<code>Scheduler</code>æ—¶ä»‹ç»ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// è°ƒåº¦ä¼˜å…ˆçº§ç›¸å…³</span>\n<span class="token keyword">this</span><span class="token punctuation">.</span>lanes <span class="token operator">=</span> NoLanes<span class="token punctuation">;</span>\n<span class="token keyword">this</span><span class="token punctuation">.</span>childLanes <span class="token operator">=</span> NoLanes<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',9),P={class:"custom-container warning"},z=(0,e._)("p",{class:"custom-container-title"},"æ³¨æ„",-1),W=(0,e.Uk)("åœ¨2020å¹´5æœˆï¼Œè°ƒåº¦ä¼˜å…ˆçº§ç­–ç•¥ç»å†äº†æ¯”è¾ƒå¤§çš„é‡æ„ã€‚ä»¥"),S=(0,e._)("code",null,"expirationTime",-1),q=(0,e.Uk)("å±æ€§ä¸ºä»£è¡¨çš„ä¼˜å…ˆçº§æ¨¡å‹è¢«"),A=(0,e._)("code",null,"lane",-1),B=(0,e.Uk)("å–ä»£ã€‚è¯¦è§"),Z={href:"https://github.com/facebook/react/pull/18796",target:"_blank",rel:"noopener noreferrer"},H=(0,e.Uk)("è¿™ä¸ªPR"),I=(0,e.Uk)("å¦‚æœä½ çš„æºç ä¸­"),Q=(0,e._)("code",null,"fiber.expirationTime",-1),J=(0,e.Uk)("ä»å­˜åœ¨ï¼Œè¯·å‚ç…§"),K=(0,e.Uk)("è°ƒè¯•æºç "),V=(0,e.Uk)("ç« èŠ‚è·å–æœ€æ–°ä»£ç ã€‚"),$=(0,e.uE)('<h2 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“" aria-hidden="true">#</a> æ€»ç»“</h2><p>æœ¬èŠ‚æˆ‘ä»¬äº†è§£äº†<code>Fiber</code>çš„èµ·æºä¸æ¶æ„ï¼Œå…¶ä¸­<code>FiberèŠ‚ç‚¹</code>å¯ä»¥æ„æˆ<code>Fiberæ ‘</code>ã€‚é‚£ä¹ˆ<code>Fiberæ ‘</code>å’Œé¡µé¢å‘ˆç°çš„<code>DOMæ ‘</code>æœ‰ä»€ä¹ˆå…³ç³»ï¼Œ<code>React</code>åˆæ˜¯å¦‚ä½•æ›´æ–°<code>DOM</code>çš„å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬ä¼šåœ¨ä¸‹ä¸€èŠ‚è®²è§£ã€‚</p><h2 id="å‚è€ƒèµ„æ–™" tabindex="-1"><a class="header-anchor" href="#å‚è€ƒèµ„æ–™" aria-hidden="true">#</a> å‚è€ƒèµ„æ–™</h2>',4),G={href:"https://www.bilibili.com/video/BV1it411p7v6?from=search&seid=3508901752524570226",target:"_blank",rel:"noopener noreferrer"},X=(0,e.Uk)("Lin Clark - A Cartoon Intro to Fiber - React Conf 2017"),Y={},nn=(0,a(13860).Z)(Y,[["render",function(n,s){const a=(0,e.up)("RouterLink"),Y=(0,e.up)("ExternalLinkIcon");return(0,e.wg)(),(0,e.iD)("div",null,[(0,e._)("p",null,[t,(0,e.Wm)(a,{to:"/react/preparation/newConstructure.html"},{default:(0,e.w5)((()=>[p])),_:1}),o,c,l,i,r,d,u,k,v,m,b]),h,y,(0,e._)("blockquote",null,[(0,e._)("p",null,[g,w,f,(0,e._)("a",F,[_,(0,e.Wm)(Y)]),U])]),R,(0,e._)("p",null,[x,(0,e._)("a",j,[O,(0,e.Wm)(Y)]),C]),D,(0,e._)("p",null,[E,M,N,(0,e._)("img",{src:n.$withBase("/img/fiber.png"),alt:"Fiberæ¶æ„"},null,8,T)]),L,(0,e._)("div",P,[z,(0,e._)("p",null,[W,S,q,A,B,(0,e._)("a",Z,[H,(0,e.Wm)(Y)])]),(0,e._)("p",null,[I,Q,J,(0,e.Wm)(a,{to:"/react/preparation/source.html"},{default:(0,e.w5)((()=>[K])),_:1}),V])]),$,(0,e._)("p",null,[(0,e._)("a",G,[X,(0,e.Wm)(Y)])])])}]])},13860:(n,s)=>{s.Z=(n,s)=>{const a=n.__vccOpts||n;for(const[n,e]of s)a[n]=e;return a}},62854:(n,s,a)=>{a.r(s),a.d(s,{data:()=>e});const e=JSON.parse('{"key":"v-900d9cd4","path":"/react/process/fiber.html","title":"Fiberæ¶æ„çš„å®ç°åŸç†","lang":"zh-CN","frontmatter":{"title":"Fiberæ¶æ„çš„å®ç°åŸç†","author":"BetaSu","tag":["React"],"summary":"åœ¨æ–°çš„Reactæ¶æ„ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬æåˆ°çš„è™šæ‹ŸDOMåœ¨Reactä¸­æœ‰ä¸ªæ­£å¼çš„ç§°å‘¼â€”â€”Fiberã€‚åœ¨ä¹‹åçš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬ä¼šé€æ¸ç”¨Fiberæ¥å–ä»£React16è™šæ‹ŸDOMè¿™ä¸€ç§°å‘¼ã€‚ æ¥ä¸‹æ¥è®©æˆ‘ä»¬äº†è§£ä¸‹Fiberå› ä½•è€Œæ¥ï¼Ÿä»–çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ Fiberçš„èµ·æº \\" æœ€æ—©çš„Fiberå®˜æ–¹è§£é‡Šæ¥æºäº2016å¹´Reactå›¢é˜Ÿæˆå‘˜Acdliteçš„ä¸€ç¯‡ä»‹ç»ã€‚\\" ä»ä¸Šä¸€ç« çš„å­¦ä¹ æˆ‘ä»¬çŸ¥é“","head":[["meta",{"property":"og:url","content":"https://0808200.xyz/react/process/fiber.html"}],["meta",{"property":"og:site_name","content":"ğ‘€ğ‘Ÿ.ğºğ‘œğ‘œğ‘”ğ‘¥â„"}],["meta",{"property":"og:title","content":"Fiberæ¶æ„çš„å®ç°åŸç†"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:updated_time","content":"2022-08-29T09:14:21.000Z"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:author","content":"BetaSu"}],["meta",{"property":"article:tag","content":"React"}],["meta",{"property":"article:modified_time","content":"2022-08-29T09:14:21.000Z"}]]},"excerpt":"","headers":[{"level":2,"title":"Fiberçš„èµ·æº","slug":"fiberçš„èµ·æº","children":[]},{"level":2,"title":"Fiberçš„å«ä¹‰","slug":"fiberçš„å«ä¹‰","children":[]},{"level":2,"title":"Fiberçš„ç»“æ„","slug":"fiberçš„ç»“æ„","children":[{"level":3,"title":"ä½œä¸ºæ¶æ„æ¥è¯´","slug":"ä½œä¸ºæ¶æ„æ¥è¯´","children":[]},{"level":3,"title":"ä½œä¸ºé™æ€çš„æ•°æ®ç»“æ„","slug":"ä½œä¸ºé™æ€çš„æ•°æ®ç»“æ„","children":[]},{"level":3,"title":"ä½œä¸ºåŠ¨æ€çš„å·¥ä½œå•å…ƒ","slug":"ä½œä¸ºåŠ¨æ€çš„å·¥ä½œå•å…ƒ","children":[]}]},{"level":2,"title":"æ€»ç»“","slug":"æ€»ç»“","children":[]},{"level":2,"title":"å‚è€ƒèµ„æ–™","slug":"å‚è€ƒèµ„æ–™","children":[]}],"git":{"createdTime":1661764461000,"updatedTime":1661764461000,"contributors":[{"name":"googxh","email":"gxh522@qq.com","commits":1}]},"readingTime":{"minutes":4.03,"words":1209},"filePathRelative":"react/process/fiber.md","localizedDate":"2022å¹´8æœˆ29æ—¥"}')}}]);