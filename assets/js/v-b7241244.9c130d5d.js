"use strict";(self.webpackChunkmyblog=self.webpackChunkmyblog||[]).push([[90456],{81218:(n,s,a)=>{a.r(s),a.d(s,{default:()=>R});var t=a(78e3);const e=(0,t._)("div",{class:"custom-container tip"},[(0,t._)("p",{class:"custom-container-title"},"æç¤º"),(0,t._)("p",null,"æ­¤éƒ¨åˆ†åœ¨åˆæ­¥å­¦ä¹ å°ç¨‹åºçš„æ—¶å€™ç›´æ¥ç•¥è¿‡å³å¯ã€‚")],-1),p=(0,t._)("h2",{id:"wxml-èŠ‚ç‚¹ä¿¡æ¯",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#wxml-èŠ‚ç‚¹ä¿¡æ¯","aria-hidden":"true"},"#"),(0,t.Uk)(" WXML èŠ‚ç‚¹ä¿¡æ¯")],-1),c={href:"https://developers.weixin.qq.com/miniprogram/dev/api/wxml/wx.createSelectorQuery.html",target:"_blank",rel:"noopener noreferrer"},o=(0,t.Uk)("èŠ‚ç‚¹ä¿¡æ¯æŸ¥è¯¢ API"),i=(0,t.Uk)(" å¯ä»¥ç”¨äºè·å–èŠ‚ç‚¹å±æ€§ã€æ ·å¼ã€åœ¨ç•Œé¢ä¸Šçš„ä½ç½®ç­‰ä¿¡æ¯ã€‚"),l=(0,t._)("p",null,"æœ€å¸¸è§çš„ç”¨æ³•æ˜¯ä½¿ç”¨è¿™ä¸ªæ¥å£æ¥æŸ¥è¯¢æŸä¸ªèŠ‚ç‚¹çš„å½“å‰ä½ç½®ï¼Œä»¥åŠç•Œé¢çš„æ»šåŠ¨ä½ç½®ã€‚",-1),u={class:"custom-container details"},r=(0,t.uE)('<summary>ä»£ç ç¤ºä¾‹</summary><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> query <span class="token operator">=</span> wx<span class="token punctuation">.</span><span class="token function">createSelectorQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nquery<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;#the-id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boundingClientRect</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  res<span class="token punctuation">.</span>top<span class="token punctuation">;</span> <span class="token comment">// #the-id èŠ‚ç‚¹çš„ä¸Šè¾¹ç•Œåæ ‡(ç›¸å¯¹äºæ˜¾ç¤ºåŒºåŸŸ)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nquery<span class="token punctuation">.</span><span class="token function">selectViewport</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">scrollOffset</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  res<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span> <span class="token comment">// æ˜¾ç¤ºåŒºåŸŸçš„ç«–ç›´æ»šåŠ¨ä½ç½®</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nquery<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',2),k=(0,t.Uk)("ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œ "),d=(0,t._)("code",null,"#the-id",-1),m=(0,t.Uk)(" æ˜¯ä¸€ä¸ªèŠ‚ç‚¹é€‰æ‹©å™¨ï¼Œä¸ CSS çš„é€‰æ‹©å™¨ç›¸è¿‘ä½†ç•¥æœ‰åŒºåˆ«ï¼Œè¯·å‚è§ "),v={href:"https://developers.weixin.qq.com/miniprogram/dev/api/wxml/SelectorQuery.select.html",target:"_blank",rel:"noopener noreferrer"},b=(0,t.Uk)("SelectorQuery.select"),g=(0,t.Uk)(" çš„ç›¸å…³è¯´æ˜ã€‚"),h=(0,t._)("div",{class:"custom-container tip"},[(0,t._)("p",{class:"custom-container-title"},"æç¤º"),(0,t._)("p",null,[(0,t.Uk)("åœ¨è‡ªå®šä¹‰ç»„ä»¶æˆ–åŒ…å«è‡ªå®šä¹‰ç»„ä»¶çš„é¡µé¢ä¸­ï¼Œæ¨èä½¿ç”¨ "),(0,t._)("code",null,"this.createSelectorQuery"),(0,t.Uk)(" æ¥ä»£æ›¿ "),(0,t._)("code",null,"wx.createSelectorQuery"),(0,t.Uk)(" ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿åœ¨æ­£ç¡®çš„èŒƒå›´å†…é€‰æ‹©èŠ‚ç‚¹ã€‚")])],-1),f=(0,t._)("h2",{id:"wxml-èŠ‚ç‚¹å¸ƒå±€ç›¸äº¤çŠ¶æ€",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#wxml-èŠ‚ç‚¹å¸ƒå±€ç›¸äº¤çŠ¶æ€","aria-hidden":"true"},"#"),(0,t.Uk)(" WXML èŠ‚ç‚¹å¸ƒå±€ç›¸äº¤çŠ¶æ€")],-1),w={href:"https://developers.weixin.qq.com/miniprogram/dev/api/wxml/wx.createIntersectionObserver.html",target:"_blank",rel:"noopener noreferrer"},y=(0,t.Uk)("èŠ‚ç‚¹å¸ƒå±€ç›¸äº¤çŠ¶æ€ API"),x=(0,t.Uk)(" å¯ç”¨äºç›‘å¬ä¸¤ä¸ªæˆ–å¤šä¸ªç»„ä»¶èŠ‚ç‚¹åœ¨å¸ƒå±€ä½ç½®ä¸Šçš„ç›¸äº¤çŠ¶æ€ã€‚è¿™ä¸€ç»„ API å¸¸å¸¸å¯ä»¥ç”¨äºæ¨æ–­æŸäº›èŠ‚ç‚¹æ˜¯å¦å¯ä»¥è¢«ç”¨æˆ·çœ‹è§ã€æœ‰å¤šå¤§æ¯”ä¾‹å¯ä»¥è¢«ç”¨æˆ·çœ‹è§ã€‚"),_=(0,t.uE)('<p>è¿™ä¸€ç»„ API æ¶‰åŠçš„ä¸»è¦æ¦‚å¿µå¦‚ä¸‹ã€‚</p><ul><li>å‚ç…§èŠ‚ç‚¹: ç›‘å¬çš„å‚ç…§èŠ‚ç‚¹ï¼Œå–å®ƒçš„å¸ƒå±€åŒºåŸŸä½œä¸ºå‚ç…§åŒºåŸŸã€‚å¦‚æœæœ‰å¤šä¸ªå‚ç…§èŠ‚ç‚¹ï¼Œåˆ™ä¼šå–å®ƒä»¬å¸ƒå±€åŒºåŸŸçš„ <strong>äº¤é›†</strong> ä½œä¸ºå‚ç…§åŒºåŸŸã€‚é¡µé¢æ˜¾ç¤ºåŒºåŸŸä¹Ÿå¯ä½œä¸ºå‚ç…§åŒºåŸŸä¹‹ä¸€ã€‚</li><li>ç›®æ ‡èŠ‚ç‚¹: ç›‘å¬çš„ç›®æ ‡ï¼Œé»˜è®¤åªèƒ½æ˜¯ä¸€ä¸ªèŠ‚ç‚¹(ä½¿ç”¨ selectAll é€‰é¡¹æ—¶ï¼Œå¯ä»¥åŒæ—¶ç›‘å¬å¤šä¸ªèŠ‚ç‚¹)ã€‚</li><li>ç›¸äº¤åŒºåŸŸ: ç›®æ ‡èŠ‚ç‚¹çš„å¸ƒå±€åŒºåŸŸä¸å‚ç…§åŒºåŸŸçš„ç›¸äº¤åŒºåŸŸã€‚</li><li>ç›¸äº¤æ¯”ä¾‹: ç›¸äº¤åŒºåŸŸå å‚ç…§åŒºåŸŸçš„æ¯”ä¾‹ã€‚</li><li>é˜ˆå€¼: ç›¸äº¤æ¯”ä¾‹å¦‚æœè¾¾åˆ°é˜ˆå€¼ï¼Œåˆ™ä¼šè§¦å‘ç›‘å¬å™¨çš„å›è°ƒå‡½æ•°ã€‚é˜ˆå€¼å¯ä»¥æœ‰å¤šä¸ªã€‚</li></ul><details class="custom-container details"><summary>ä»£ç ç¤ºä¾‹</summary><p>ä»¥ä¸‹ç¤ºä¾‹ä»£ç å¯ä»¥åœ¨ç›®æ ‡èŠ‚ç‚¹(ç”¨é€‰æ‹©å™¨ <code>.target-class</code> æŒ‡å®š)æ¯æ¬¡è¿›å…¥æˆ–ç¦»å¼€é¡µé¢æ˜¾ç¤ºåŒºåŸŸæ—¶ï¼Œè§¦å‘å›è°ƒå‡½æ•°ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    wx<span class="token punctuation">.</span><span class="token function">createIntersectionObserver</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n      <span class="token punctuation">.</span><span class="token function">relativeToViewport</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n      <span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token string">&quot;.target-class&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n        res<span class="token punctuation">.</span>id<span class="token punctuation">;</span> <span class="token comment">// ç›®æ ‡èŠ‚ç‚¹ id</span>\n        res<span class="token punctuation">.</span>dataset<span class="token punctuation">;</span> <span class="token comment">// ç›®æ ‡èŠ‚ç‚¹ dataset</span>\n        res<span class="token punctuation">.</span>intersectionRatio<span class="token punctuation">;</span> <span class="token comment">// ç›¸äº¤åŒºåŸŸå ç›®æ ‡èŠ‚ç‚¹çš„å¸ƒå±€åŒºåŸŸçš„æ¯”ä¾‹</span>\n        res<span class="token punctuation">.</span>intersectionRect<span class="token punctuation">;</span> <span class="token comment">// ç›¸äº¤åŒºåŸŸ</span>\n        res<span class="token punctuation">.</span>intersectionRect<span class="token punctuation">.</span>left<span class="token punctuation">;</span> <span class="token comment">// ç›¸äº¤åŒºåŸŸçš„å·¦è¾¹ç•Œåæ ‡</span>\n        res<span class="token punctuation">.</span>intersectionRect<span class="token punctuation">.</span>top<span class="token punctuation">;</span> <span class="token comment">// ç›¸äº¤åŒºåŸŸçš„ä¸Šè¾¹ç•Œåæ ‡</span>\n        res<span class="token punctuation">.</span>intersectionRect<span class="token punctuation">.</span>width<span class="token punctuation">;</span> <span class="token comment">// ç›¸äº¤åŒºåŸŸçš„å®½åº¦</span>\n        res<span class="token punctuation">.</span>intersectionRect<span class="token punctuation">.</span>height<span class="token punctuation">;</span> <span class="token comment">// ç›¸äº¤åŒºåŸŸçš„é«˜åº¦</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»¥ä¸‹ç¤ºä¾‹ä»£ç å¯ä»¥åœ¨ç›®æ ‡èŠ‚ç‚¹(ç”¨é€‰æ‹©å™¨ <code>.target-class</code> æŒ‡å®š)ä¸å‚ç…§èŠ‚ç‚¹(ç”¨é€‰æ‹©å™¨ <code>.relative-class</code> æŒ‡å®š)åœ¨é¡µé¢æ˜¾ç¤ºåŒºåŸŸå†…ç›¸äº¤æˆ–ç›¸ç¦»ï¼Œä¸”ç›¸äº¤æˆ–ç›¸ç¦»ç¨‹åº¦è¾¾åˆ°ç›®æ ‡èŠ‚ç‚¹å¸ƒå±€åŒºåŸŸçš„ 20%å’Œ 50%æ—¶ï¼Œè§¦å‘å›è°ƒå‡½æ•°ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    wx<span class="token punctuation">.</span><span class="token function">createIntersectionObserver</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n      <span class="token literal-property property">thresholds</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n      <span class="token punctuation">.</span><span class="token function">relativeTo</span><span class="token punctuation">(</span><span class="token string">&quot;.relative-class&quot;</span><span class="token punctuation">)</span>\n      <span class="token punctuation">.</span><span class="token function">relativeToViewport</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n      <span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token string">&quot;.target-class&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n        res<span class="token punctuation">.</span>intersectionRatio<span class="token punctuation">;</span> <span class="token comment">// ç›¸äº¤åŒºåŸŸå ç›®æ ‡èŠ‚ç‚¹çš„å¸ƒå±€åŒºåŸŸçš„æ¯”ä¾‹</span>\n        res<span class="token punctuation">.</span>intersectionRect<span class="token punctuation">;</span> <span class="token comment">// ç›¸äº¤åŒºåŸŸ</span>\n        res<span class="token punctuation">.</span>intersectionRect<span class="token punctuation">.</span>left<span class="token punctuation">;</span> <span class="token comment">// ç›¸äº¤åŒºåŸŸçš„å·¦è¾¹ç•Œåæ ‡</span>\n        res<span class="token punctuation">.</span>intersectionRect<span class="token punctuation">.</span>top<span class="token punctuation">;</span> <span class="token comment">// ç›¸äº¤åŒºåŸŸçš„ä¸Šè¾¹ç•Œåæ ‡</span>\n        res<span class="token punctuation">.</span>intersectionRect<span class="token punctuation">.</span>width<span class="token punctuation">;</span> <span class="token comment">// ç›¸äº¤åŒºåŸŸçš„å®½åº¦</span>\n        res<span class="token punctuation">.</span>intersectionRect<span class="token punctuation">.</span>height<span class="token punctuation">;</span> <span class="token comment">// ç›¸äº¤åŒºåŸŸçš„é«˜åº¦</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><div class="custom-container warning"><p class="custom-container-title">æ³¨æ„</p><p>ä¸é¡µé¢æ˜¾ç¤ºåŒºåŸŸçš„ç›¸äº¤åŒºåŸŸå¹¶ä¸å‡†ç¡®ä»£è¡¨ç”¨æˆ·å¯è§çš„åŒºåŸŸï¼Œå› ä¸ºå‚ä¸è®¡ç®—çš„åŒºåŸŸæ˜¯â€œå¸ƒå±€åŒºåŸŸâ€ï¼Œå¸ƒå±€åŒºåŸŸå¯èƒ½ä¼šåœ¨ç»˜åˆ¶æ—¶è¢«å…¶ä»–èŠ‚ç‚¹è£å‰ªéšè—(å¦‚é‡ç¥–å…ˆèŠ‚ç‚¹ä¸­ overflow æ ·å¼ä¸º <code>hidden</code> çš„èŠ‚ç‚¹)æˆ–é®ç›–(å¦‚é‡ <code>fixed</code> å®šä½çš„èŠ‚ç‚¹)ã€‚</p></div><div class="custom-container tip"><p class="custom-container-title">æç¤º</p><p>åœ¨è‡ªå®šä¹‰ç»„ä»¶æˆ–åŒ…å«è‡ªå®šä¹‰ç»„ä»¶çš„é¡µé¢ä¸­ï¼Œæ¨èä½¿ç”¨ <code>this.createIntersectionObserver</code> æ¥ä»£æ›¿ <code>wx.createIntersectionObserver</code> ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿åœ¨æ­£ç¡®çš„èŒƒå›´å†…é€‰æ‹©èŠ‚ç‚¹ã€‚</p></div>',5),q={},R=(0,a(13860).Z)(q,[["render",function(n,s){const a=(0,t.up)("ExternalLinkIcon");return(0,t.wg)(),(0,t.iD)("div",null,[e,p,(0,t._)("p",null,[(0,t._)("a",c,[o,(0,t.Wm)(a)]),i]),l,(0,t._)("details",u,[r,(0,t._)("p",null,[k,d,m,(0,t._)("a",v,[b,(0,t.Wm)(a)]),g])]),h,f,(0,t._)("p",null,[(0,t._)("a",w,[y,(0,t.Wm)(a)]),x]),_])}]])},13860:(n,s)=>{s.Z=(n,s)=>{const a=n.__vccOpts||n;for(const[n,t]of s)a[n]=t;return a}},84667:(n,s,a)=>{a.r(s),a.d(s,{data:()=>t});const t=JSON.parse('{"key":"v-b7241244","path":"/code/mini-app/guide/view/selector.html","title":"è·å–ç•Œé¢ä¸Šçš„èŠ‚ç‚¹ä¿¡æ¯","lang":"zh-CN","frontmatter":{"title":"è·å–ç•Œé¢ä¸Šçš„èŠ‚ç‚¹ä¿¡æ¯","icon":"select","category":["å°ç¨‹åº"],"summary":"æ­¤éƒ¨åˆ†åœ¨åˆæ­¥å­¦ä¹ å°ç¨‹åºçš„æ—¶å€™ç›´æ¥ç•¥è¿‡å³å¯ã€‚ WXML èŠ‚ç‚¹ä¿¡æ¯ èŠ‚ç‚¹ä¿¡æ¯æŸ¥è¯¢ API å¯ä»¥ç”¨äºè·å–èŠ‚ç‚¹å±æ€§ã€æ ·å¼ã€åœ¨ç•Œé¢ä¸Šçš„ä½ç½®ç­‰ä¿¡æ¯ã€‚ æœ€å¸¸è§çš„ç”¨æ³•æ˜¯ä½¿ç”¨è¿™ä¸ªæ¥å£æ¥æŸ¥è¯¢æŸä¸ªèŠ‚ç‚¹çš„å½“å‰ä½ç½®ï¼Œä»¥åŠç•Œé¢çš„æ»šåŠ¨ä½ç½®ã€‚ ä»£ç ç¤ºä¾‹ ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œ #the-id æ˜¯ä¸€ä¸ªèŠ‚ç‚¹é€‰æ‹©å™¨ï¼Œä¸ CSS çš„é€‰æ‹©å™¨ç›¸è¿‘ä½†ç•¥æœ‰åŒºåˆ«ï¼Œè¯·å‚è§ SelectorQuery.select çš„ç›¸","head":[["meta",{"property":"og:url","content":"https://0808200.xyz/code/mini-app/guide/view/selector.html"}],["meta",{"property":"og:site_name","content":"ğ‘€ğ‘Ÿ.ğºğ‘œğ‘œğ‘”ğ‘¥â„"}],["meta",{"property":"og:title","content":"è·å–ç•Œé¢ä¸Šçš„èŠ‚ç‚¹ä¿¡æ¯"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:updated_time","content":"2022-06-27T09:33:50.000Z"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:modified_time","content":"2022-06-27T09:33:50.000Z"}]]},"excerpt":"","headers":[{"level":2,"title":"WXML èŠ‚ç‚¹ä¿¡æ¯","slug":"wxml-èŠ‚ç‚¹ä¿¡æ¯","children":[]},{"level":2,"title":"WXML èŠ‚ç‚¹å¸ƒå±€ç›¸äº¤çŠ¶æ€","slug":"wxml-èŠ‚ç‚¹å¸ƒå±€ç›¸äº¤çŠ¶æ€","children":[]}],"git":{"createdTime":1656322430000,"updatedTime":1656322430000,"contributors":[{"name":"googxh","email":"gxh522@qq.com","commits":1}]},"readingTime":{"minutes":3.08,"words":923},"filePathRelative":"code/mini-app/guide/view/selector.md","localizedDate":"2022å¹´6æœˆ27æ—¥"}')}}]);