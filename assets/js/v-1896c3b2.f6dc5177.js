"use strict";(self.webpackChunkmyblog=self.webpackChunkmyblog||[]).push([[1694],{60913:(n,s,a)=>{a.r(s),a.d(s,{default:()=>Q});var e=a(60329);const t=(0,e.uE)('<p><code>Redux</code>çš„ä½œè€…<code>Dan</code>åŠ å…¥<code>React</code>æ ¸å¿ƒå›¢é˜Ÿåçš„ä¸€å¤§è´¡çŒ®å°±æ˜¯â€œå°†<code>Redux</code>çš„ç†å¿µå¸¦å…¥<code>React</code>â€ã€‚</p><p>è¿™é‡Œé¢æœ€æ˜¾è€Œæ˜“è§çš„å½±å“è«è¿‡äº<code>useState</code>ä¸<code>useReducer</code>è¿™ä¸¤ä¸ª<code>Hook</code>ã€‚æœ¬è´¨æ¥è¯´ï¼Œ<code>useState</code>åªæ˜¯é¢„ç½®äº†<code>reducer</code>çš„<code>useReducer</code>ã€‚</p><p>æœ¬èŠ‚æˆ‘ä»¬æ¥å­¦ä¹ <code>useState</code>ä¸<code>useReducer</code>çš„å®ç°ã€‚</p><h2 id="æµç¨‹æ¦‚è§ˆ" tabindex="-1"><a class="header-anchor" href="#æµç¨‹æ¦‚è§ˆ" aria-hidden="true">#</a> æµç¨‹æ¦‚è§ˆ</h2><p>æˆ‘ä»¬å°†è¿™ä¸¤ä¸ª<code>Hook</code>çš„å·¥ä½œæµç¨‹åˆ†ä¸º<code>å£°æ˜é˜¶æ®µ</code>å’Œ<code>è°ƒç”¨é˜¶æ®µ</code>ï¼Œå¯¹äºï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>num<span class="token punctuation">,</span> updateNum<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  \n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>\n      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;a&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>state<span class="token punctuation">.</span>a<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>  \n      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">updateNum</span><span class="token punctuation">(</span><span class="token parameter">num</span> <span class="token operator">=&gt;</span> num <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>num<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>  \n    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>\n  <span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>å£°æ˜é˜¶æ®µ</code>å³<code>App</code>è°ƒç”¨æ—¶ï¼Œä¼šä¾æ¬¡æ‰§è¡Œ<code>useReducer</code>ä¸<code>useState</code>æ–¹æ³•ã€‚</p><p><code>è°ƒç”¨é˜¶æ®µ</code>å³ç‚¹å‡»æŒ‰é’®åï¼Œ<code>dispatch</code>æˆ–<code>updateNum</code>è¢«è°ƒç”¨æ—¶ã€‚</p><h2 id="å£°æ˜é˜¶æ®µ" tabindex="-1"><a class="header-anchor" href="#å£°æ˜é˜¶æ®µ" aria-hidden="true">#</a> å£°æ˜é˜¶æ®µ</h2>',9),o=(0,e._)("code",null,"FunctionComponent",-1),p=(0,e._)("code",null,"renderé˜¶æ®µ",-1),c=(0,e._)("code",null,"beginWork",-1),l={href:"https://github.com/acdlite/react/blob/1fb18e22ae66fdb1dc127347e169e73948778e5a/packages/react-reconciler/src/ReactFiberBeginWork.new.js#L1419",target:"_blank",rel:"noopener noreferrer"},r=(0,e._)("p",null,[(0,e.Uk)("è¯¥æ–¹æ³•å†…éƒ¨ä¼šæ‰§è¡Œ"),(0,e._)("code",null,"FunctionComponent"),(0,e.Uk)("å¯¹åº”å‡½æ•°ï¼ˆå³"),(0,e._)("code",null,"fiber.type"),(0,e.Uk)("ï¼‰ã€‚")],-1),u={href:"https://github.com/acdlite/react/blob/1fb18e22ae66fdb1dc127347e169e73948778e5a/packages/react-reconciler/src/ReactFiberHooks.new.js#L415",target:"_blank",rel:"noopener noreferrer"},i=(0,e.uE)('<p>å¯¹äºè¿™ä¸¤ä¸ª<code>Hook</code>ï¼Œä»–ä»¬çš„æºç å¦‚ä¸‹ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token parameter">initialState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">var</span> dispatcher <span class="token operator">=</span> <span class="token function">resolveDispatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> dispatcher<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span>initialState<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">function</span> <span class="token function">useReducer</span><span class="token punctuation">(</span><span class="token parameter">reducer<span class="token punctuation">,</span> initialArg<span class="token punctuation">,</span> init</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">var</span> dispatcher <span class="token operator">=</span> <span class="token function">resolveDispatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> dispatcher<span class="token punctuation">.</span><span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> initialArg<span class="token punctuation">,</span> init<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',2),d=(0,e._)("code",null,"Hook",-1),k=(0,e._)("p",null,[(0,e.Uk)("æˆ‘ä»¬åˆ†åˆ«è®²è§£"),(0,e._)("code",null,"mount"),(0,e.Uk)("ä¸"),(0,e._)("code",null,"update"),(0,e.Uk)("ä¸¤ä¸ªåœºæ™¯ã€‚")],-1),v=(0,e._)("h3",{id:"mountæ—¶",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#mountæ—¶","aria-hidden":"true"},"#"),(0,e.Uk)(" mountæ—¶")],-1),m=(0,e._)("code",null,"mount",-1),b=(0,e._)("code",null,"useReducer",-1),h={href:"https://github.com/acdlite/react/blob/1fb18e22ae66fdb1dc127347e169e73948778e5a/packages/react-reconciler/src/ReactFiberHooks.new.js#L638",target:"_blank",rel:"noopener noreferrer"},g=(0,e._)("code",null,"useState",-1),y={href:"https://github.com/acdlite/react/blob/1fb18e22ae66fdb1dc127347e169e73948778e5a/packages/react-reconciler/src/ReactFiberHooks.new.js#L1143",target:"_blank",rel:"noopener noreferrer"},f=(0,e.uE)('<p>æˆ‘ä»¬æ¥ç®€å•å¯¹æ¯”è¿™è¿™ä¸¤ä¸ªæ–¹æ³•ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> mountState<span class="token operator">&lt;</span><span class="token constant">S</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>\n  <span class="token literal-property property">initialState</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">S</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token constant">S</span><span class="token punctuation">,</span>\n<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token constant">S</span><span class="token punctuation">,</span> Dispatch<span class="token operator">&lt;</span>BasicStateAction<span class="token operator">&lt;</span><span class="token constant">S</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>\n  <span class="token comment">// åˆ›å»ºå¹¶è¿”å›å½“å‰çš„hook</span>\n  <span class="token keyword">const</span> hook <span class="token operator">=</span> <span class="token function">mountWorkInProgressHook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// ...èµ‹å€¼åˆå§‹state</span>\n\n  <span class="token comment">// åˆ›å»ºqueue</span>\n  <span class="token keyword">const</span> queue <span class="token operator">=</span> <span class="token punctuation">(</span>hook<span class="token punctuation">.</span>queue <span class="token operator">=</span> <span class="token punctuation">{</span>\n    <span class="token literal-property property">pending</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">dispatch</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">lastRenderedReducer</span><span class="token operator">:</span> basicStateReducer<span class="token punctuation">,</span>\n    <span class="token literal-property property">lastRenderedState</span><span class="token operator">:</span> <span class="token punctuation">(</span>initialState<span class="token operator">:</span> any<span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// ...åˆ›å»ºdispatch</span>\n  <span class="token keyword">return</span> <span class="token punctuation">[</span>hook<span class="token punctuation">.</span>memoizedState<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">function</span> mountReducer<span class="token operator">&lt;</span><span class="token constant">S</span><span class="token punctuation">,</span> <span class="token constant">I</span><span class="token punctuation">,</span> <span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>\n  <span class="token function-variable function">reducer</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token constant">S</span><span class="token punctuation">,</span> <span class="token constant">A</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">S</span><span class="token punctuation">,</span>\n  <span class="token literal-property property">initialArg</span><span class="token operator">:</span> <span class="token constant">I</span><span class="token punctuation">,</span>\n  init<span class="token operator">?</span><span class="token operator">:</span> <span class="token parameter"><span class="token constant">I</span></span> <span class="token operator">=&gt;</span> <span class="token constant">S</span><span class="token punctuation">,</span>\n<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token constant">S</span><span class="token punctuation">,</span> Dispatch<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>\n  <span class="token comment">// åˆ›å»ºå¹¶è¿”å›å½“å‰çš„hook</span>\n  <span class="token keyword">const</span> hook <span class="token operator">=</span> <span class="token function">mountWorkInProgressHook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// ...èµ‹å€¼åˆå§‹state</span>\n\n  <span class="token comment">// åˆ›å»ºqueue</span>\n  <span class="token keyword">const</span> queue <span class="token operator">=</span> <span class="token punctuation">(</span>hook<span class="token punctuation">.</span>queue <span class="token operator">=</span> <span class="token punctuation">{</span>\n    <span class="token literal-property property">pending</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">dispatch</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">lastRenderedReducer</span><span class="token operator">:</span> reducer<span class="token punctuation">,</span>\n    <span class="token literal-property property">lastRenderedState</span><span class="token operator">:</span> <span class="token punctuation">(</span>initialState<span class="token operator">:</span> any<span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// ...åˆ›å»ºdispatch</span>\n  <span class="token keyword">return</span> <span class="token punctuation">[</span>hook<span class="token punctuation">.</span>memoizedState<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶ä¸­<code>mountWorkInProgressHook</code>æ–¹æ³•ä¼šåˆ›å»ºå¹¶è¿”å›å¯¹åº”<code>hook</code>ï¼Œå¯¹åº”<code>æç®€Hookså®ç°</code>ä¸­<code>useState</code>æ–¹æ³•çš„<code>isMount</code>é€»è¾‘éƒ¨åˆ†ã€‚</p><p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>mount</code>æ—¶è¿™ä¸¤ä¸ª<code>Hook</code>çš„å”¯ä¸€åŒºåˆ«ä¸º<code>queue</code>å‚æ•°çš„<code>lastRenderedReducer</code>å­—æ®µã€‚</p><p><code>queue</code>çš„æ•°æ®ç»“æ„å¦‚ä¸‹ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> queue <span class="token operator">=</span> <span class="token punctuation">(</span>hook<span class="token punctuation">.</span>queue <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">// ä¸æç®€å®ç°ä¸­çš„åŒåå­—æ®µæ„ä¹‰ç›¸åŒï¼Œä¿å­˜updateå¯¹è±¡</span>\n  <span class="token literal-property property">pending</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>\n  <span class="token comment">// ä¿å­˜dispatchAction.bind()çš„å€¼</span>\n  <span class="token literal-property property">dispatch</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>\n  <span class="token comment">// ä¸Šä¸€æ¬¡renderæ—¶ä½¿ç”¨çš„reducer</span>\n  <span class="token literal-property property">lastRenderedReducer</span><span class="token operator">:</span> reducer<span class="token punctuation">,</span>\n  <span class="token comment">// ä¸Šä¸€æ¬¡renderæ—¶çš„state</span>\n  <span class="token literal-property property">lastRenderedState</span><span class="token operator">:</span> <span class="token punctuation">(</span>initialState<span class="token operator">:</span> any<span class="token punctuation">)</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶ä¸­ï¼Œ<code>useReducer</code>çš„<code>lastRenderedReducer</code>ä¸ºä¼ å…¥çš„<code>reducer</code>å‚æ•°ã€‚<code>useState</code>çš„<code>lastRenderedReducer</code>ä¸º<code>basicStateReducer</code>ã€‚</p><p><code>basicStateReducer</code>æ–¹æ³•å¦‚ä¸‹ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> basicStateReducer<span class="token operator">&lt;</span><span class="token constant">S</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>state<span class="token operator">:</span> <span class="token constant">S</span><span class="token punctuation">,</span> <span class="token literal-property property">action</span><span class="token operator">:</span> BasicStateAction<span class="token operator">&lt;</span><span class="token constant">S</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">S</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token keyword">typeof</span> action <span class="token operator">===</span> <span class="token string">&#39;function&#39;</span> <span class="token operator">?</span> <span class="token function">action</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token operator">:</span> action<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯è§ï¼Œ<code>useState</code>å³<code>reducer</code>å‚æ•°ä¸º<code>basicStateReducer</code>çš„<code>useReducer</code>ã€‚</p><p><code>mount</code>æ—¶çš„æ•´ä½“è¿è¡Œé€»è¾‘ä¸<code>æç®€å®ç°</code>çš„<code>isMount</code>é€»è¾‘ç±»ä¼¼ï¼Œä½ å¯ä»¥å¯¹ç…§ç€çœ‹ã€‚</p><h3 id="updateæ—¶" tabindex="-1"><a class="header-anchor" href="#updateæ—¶" aria-hidden="true">#</a> updateæ—¶</h3>',12),R=(0,e._)("code",null,"mount",-1),_=(0,e._)("code",null,"update",-1),w=(0,e._)("code",null,"useReducer",-1),S=(0,e._)("code",null,"useState",-1),U={href:"https://github.com/acdlite/react/blob/1fb18e22ae66fdb1dc127347e169e73948778e5a/packages/react-reconciler/src/ReactFiberHooks.new.js#L665",target:"_blank",rel:"noopener noreferrer"},j=(0,e.uE)('<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> updateReducer<span class="token operator">&lt;</span><span class="token constant">S</span><span class="token punctuation">,</span> <span class="token constant">I</span><span class="token punctuation">,</span> <span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>\n  <span class="token function-variable function">reducer</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token constant">S</span><span class="token punctuation">,</span> <span class="token constant">A</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">S</span><span class="token punctuation">,</span>\n  <span class="token literal-property property">initialArg</span><span class="token operator">:</span> <span class="token constant">I</span><span class="token punctuation">,</span>\n  init<span class="token operator">?</span><span class="token operator">:</span> <span class="token parameter"><span class="token constant">I</span></span> <span class="token operator">=&gt;</span> <span class="token constant">S</span><span class="token punctuation">,</span>\n<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token constant">S</span><span class="token punctuation">,</span> Dispatch<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>\n  <span class="token comment">// è·å–å½“å‰hook</span>\n  <span class="token keyword">const</span> hook <span class="token operator">=</span> <span class="token function">updateWorkInProgressHook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">const</span> queue <span class="token operator">=</span> hook<span class="token punctuation">.</span>queue<span class="token punctuation">;</span>\n  \n  queue<span class="token punctuation">.</span>lastRenderedReducer <span class="token operator">=</span> reducer<span class="token punctuation">;</span>\n\n  <span class="token comment">// ...åŒupdateä¸updateQueueç±»ä¼¼çš„æ›´æ–°é€»è¾‘</span>\n\n  <span class="token keyword">const</span> <span class="token literal-property property">dispatch</span><span class="token operator">:</span> Dispatch<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span>queue<span class="token punctuation">.</span>dispatch<span class="token operator">:</span> any<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> <span class="token punctuation">[</span>hook<span class="token punctuation">.</span>memoizedState<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ•´ä¸ªæµç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºä¸€å¥è¯ï¼š</p><blockquote><p>æ‰¾åˆ°å¯¹åº”çš„<code>hook</code>ï¼Œæ ¹æ®<code>update</code>è®¡ç®—è¯¥<code>hook</code>çš„æ–°<code>state</code>å¹¶è¿”å›ã€‚</p></blockquote><p><code>mount</code>æ—¶è·å–å½“å‰<code>hook</code>ä½¿ç”¨çš„æ˜¯<code>mountWorkInProgressHook</code>ï¼Œè€Œ<code>update</code>æ—¶ä½¿ç”¨çš„æ˜¯<code>updateWorkInProgressHook</code>ï¼Œè¿™é‡Œçš„åŸå› æ˜¯ï¼š</p><ul><li><p><code>mount</code>æ—¶å¯ä»¥ç¡®å®šæ˜¯è°ƒç”¨<code>ReactDOM.render</code>æˆ–ç›¸å…³åˆå§‹åŒ–<code>API</code>äº§ç”Ÿçš„<code>æ›´æ–°</code>ï¼Œåªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚</p></li><li><p><code>update</code>å¯èƒ½æ˜¯åœ¨äº‹ä»¶å›è°ƒæˆ–å‰¯ä½œç”¨ä¸­è§¦å‘çš„<code>æ›´æ–°</code>æˆ–è€…æ˜¯<code>renderé˜¶æ®µ</code>è§¦å‘çš„<code>æ›´æ–°</code>ï¼Œä¸ºäº†é¿å…ç»„ä»¶æ— é™å¾ªç¯<code>æ›´æ–°</code>ï¼Œåè€…éœ€è¦åŒºåˆ«å¯¹å¾…ã€‚</p></li></ul><p>ä¸¾ä¸ª<code>renderé˜¶æ®µ</code>è§¦å‘çš„<code>æ›´æ–°</code>çš„ä¾‹å­ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>num<span class="token punctuation">,</span> updateNum<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  \n  <span class="token function">updateNum</span><span class="token punctuation">(</span>num <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">updateNum</span><span class="token punctuation">(</span><span class="token parameter">num</span> <span class="token operator">=&gt;</span> num <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>num<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>  \n  <span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>App</code>è°ƒç”¨æ—¶ï¼Œä»£è¡¨å·²ç»è¿›å…¥<code>renderé˜¶æ®µ</code>æ‰§è¡Œ<code>renderWithHooks</code>ã€‚</p><p>åœ¨<code>App</code>å†…éƒ¨ï¼Œè°ƒç”¨<code>updateNum</code>ä¼šè§¦å‘ä¸€æ¬¡<code>æ›´æ–°</code>ã€‚å¦‚æœä¸å¯¹è¿™ç§æƒ…å†µä¸‹è§¦å‘çš„æ›´æ–°ä½œå‡ºé™åˆ¶ï¼Œé‚£ä¹ˆè¿™æ¬¡<code>æ›´æ–°</code>ä¼šå¼€å¯ä¸€æ¬¡æ–°çš„<code>renderé˜¶æ®µ</code>ï¼Œæœ€ç»ˆä¼šæ— é™å¾ªç¯æ›´æ–°ã€‚</p><p>åŸºäºè¿™ä¸ªåŸå› ï¼Œ<code>React</code>ç”¨ä¸€ä¸ªæ ‡è®°å˜é‡<code>didScheduleRenderPhaseUpdate</code>åˆ¤æ–­æ˜¯å¦æ˜¯<code>renderé˜¶æ®µ</code>è§¦å‘çš„æ›´æ–°ã€‚</p><p><code>updateWorkInProgressHook</code>æ–¹æ³•ä¹Ÿä¼šåŒºåˆ†è¿™ä¸¤ç§æƒ…å†µæ¥è·å–å¯¹åº”<code>hook</code>ã€‚</p>',11),q=(0,e._)("code",null,"hook",-1),x=(0,e._)("code",null,"hook",-1),A=(0,e._)("code",null,"state",-1),H=(0,e._)("code",null,"state",-1),W=(0,e._)("h2",{id:"è°ƒç”¨é˜¶æ®µ",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#è°ƒç”¨é˜¶æ®µ","aria-hidden":"true"},"#"),(0,e.Uk)(" è°ƒç”¨é˜¶æ®µ")],-1),I={href:"https://github.com/acdlite/react/blob/1fb18e22ae66fdb1dc127347e169e73948778e5a/packages/react-reconciler/src/ReactFiberHooks.new.js#L1662",target:"_blank",rel:"noopener noreferrer"},F=(0,e._)("code",null,"FunctionComponent",-1),P=(0,e._)("code",null,"fiber",-1),N=(0,e._)("code",null,"hook.queue",-1),D=(0,e._)("code",null,"bind",-1),L=(0,e.uE)('<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">dispatchAction</span><span class="token punctuation">(</span><span class="token parameter">fiber<span class="token punctuation">,</span> queue<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n\n  <span class="token comment">// ...åˆ›å»ºupdate</span>\n  <span class="token keyword">var</span> update <span class="token operator">=</span> <span class="token punctuation">{</span>\n    <span class="token literal-property property">eventTime</span><span class="token operator">:</span> eventTime<span class="token punctuation">,</span>\n    <span class="token literal-property property">lane</span><span class="token operator">:</span> lane<span class="token punctuation">,</span>\n    <span class="token literal-property property">suspenseConfig</span><span class="token operator">:</span> suspenseConfig<span class="token punctuation">,</span>\n    <span class="token literal-property property">action</span><span class="token operator">:</span> action<span class="token punctuation">,</span>\n    <span class="token literal-property property">eagerReducer</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">eagerState</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">next</span><span class="token operator">:</span> <span class="token keyword">null</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span> \n\n  <span class="token comment">// ...å°†updateåŠ å…¥queue.pending</span>\n  \n  <span class="token keyword">var</span> alternate <span class="token operator">=</span> fiber<span class="token punctuation">.</span>alternate<span class="token punctuation">;</span>\n\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>fiber <span class="token operator">===</span> currentlyRenderingFiber$1 <span class="token operator">||</span> alternate <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> alternate <span class="token operator">===</span> currentlyRenderingFiber$1<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// renderé˜¶æ®µè§¦å‘çš„æ›´æ–°</span>\n    didScheduleRenderPhaseUpdateDuringThisPass <span class="token operator">=</span> didScheduleRenderPhaseUpdate <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>fiber<span class="token punctuation">.</span>lanes <span class="token operator">===</span> NoLanes <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>alternate <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> alternate<span class="token punctuation">.</span>lanes <span class="token operator">===</span> NoLanes<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token comment">// ...fiberçš„updateQueueä¸ºç©ºï¼Œä¼˜åŒ–è·¯å¾„</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token function">scheduleUpdateOnFiber</span><span class="token punctuation">(</span>fiber<span class="token punctuation">,</span> lane<span class="token punctuation">,</span> eventTime<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ•´ä¸ªè¿‡ç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºï¼š</p><blockquote><p>åˆ›å»º<code>update</code>ï¼Œå°†<code>update</code>åŠ å…¥<code>queue.pending</code>ä¸­ï¼Œå¹¶å¼€å¯è°ƒåº¦ã€‚</p></blockquote><p>è¿™é‡Œå€¼å¾—æ³¨æ„çš„æ˜¯<code>if...else...</code>é€»è¾‘ï¼Œå…¶ä¸­ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>fiber <span class="token operator">===</span> currentlyRenderingFiber$1 <span class="token operator">||</span> alternate <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> alternate <span class="token operator">===</span> currentlyRenderingFiber$1<span class="token punctuation">)</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><code>currentlyRenderingFiber</code>å³<code>workInProgress</code>ï¼Œ<code>workInProgress</code>å­˜åœ¨ä»£è¡¨å½“å‰å¤„äº<code>renderé˜¶æ®µ</code>ã€‚</p><p>è§¦å‘<code>æ›´æ–°</code>æ—¶é€šè¿‡<code>bind</code>é¢„å…ˆä¿å­˜çš„<code>fiber</code>ä¸<code>workInProgress</code>å…¨ç­‰ï¼Œä»£è¡¨æœ¬æ¬¡<code>æ›´æ–°</code>å‘ç”Ÿäº<code>FunctionComponent</code>å¯¹åº”<code>fiber</code>çš„<code>renderé˜¶æ®µ</code>ã€‚</p><p>æ‰€ä»¥è¿™æ˜¯ä¸€ä¸ª<code>renderé˜¶æ®µ</code>è§¦å‘çš„<code>æ›´æ–°</code>ï¼Œéœ€è¦æ ‡è®°å˜é‡<code>didScheduleRenderPhaseUpdate</code>ï¼Œåç»­å•ç‹¬å¤„ç†ã€‚</p><p>å†æ¥å…³æ³¨ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>fiber<span class="token punctuation">.</span>lanes <span class="token operator">===</span> NoLanes <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>alternate <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> alternate<span class="token punctuation">.</span>lanes <span class="token operator">===</span> NoLanes<span class="token punctuation">)</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><code>fiber.lanes</code>ä¿å­˜<code>fiber</code>ä¸Šå­˜åœ¨çš„<code>update</code>çš„<code>ä¼˜å…ˆçº§</code>ã€‚</p><p><code>fiber.lanes === NoLanes</code>æ„å‘³ç€<code>fiber</code>ä¸Šä¸å­˜åœ¨<code>update</code>ã€‚</p><p>æˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œé€šè¿‡<code>update</code>è®¡ç®—<code>state</code>å‘ç”Ÿåœ¨<code>å£°æ˜é˜¶æ®µ</code>ï¼Œè¿™æ˜¯å› ä¸ºè¯¥<code>hook</code>ä¸Šå¯èƒ½å­˜åœ¨å¤šä¸ªä¸åŒ<code>ä¼˜å…ˆçº§</code>çš„<code>update</code>ï¼Œæœ€ç»ˆ<code>state</code>çš„å€¼ç”±å¤šä¸ª<code>update</code>å…±åŒå†³å®šã€‚</p><p>ä½†æ˜¯å½“<code>fiber</code>ä¸Šä¸å­˜åœ¨<code>update</code>ï¼Œåˆ™<code>è°ƒç”¨é˜¶æ®µ</code>åˆ›å»ºçš„<code>update</code>ä¸ºè¯¥<code>hook</code>ä¸Šç¬¬ä¸€ä¸ª<code>update</code>ï¼Œåœ¨<code>å£°æ˜é˜¶æ®µ</code>è®¡ç®—<code>state</code>æ—¶ä¹Ÿåªä¾èµ–äºè¯¥<code>update</code>ï¼Œå®Œå…¨ä¸éœ€è¦è¿›å…¥<code>å£°æ˜é˜¶æ®µ</code>å†è®¡ç®—<code>state</code>ã€‚</p><p>è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼šå¦‚æœè®¡ç®—å‡ºçš„<code>state</code>ä¸è¯¥<code>hook</code>ä¹‹å‰ä¿å­˜çš„<code>state</code>ä¸€è‡´ï¼Œé‚£ä¹ˆå®Œå…¨ä¸éœ€è¦å¼€å¯ä¸€æ¬¡è°ƒåº¦ã€‚å³ä½¿è®¡ç®—å‡ºçš„<code>state</code>ä¸è¯¥<code>hook</code>ä¹‹å‰ä¿å­˜çš„<code>state</code>ä¸ä¸€è‡´ï¼Œåœ¨<code>å£°æ˜é˜¶æ®µ</code>ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨<code>è°ƒç”¨é˜¶æ®µ</code>å·²ç»è®¡ç®—å‡ºçš„<code>state</code>ã€‚</p>',15),C={href:"https://github.com/acdlite/react/blob/1fb18e22ae66fdb1dc127347e169e73948778e5a/packages/react-reconciler/src/ReactFiberHooks.new.js#L1727",target:"_blank",rel:"noopener noreferrer"},T=(0,e._)("code",null,"state",-1),z=(0,e.uE)('<h2 id="å°tip" tabindex="-1"><a class="header-anchor" href="#å°tip" aria-hidden="true">#</a> å°Tip</h2><p>æˆ‘ä»¬é€šå¸¸è®¤ä¸ºï¼Œ<code>useReducer(reducer, initialState)</code>çš„ä¼ å‚ä¸ºåˆå§‹åŒ–å‚æ•°ï¼Œåœ¨ä»¥åçš„è°ƒç”¨ä¸­éƒ½ä¸å¯å˜ã€‚</p><p>ä½†æ˜¯åœ¨<code>updateReducer</code>æ–¹æ³•ä¸­ï¼Œå¯ä»¥çœ‹åˆ°<code>lastRenderedReducer</code>åœ¨æ¯æ¬¡è°ƒç”¨æ—¶éƒ½ä¼šé‡æ–°èµ‹å€¼ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">updateReducer</span><span class="token punctuation">(</span><span class="token parameter">reducer<span class="token punctuation">,</span> initialArg<span class="token punctuation">,</span> init</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// ...</span>\n\n  queue<span class="token punctuation">.</span>lastRenderedReducer <span class="token operator">=</span> reducer<span class="token punctuation">;</span>\n\n  <span class="token comment">// ...</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>reducer</code>å‚æ•°æ˜¯éšæ—¶å¯å˜çš„ã€‚</p>',5),E={class:"custom-container details"},B=(0,e._)("summary",null,"reducerå¯å˜Demo",-1),O=(0,e._)("p",null,[(0,e.Uk)("æ¯ç§’"),(0,e._)("code",null,"useReducer"),(0,e.Uk)("ä½¿ç”¨çš„"),(0,e._)("code",null,"reducer"),(0,e.Uk)("ä¼šæ”¹å˜ä¸€æ¬¡")],-1),Z=(0,e._)("p",null,[(0,e.Uk)("ç‚¹å‡»æŒ‰é’®åä¼šéšæ—¶é—´ä¸åŒä¼šå‡ºç°"),(0,e._)("code",null,"+1"),(0,e.Uk)("æˆ–"),(0,e._)("code",null,"-1"),(0,e.Uk)("çš„æ•ˆæœ")],-1),$=(0,e._)("strong",null,"582",-1),M={},Q=(0,a(13860).Z)(M,[["render",function(n,s){const a=(0,e.up)("ExternalLinkIcon"),M=(0,e.up)("RouterLink");return(0,e.wg)(),(0,e.iD)("div",null,[t,(0,e._)("p",null,[(0,e.Uk)("å½“"),o,(0,e.Uk)("è¿›å…¥"),p,(0,e.Uk)("çš„"),c,(0,e.Uk)("æ—¶ï¼Œä¼šè°ƒç”¨"),(0,e._)("a",l,[(0,e.Uk)("renderWithHooks"),(0,e.Wm)(a)]),(0,e.Uk)("æ–¹æ³•ã€‚")]),r,(0,e._)("blockquote",null,[(0,e._)("p",null,[(0,e.Uk)("ä½ å¯ä»¥åœ¨"),(0,e._)("a",u,[(0,e.Uk)("è¿™é‡Œ"),(0,e.Wm)(a)]),(0,e.Uk)("çœ‹åˆ°è¿™æ®µé€»è¾‘")])]),i,(0,e._)("p",null,[(0,e.Uk)("æ­£å¦‚ä¸Šä¸€èŠ‚"),(0,e.Wm)(M,{to:"/react/hooks/structure.html#dispatcher"},{default:(0,e.w5)((()=>[(0,e.Uk)("dispatcher")])),_:1}),(0,e.Uk)("æ‰€è¯´ï¼Œåœ¨ä¸åŒåœºæ™¯ä¸‹ï¼ŒåŒä¸€ä¸ª"),d,(0,e.Uk)("ä¼šè°ƒç”¨ä¸åŒå¤„ç†å‡½æ•°ã€‚")]),k,v,(0,e._)("p",null,[m,(0,e.Uk)("æ—¶ï¼Œ"),b,(0,e.Uk)("ä¼šè°ƒç”¨"),(0,e._)("a",h,[(0,e.Uk)("mountReducer"),(0,e.Wm)(a)]),(0,e.Uk)("ï¼Œ"),g,(0,e.Uk)("ä¼šè°ƒç”¨"),(0,e._)("a",y,[(0,e.Uk)("mountState"),(0,e.Wm)(a)]),(0,e.Uk)("ã€‚")]),f,(0,e._)("p",null,[(0,e.Uk)("å¦‚æœè¯´"),R,(0,e.Uk)("æ—¶è¿™ä¸¤è€…è¿˜æœ‰åŒºåˆ«ï¼Œé‚£"),_,(0,e.Uk)("æ—¶ï¼Œ"),w,(0,e.Uk)("ä¸"),S,(0,e.Uk)("è°ƒç”¨çš„åˆ™æ˜¯åŒä¸€ä¸ªå‡½æ•°"),(0,e._)("a",U,[(0,e.Uk)("updateReducer"),(0,e.Wm)(a)]),(0,e.Uk)("ã€‚")]),j,(0,e._)("p",null,[(0,e.Uk)("è·å–å¯¹åº”"),q,(0,e.Uk)("ï¼Œæ¥ä¸‹æ¥ä¼šæ ¹æ®"),x,(0,e.Uk)("ä¸­ä¿å­˜çš„"),A,(0,e.Uk)("è®¡ç®—æ–°çš„"),H,(0,e.Uk)("ï¼Œè¿™ä¸ªæ­¥éª¤åŒ"),(0,e.Wm)(M,{to:"/react/state/update.html"},{default:(0,e.w5)((()=>[(0,e.Uk)("Updateä¸€èŠ‚")])),_:1}),(0,e.Uk)("ä¸€è‡´ã€‚")]),W,(0,e._)("p",null,[(0,e.Uk)("è°ƒç”¨é˜¶æ®µä¼šæ‰§è¡Œ"),(0,e._)("a",I,[(0,e.Uk)("dispatchAction"),(0,e.Wm)(a)]),(0,e.Uk)("ï¼Œæ­¤æ—¶è¯¥"),F,(0,e.Uk)("å¯¹åº”çš„"),P,(0,e.Uk)("ä»¥åŠ"),N,(0,e.Uk)("å·²ç»é€šè¿‡è°ƒç”¨"),D,(0,e.Uk)("æ–¹æ³•é¢„å…ˆä½œä¸ºå‚æ•°ä¼ å…¥ã€‚")]),L,(0,e._)("blockquote",null,[(0,e._)("p",null,[(0,e.Uk)("ä½ å¯ä»¥åœ¨"),(0,e._)("a",C,[(0,e.Uk)("è¿™é‡Œ"),(0,e.Wm)(a)]),(0,e.Uk)("çœ‹åˆ°è¿™æ®µæå‰è®¡ç®—"),T,(0,e.Uk)("çš„é€»è¾‘")])]),z,(0,e._)("details",E,[B,O,Z,(0,e._)("p",null,[(0,e.Wm)(M,{to:"/react/me.html"},{default:(0,e.w5)((()=>[(0,e.Uk)("å…³æ³¨å…¬ä¼—å·")])),_:1}),(0,e.Uk)("ï¼Œåå°å›å¤"),$,(0,e.Uk)("è·å¾—åœ¨çº¿Demoåœ°å€")])])])}]])},13860:(n,s)=>{s.Z=(n,s)=>{const a=n.__vccOpts||n;for(const[n,e]of s)a[n]=e;return a}},44162:(n,s,a)=>{a.r(s),a.d(s,{data:()=>e});const e=JSON.parse('{"key":"v-1896c3b2","path":"/react/hooks/usestate.html","title":"useStateä¸useReducer","lang":"zh-CN","frontmatter":{"title":"useStateä¸useReducer","author":"BetaSu","tag":["React"],"summary":"Reduxçš„ä½œè€…DanåŠ å…¥Reactæ ¸å¿ƒå›¢é˜Ÿåçš„ä¸€å¤§è´¡çŒ®å°±æ˜¯â€œå°†Reduxçš„ç†å¿µå¸¦å…¥Reactâ€ã€‚ è¿™é‡Œé¢æœ€æ˜¾è€Œæ˜“è§çš„å½±å“è«è¿‡äºuseStateä¸useReducerè¿™ä¸¤ä¸ªHookã€‚æœ¬è´¨æ¥è¯´ï¼ŒuseStateåªæ˜¯é¢„ç½®äº†reducerçš„useReducerã€‚ æœ¬èŠ‚æˆ‘ä»¬æ¥å­¦ä¹ useStateä¸useReducerçš„å®ç°ã€‚ æµç¨‹æ¦‚è§ˆ æˆ‘ä»¬å°†è¿™ä¸¤ä¸ªHookçš„å·¥ä½œæµç¨‹","head":[["meta",{"property":"og:url","content":"https://0808200.xyz/react/hooks/usestate.html"}],["meta",{"property":"og:site_name","content":"ğ‘€ğ‘Ÿ.ğ‘”ğ‘œğ‘œğ‘”ğ‘¥â„"}],["meta",{"property":"og:title","content":"useStateä¸useReducer"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:updated_time","content":"2022-08-29T09:14:21.000Z"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:author","content":"BetaSu"}],["meta",{"property":"article:tag","content":"React"}],["meta",{"property":"article:modified_time","content":"2022-08-29T09:14:21.000Z"}]]},"excerpt":"","headers":[{"level":2,"title":"æµç¨‹æ¦‚è§ˆ","slug":"æµç¨‹æ¦‚è§ˆ","children":[]},{"level":2,"title":"å£°æ˜é˜¶æ®µ","slug":"å£°æ˜é˜¶æ®µ","children":[{"level":3,"title":"mountæ—¶","slug":"mountæ—¶","children":[]},{"level":3,"title":"updateæ—¶","slug":"updateæ—¶","children":[]}]},{"level":2,"title":"è°ƒç”¨é˜¶æ®µ","slug":"è°ƒç”¨é˜¶æ®µ","children":[]},{"level":2,"title":"å°Tip","slug":"å°tip","children":[]}],"git":{"createdTime":1661764461000,"updatedTime":1661764461000,"contributors":[{"name":"googxh","email":"gxh522@qq.com","commits":1}]},"readingTime":{"minutes":5.8,"words":1741},"filePathRelative":"react/hooks/usestate.md","localizedDate":"2022å¹´8æœˆ29æ—¥"}')}}]);